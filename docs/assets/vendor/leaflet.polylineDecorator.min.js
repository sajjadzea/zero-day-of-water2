/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/leaflet-polylinedecorator@1.6.0/dist/leaflet.polylineDecorator.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],n):n(t.L)}(this,(function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var n=function(t,n){return(180*Math.atan2(n.y-t.y,n.x-t.x)/Math.PI+90+360)%360},i=function(t,n){var i=t.value;return t.isInPixels?i/n:i};function o(t){if("string"==typeof t&&-1!==t.indexOf("%"))return{value:parseFloat(t)/100,isInPixels:!1};var n=t?parseFloat(t):0;return{value:n,isInPixels:n>0}}var e,r,s;function a(t){return t.reduce((function(t,i,o,e){if(o>0&&!function(t,n){return t.x===n.x&&t.y===n.y}(i,e[o-1])){var r=e[o-1],s=t.length>0?t[t.length-1].distB:0,a=(p=r,u=(h=i).x-p.x,l=h.y-p.y,Math.sqrt(u*u+l*l));t.push({a:r,b:i,distA:s,distB:s+a,heading:n(r,i)})}var p,h,u,l;return t}),[])}function p(t,n,i){return n.x!==t.x?{x:t.x+i*(n.x-t.x),y:t.y+i*(n.y-t.y)}:{x:t.x,y:t.y+(n.y-t.y)*i}}e=L.Marker.prototype._initIcon,r=L.Marker.prototype._setPos,s="msTransform"===L.DomUtil.TRANSFORM,L.Marker.addInitHook((function(){var t=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;t&&(t=t[0]+"px "+t[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||t||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",(function(t){t.target._applyRotation()}))})),L.Marker.include({_initIcon:function(){e.call(this)},_setPos:function(t){r.call(this,t),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,s?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(t){return this.options.rotationAngle=t,this.update(),this},setRotationOrigin:function(t){return this.options.rotationOrigin=t,this.update(),this}}),t.Symbol=t.Symbol||{},t.Symbol.Dash=t.Class.extend({options:{pixelSize:10,pathOptions:{}},initialize:function(n){t.Util.setOptions(this,n),this.options.pathOptions.clickable=!1},buildSymbol:function(n,i,o,e,r){var s=this.options,a=Math.PI/180;if(s.pixelSize<=1)return t.polyline([n.latLng,n.latLng],s.pathOptions);var p=o.project(n.latLng),h=-(n.heading-90)*a,u=t.point(p.x+s.pixelSize*Math.cos(h+Math.PI)/2,p.y+s.pixelSize*Math.sin(h)/2),l=p.add(p.subtract(u));return t.polyline([o.unproject(u),o.unproject(l)],s.pathOptions)}}),t.Symbol.dash=function(n){return new t.Symbol.Dash(n)},t.Symbol.ArrowHead=t.Class.extend({options:{polygon:!0,pixelSize:10,headAngle:60,pathOptions:{stroke:!1,weight:2}},initialize:function(n){t.Util.setOptions(this,n),this.options.pathOptions.clickable=!1},buildSymbol:function(n,i,o,e,r){return this.options.polygon?t.polygon(this._buildArrowPath(n,o),this.options.pathOptions):t.polyline(this._buildArrowPath(n,o),this.options.pathOptions)},_buildArrowPath:function(n,i){var o=Math.PI/180,e=i.project(n.latLng),r=-(n.heading-90)*o,s=this.options.headAngle/2*o,a=r+s,p=r-s,h=t.point(e.x-this.options.pixelSize*Math.cos(a),e.y+this.options.pixelSize*Math.sin(a)),u=t.point(e.x-this.options.pixelSize*Math.cos(p),e.y+this.options.pixelSize*Math.sin(p));return[i.unproject(h),n.latLng,i.unproject(u)]}}),t.Symbol.arrowHead=function(n){return new t.Symbol.ArrowHead(n)},t.Symbol.Marker=t.Class.extend({options:{markerOptions:{},rotate:!1},initialize:function(n){t.Util.setOptions(this,n),this.options.markerOptions.clickable=!1,this.options.markerOptions.draggable=!1},buildSymbol:function(n,i,o,e,r){return this.options.rotate&&(this.options.markerOptions.rotationAngle=n.heading+(this.options.angleCorrection||0)),t.marker(n.latLng,this.options.markerOptions)}}),t.Symbol.marker=function(n){return new t.Symbol.Marker(n)};var h=function(n){return Array.isArray(n)&&((i=n[0])instanceof t.LatLng||Array.isArray(i)&&2===i.length&&"number"==typeof i[0]);var i};t.PolylineDecorator=t.FeatureGroup.extend({options:{patterns:[]},initialize:function(n,i){t.FeatureGroup.prototype.initialize.call(this),t.Util.setOptions(this,i),this._map=null,this._paths=this._initPaths(n),this._bounds=this._initBounds(),this._patterns=this._initPatterns(this.options.patterns)},_initPaths:function(n,i){var o=this;return h(n)?[i?n.concat([n[0]]):n]:n instanceof t.Polyline?this._initPaths(n.getLatLngs(),n instanceof t.Polygon):Array.isArray(n)?n.reduce((function(t,n){return t.concat(o._initPaths(n,i))}),[]):[]},_initPatterns:function(t){return t.map(this._parsePatternDef)},setPatterns:function(t){this.options.patterns=t,this._patterns=this._initPatterns(this.options.patterns),this.redraw()},setPaths:function(t){this._paths=this._initPaths(t),this._bounds=this._initBounds(),this.redraw()},_parsePatternDef:function(t,n){return{symbolFactory:t.symbol,offset:o(t.offset),endOffset:o(t.endOffset),repeat:o(t.repeat)}},onAdd:function(t){this._map=t,this._draw(),this._map.on("moveend",this.redraw,this)},onRemove:function(n){this._map.off("moveend",this.redraw,this),this._map=null,t.FeatureGroup.prototype.onRemove.call(this,n)},_initBounds:function(){var n=this._paths.reduce((function(t,n){return t.concat(n)}),[]);return t.latLngBounds(n)},getBounds:function(){return this._bounds},_buildSymbols:function(t,n,i){var o=this;return i.map((function(e,r){return n.buildSymbol(e,t,o._map,r,i.length)}))},_getDirectionPoints:function(n,o){var e=this;return n.length<2?[]:function(t,n){var o=a(t),e=o.length;if(0===e)return[];var r=o[e-1].distB,s=i(n.offset,r),h=i(n.endOffset,r),u=r*i(n.repeat,r),l=h>0?r*h:0,c=[],f=s>0?r*s:0;do{c.push(f),f+=u}while(u>0&&f<r-l);var d=0,y=o[0];return c.map((function(t){for(;t>y.distB&&d<e-1;)d++,y=o[d];var n=(t-y.distA)/(y.distB-y.distA);return{pt:p(y.a,y.b,n),heading:y.heading}}))}(n.map((function(t){return e._map.project(t)})),o).map((function(n){return{latLng:e._map.unproject(t.point(n.pt)),heading:n.heading}}))},redraw:function(){this._map&&(this.clearLayers(),this._draw())},_getPatternLayers:function(n){var i=this,o=this._map.getBounds().pad(.1);return this._paths.map((function(e){var r=i._getDirectionPoints(e,n).filter((function(t){return o.contains(t.latLng)}));return t.featureGroup(i._buildSymbols(e,n.symbolFactory,r))}))},_draw:function(){var n=this;this._patterns.map((function(t){return n._getPatternLayers(t)})).forEach((function(i){n.addLayer(t.featureGroup(i))}))}}),t.polylineDecorator=function(n,i){return new t.PolylineDecorator(n,i)}}));
//# sourceMappingURL=/sm/3fd0bb52db6825116900102c74a17069742c42b4ffdbd4e6731447364d92de2f.map
.legend-dock{background:rgba(10,15,28,.88);color:#fff;padding:12px;border-radius:14px;box-shadow:0 2px 8px rgba(0,0,0,.2);max-width:320px;font-size:14px}
.legend-dock .legend-tabs{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:8px}
.legend-dock .chip{background:#0b1220;color:#e5e7eb;border:1px solid #324155;border-radius:10px;padding:6px 10px;cursor:pointer}
.legend-dock .chip.muted{opacity:.65}
.legend-dock .chip .info{margin-right:4px;cursor:help;font-size:12px;opacity:.8}
.legend-dock .chip.active{background:#0ea5e9;color:#04121f;border-color:#0ea5e9}
.legend-dock .legend-head{display:flex;gap:8px;align-items:center;margin:6px 0 8px}
.legend-dock .unit{opacity:.85}
.legend-dock ul.swatches{list-style:none;margin:0;padding:0}
.legend-dock ul.swatches li{display:flex;align-items:center;gap:8px;padding:6px;border-radius:8px;cursor:pointer}
.legend-dock ul.swatches li:hover{background:rgba(255,255,255,.06)}
.legend-dock ul.swatches li.active{background:rgba(255,255,255,.12)}
.legend-dock .sw{width:28px;height:14px;border-radius:4px;display:inline-block;border:1px solid rgba(255,255,255,.25)}
.legend-dock .bubbles{display:grid;grid-template-columns:auto 1fr;gap:10px;align-items:center;margin-top:6px}
.legend-dock .bubble{display:inline-block;border-radius:999px;background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.35)}
.legend-dock .legend-meta{display:flex;justify-content:space-between;margin-top:8px;font-size:12px;opacity:.8}
.legend-dock .subhead{font-size:12px;opacity:.9;margin:2px 0 6px}

/* Legend collapse state */
.legend-dock.collapsed{width:auto;padding:8px 10px}
.legend-dock .legend-body,
.legend-dock .legend-meta{max-height:1000px;overflow:hidden;transition:max-height .3s ease,margin .3s ease,padding .3s ease}
.legend-dock.collapsed .legend-body,
.legend-dock.collapsed .legend-meta{max-height:0;margin:0;padding:0}

.is-disabled{opacity:.5;pointer-events:none}

/* === Layers Dock === */
.layers-dock{background:rgba(10,15,28,.88);color:#fff;padding:12px;border-radius:14px;box-shadow:0 2px 8px rgba(0,0,0,.2);max-width:320px;font-size:14px}
.layers-dock .ld-tabs{display:flex;gap:6px}
.layers-dock .ld-tabs button{flex:1;background:#0b1220;color:#e5e7eb;border:1px solid #324155;border-radius:10px;padding:6px 10px;cursor:pointer}
.layers-dock .ld-tabs button.active{background:#0ea5e9;color:#04121f;border-color:#0ea5e9}
.layers-dock .ld-body{margin-top:8px}
.layers-dock .ld-pane label{display:flex;align-items:center;gap:8px;padding:8px;border-radius:8px;cursor:pointer;min-height:44px}
.layers-dock .ld-pane label:hover{background:rgba(255,255,255,.06)}
.layers-dock .ld-pane label.is-disabled{cursor:not-allowed;pointer-events:auto}

/* Avoid control overlap: stack with gaps per corner */
.leaflet-top.leaflet-right,
.leaflet-top.leaflet-left,
.leaflet-bottom.leaflet-right,
.leaflet-bottom.leaflet-left{display:flex;flex-direction:column;gap:10px;align-items:flex-end}
.leaflet-top.leaflet-left,
.leaflet-bottom.leaflet-left{align-items:flex-start}

/* === Sidepanel === */
#ama-sidepanel{position:fixed;top:0;bottom:0;right:-380px;max-width:360px;width:100%;background:rgba(17,24,39,.97);color:#e5e7eb;z-index:1000;padding:20px;overflow-y:auto;transition:right .3s ease;box-shadow:-4px 0 20px rgba(0,0,0,.4);}
#ama-sidepanel.open{right:0;}
#ama-sidepanel header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;}
#ama-sidepanel .close-btn{cursor:pointer;font-size:20px;line-height:1;}

/* === Top-10 panel === */
.ama-panel{background:rgba(10,15,28,.88);color:#fff;padding:10px;border-radius:14px;box-shadow:0 8px 30px rgba(0,0,0,.25);width:320px;font-size:14px;}
.ama-panel-hd{font-weight:700;margin-bottom:8px;}
.ama-panel-hd .sort{cursor:pointer;margin-right:6px;user-select:none;}
.ama-panel-bd{max-height:300px;overflow-y:auto;}
.ama-row{display:grid;grid-template-columns:30px 1fr 1fr 1fr 1fr;gap:6px;padding:4px;border-radius:6px;cursor:pointer;}
.ama-row.ama-head{font-weight:700;}
.ama-row:hover{background:rgba(255,255,255,.06);}
.ama-actions{display:flex;justify-content:space-between;margin-top:8px;font-size:13px;}
.ama-actions a{cursor:pointer;text-decoration:underline;}
.ama-modal{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1001;display:flex;align-items:center;justify-content:center;}
.ama-modal .ama-modal-content{background:#0b1220;color:#e5e7eb;padding:20px;max-height:80vh;overflow:auto;border-radius:12px;width:90%;max-width:480px;}

/* === Search control === */
.ama-search{position:relative;}
.ama-search input{background:#fff;color:#111;padding:6px 32px 6px 6px;border-radius:6px;border:1px solid #ccc;min-width:220px;}
.ama-search button{position:absolute;left:0;top:0;bottom:0;width:32px;background:transparent;border:none;cursor:pointer;}
.ama-suggestions{position:absolute;right:0;left:0;top:100%;background:#fff;color:#111;max-height:200px;overflow:auto;border:1px solid #ccc;border-top:none;z-index:1002;}
.ama-suggestions div{padding:6px;cursor:pointer;}
.ama-suggestions div.active,.ama-suggestions div:hover{background:#e5e7eb;}

/* === Reset control === */
.ama-reset{background:rgba(10,15,28,.88);color:#e5e7eb;border:1px solid #324155;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.2);cursor:pointer;height:44px;padding:0 10px;margin:4px;display:flex;align-items:center;justify-content:center;}
.ama-reset:hover{background:#0ea5e9;color:#04121f;border-color:#0ea5e9}

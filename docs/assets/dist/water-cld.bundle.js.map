{
  "version": 3,
  "sources": ["../water-cld.runtime-guards.js", "../water-cld.cy-alias.js", "../water-cld.js", "../js/watercld.entry.js"],
  "sourcesContent": ["(function(){\n  if (window.__CLD_RT_GUARD__) return; window.__CLD_RT_GUARD__=true;\n\n  // Run callback once Cytoscape instance is ready\n  if (!window.onCyReady) {\n    window.__CLD_READY__ = false;\n    window.onCyReady = function(run){\n      const tryRun = (cy) => { if (cy && typeof run==='function') { try{ run(cy); }catch(_){}} };\n      const c0 = getCy();\n      if (c0 && typeof c0.on==='function') { tryRun(c0); return; }\n      if (!window.__CLD_READY__){\n        window.__CLD_READY__ = true;\n        document.addEventListener('cy:ready', (e)=> tryRun((e && e.detail && e.detail.cy) || getCy()), { once:true });\n        if (window.whenModelReady) window.whenModelReady(()=> tryRun(getCy()));\n        if (document.readyState !== 'loading') setTimeout(()=> tryRun(getCy()), 0);\n        else document.addEventListener('DOMContentLoaded', ()=> tryRun(getCy()), { once:true });\n      }\n    };\n  }\n\n  // lightweight debounce\n  if (!window.__cldDebounce) {\n    window.__cldDebounce = function(fn, ms=60){ let t=0; return function(){ const a=arguments; clearTimeout(t); t=setTimeout(()=>fn.apply(this,a), ms); }; };\n  }\n\n  // safe fit\n  if (!window.__cldSafeFit) {\n    window.__cldSafeFit = function(cy){ try{ const els = cy?.elements(); if (!els || els.length===0) return; cy.fit(els, 40);}catch(_){} };\n  }\n})();\n", "(function(){\n  if (window.__CY_ALIAS__) return; window.__CY_ALIAS__ = true;\n\n  function define(){\n    try{\n      Object.defineProperty(window, 'c', {\n        configurable: true,\n        get: function(){ return getCy(); },\n        // \u0628\u0647\u200C\u062C\u0627\u06CC set \u0631\u0648\u06CC window.cy (\u06A9\u0647 \u0642\u0628\u0644\u0627\u064B \u0628\u0627\u0639\u062B TypeError \u0645\u06CC\u200C\u0634\u062F)\u060C\n        // \u0641\u0642\u0637 \u0646\u0645\u0648\u0646\u0647 \u0631\u0627 \u062F\u0631 \u0645\u062A\u063A\u06CC\u0631\u0647\u0627\u06CC \u062F\u0627\u062E\u0644\u06CC \u0646\u06AF\u0647 \u0645\u06CC\u200C\u062F\u0627\u0631\u06CC\u0645 \u0648 \u0633\u06CC\u06AF\u0646\u0627\u0644 cy:ready \u0645\u06CC\u200C\u0641\u0631\u0633\u062A\u06CC\u0645.\n        set: function(v){\n          try{\n            window.CLD_SAFE = window.CLD_SAFE || {};\n            window.CLD_SAFE.cy = v;\n            window.__cy = v;\n            window.lastCy = v;\n            if (!window._cyDom) window.cy = v;\n            document.dispatchEvent(new CustomEvent('cy:ready', { detail:{ cy: v } }));\n            document.dispatchEvent(new CustomEvent('cld:ready', { detail:{ cy: v } }));\n          }catch(_){}}\n      });\n    }catch(_){ window.c = getCy(); }\n  }\n\n  define();\n  document.addEventListener('cy:ready', define);\n  document.addEventListener('cld:ready', define);\n\n  // microtask/tick: \u0627\u06AF\u0631 cy \u0622\u0645\u0627\u062F\u0647 \u0627\u0633\u062A\u060C \u0631\u0648\u06CC\u062F\u0627\u062F \u0631\u0627 \u06CC\u06A9\u200C\u0628\u0627\u0631 \u062F\u06CC\u06AF\u0631 \u067E\u062E\u0634 \u06A9\u0646\n  setTimeout(function(){\n    try{\n      const c = getCy();\n      if (c && typeof c.add === 'function') {\n        document.dispatchEvent(new CustomEvent('cy:ready', { detail:{ cy: c } }));\n        document.dispatchEvent(new CustomEvent('cld:ready', { detail:{ cy: c } }));\n      }\n    }catch(_){}\n  }, 0);\n})();\n", "window.__WATER_CLD_READY__ = new Promise(function(resolve){ window.__WATER_CLD_RESOLVE__ = resolve; });\nconst getCy = () => window.CLD_SAFE && window.CLD_SAFE.cy;\n// ===== CY READINESS (singleton) =====\nwindow.__CLD_READY__ = window.__CLD_READY__ || false;\nwindow.onCyReady = window.onCyReady || function (run) {\n  // \u0627\u06AF\u0631 cy \u0622\u0645\u0627\u062F\u0647 \u0627\u0633\u062A \u0647\u0645\u06CC\u0646 \u0627\u0644\u0622\u0646 \u0627\u062C\u0631\u0627 \u06A9\u0646\n  const c0 = getCy();\n  if (c0 && typeof c0.on === 'function') { try { run(c0); } catch (e) {} return; }\n\n  // \u0641\u0642\u0637 \u06CC\u06A9\u200C\u0628\u0627\u0631 \u0628\u0647 \u0631\u0648\u06CC\u062F\u0627\u062F\u0647\u0627 \u06AF\u0648\u0634 \u0628\u062F\u0647\n  if (!window.__CLD_READY__) {\n    window.__CLD_READY__ = true;\n    document.addEventListener('cy:ready', e => {\n      const c = e.detail?.cy || getCy();\n      if (c && typeof run === 'function') try { run(c); } catch (e) {}\n    }, { once: true });\n    if (window.whenModelReady) {\n      window.whenModelReady(() => {\n        const c = getCy();\n        if (c && typeof run === 'function') try { run(c); } catch (e) {}\n      });\n    } else {\n      document.addEventListener('DOMContentLoaded', () => {\n        const c = getCy();\n        if (c && typeof run === 'function') try { run(c); } catch (e) {}\n      }, { once: true });\n    }\n  }\n};\n\n// Debounce \u0639\u0645\u0648\u0645\u06CC \u0633\u0628\u06A9 (\u0628\u0631\u0627\u06CC \u0631\u0641\u0631\u0634\u200C\u0647\u0627)\nwindow.__cldDebounce = window.__cldDebounce || function (fn, ms = 50) {\n  let t = 0; return (...a) => { clearTimeout(t); t = setTimeout(() => fn(...a), ms); };\n};\n\n// fit \u0627\u06CC\u0645\u0646 (\u0635\u0641\u0631 \u0627\u0644\u0645\u0646\u062A \u2192 \u06A9\u0627\u0631\u06CC \u0646\u06A9\u0646\u061B \u0627\u062C\u0631\u0627 \u0641\u0642\u0637 \u06CC\u06A9\u200C\u0628\u0627\u0631 \u0628\u0639\u062F \u0627\u0632 layoutstop)\nwindow.__cldSafeFit = window.__cldSafeFit || function (cy) {\n  if (!cy || cy.elements().length === 0) return;\n  try { cy.fit(cy.elements(), 40); } catch (e) {}\n};\n\n// ---- Singleton Cytoscape + ready event ------------------------------------\n(function(){\n  if (!window.__cld_cy_init) {\n    window.__cld_cy_init = true;\n\n    function buildCy(){\n      if (window.__cy && typeof window.__cy.startBatch === 'function') {\n        return window.__cy; // keep existing instance\n      }\n      const el = document.getElementById('cy');\n      if (!el) { console.warn('[CLD init] #cy missing'); return null; }\n      if (!window.cytoscape) { console.warn('[CLD init] cytoscape not loaded'); return null; }\n\n      try {\n        if (window.cy && window.cy.tagName) { window._cyDom = window.cy; window.cy = undefined; }\n      } catch(e){}\n      // \u0627\u06CC\u062C\u0627\u062F instance \u062C\u062F\u06CC\u062F \u0628\u062F\u0648\u0646 \u0645\u0642\u062F\u0627\u0631\u062F\u0647\u06CC \u0645\u0633\u062A\u0642\u06CC\u0645 \u0628\u0647 window.cy\n      const cy = cytoscape({ container: el, elements: [] });\n      // \u0646\u06AF\u0647\u062F\u0627\u0631\u06CC instance \u062F\u0631 \u0645\u062A\u063A\u06CC\u0631\u0647\u0627\u06CC \u062F\u0627\u062E\u0644\u06CC\u061B graph-store \u0622\u0646 \u0631\u0627 adopt \u0645\u06CC\u200C\u06A9\u0646\u062F\n      window.__cy   = cy;\n      window.lastCy = cy;\n      window.CLD_SAFE = window.CLD_SAFE || {};\n      window.CLD_SAFE.cy = cy;\n      if (!window._cyDom) window.cy = cy;\n      // \u0627\u0631\u0633\u0627\u0644 \u0633\u06CC\u06AF\u0646\u0627\u0644 \u0622\u0645\u0627\u062F\u06AF\u06CC \u0628\u0631\u0627\u06CC \u0633\u0627\u06CC\u0631 \u0645\u0627\u0698\u0648\u0644\u200C\u0647\u0627\n      document.dispatchEvent(new CustomEvent('cy:ready', { detail: { cy } }));\n      document.dispatchEvent(new CustomEvent('cld:ready', { detail: { cy } }));\n      console.log('[CLD init] cy built', true);\n      return cy;\n    }\n\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', buildCy, { once:true });\n    } else {\n      buildCy();\n    }\n  }\n})();\n\n// ---- Safe accessors --------------------------------------------------------\nfunction cldGetStoreGraph(){\n  const g = window.graphStore && window.graphStore.graph;\n  if (!g || !Array.isArray(g.nodes) || !Array.isArray(g.edges)) return null;\n  return g;\n}\nfunction cldGetCy(){\n  const C = (window.CLD_SAFE && window.CLD_SAFE.cy) || window.__cy || window.lastCy || window.cy || null;\n  return (C && typeof C.startBatch === 'function') ? C : null;\n}\n\n// ---- Data sanitization -----------------------------------------------------\nfunction sanitizeGraph(graph){\n  const g = graph || {};\n  const nodes = Array.isArray(g.nodes) ? g.nodes : [];\n  const edges = Array.isArray(g.edges) ? g.edges : [];\n  const meta  = g.meta || {};\n  const syn   = (meta.synonymToId instanceof Map) ? meta.synonymToId : null;\n\n  const seenNodes = new Set();\n  const nodeSet   = new Set();\n  const cleanNodes = [];\n  for (const n of nodes){\n    const id = String(n?.id || '').trim();\n    if (!id || seenNodes.has(id)) continue;\n    seenNodes.add(id); nodeSet.add(id);\n    cleanNodes.push({ data:{ id, label: (n?.label ?? id), group: n?.group || '' }, classes:(n?.classes||'') });\n  }\n\n  const seenEdges = new Set();\n  const cleanEdges = [];\n  for (const e of edges){\n    let s = String(e?.source || '').trim();\n    let t = String(e?.target || '').trim();\n    if (syn){ s = String(syn.get(s) || s); t = String(syn.get(t) || t); }\n    if (!s || !t || !nodeSet.has(s) || !nodeSet.has(t)) continue;\n    const p = (e?.polarity === '-' || e?.polarity === '+') ? e.polarity :\n              (e?.p || e?.sign || '');\n    const key = `${s}->${t}:${p}`;\n    if (seenEdges.has(key)) continue;\n    seenEdges.add(key);\n    cleanEdges.push({ data:{ id: (e?.id || key), source:s, target:t, polarity:p, weight:(+e?.weight||0) }, classes:(e?.classes||'') });\n  }\n  return { nodes: cleanNodes, edges: cleanEdges, meta };\n}\n\nfunction whenCyReady(run){\n  const C = cldGetCy();\n  if (C && typeof run === 'function'){ try{ run(C); }catch(_){ } return; }\n  document.addEventListener('cy:ready', (ev)=>{\n    const cy = (ev && ev.detail && ev.detail.cy) || cldGetCy();\n    if (cy && typeof run === 'function') try{ run(cy); }catch(_){ }\n  }, { once:true });\n}\n\nfunction findSynonyms(id){\n  const meta = (getCy()?.graph?.meta) ?? { synonymToId: new Map(), nodes: new Map(), edges: new Map() };\n  const syn = meta.synonymToId instanceof Map ? meta.synonymToId : new Map();\n  return (syn.get(id) || []).map(function(x){ return x; }).filter(Boolean);\n}\n\nfunction findSynonymNodes(id){\n  const meta = (getCy()?.graph?.meta) ?? { synonymToId: new Map(), nodes: new Map(), edges: new Map() };\n  const syn = meta.synonymToId instanceof Map ? meta.synonymToId : new Map();\n  return (syn.get(id) || []).map(function(x){ return meta.nodes?.get?.(x); }).filter(Boolean);\n}\nwindow.findSynonyms = findSynonyms;\nwindow.findSynonymNodes = findSynonymNodes;\n\n// ---- Normalize arbitrary raw graph to Cytoscape elements -------------------\nfunction toCyElements(raw){\n  const nodesSrc = Array.isArray(raw) ? raw : (raw?.nodes || raw?.vertices || []);\n  const linksSrc = Array.isArray(raw) ? [] : (raw?.edges || raw?.links || raw?.connections || []);\n  const clean = sanitizeGraph({ nodes: nodesSrc, edges: linksSrc, meta: raw?.meta || {} });\n  const nodes = clean.nodes.map(n => ({ group: 'nodes', data: n.data, classes: n.classes }));\n  const edges = clean.edges.map(e => ({ group: 'edges', data: e.data, classes: e.classes }));\n  return { nodes, edges, meta: clean.meta, graph: clean, rawNodes: nodesSrc, rawEdges: linksSrc };\n}\nfunction cldToCyElements(graph){ return toCyElements(graph); }\n\n(function () {\n  const Parser = (window.exprEval && window.exprEval.Parser) || function () {\n    this.parse = function () {\n      return { evaluate: function () { return 0; }, variables: function () { return []; } };\n    };\n  };\n\n  // --- readiness flags ---\n  var __modelReady = false;\n  var __chartReady = false;\n  var __modelReadyQueue = [];\n  function whenModelReady(fn){ if(__modelReady){ try{ fn(); }catch(e){ console.error(e);} } else { __modelReadyQueue.push(fn); } }\n  function markModelReady(){ __modelReady = true; for(var i=0;i<__modelReadyQueue.length;i++){ try{ __modelReadyQueue[i](); }catch(e){ console.error(e);} } __modelReadyQueue = []; }\n  window.whenModelReady = whenModelReady;\n\n  function setVhVar(){\n    const vh = window.innerHeight * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n  }\n  setVhVar();\n  window.addEventListener('resize', setVhVar);\n  window.addEventListener('orientationchange', () => { setTimeout(setVhVar, 100); });\n\n  let model;\n  let modelData;\n  let simParams = {};\n  const SC_KEY = 'cld-scenarios';\n\n  function getScenarios() {\n    try { return JSON.parse(localStorage.getItem(SC_KEY)) || {}; } catch (e) { return {}; }\n  }\n\n  function setScenarios(obj) {\n    localStorage.setItem(SC_KEY, JSON.stringify(obj));\n  }\n\n  function parseModel(json) {\n    const parser = new Parser();\n    model = { nodes: {}, edges: [], order: [], initials: {} };\n    (json.nodes || []).forEach(n => {\n      const node = { ...n, deps: [] };\n      if (n.expr) {\n        try { node.fn = parser.parse(n.expr); } catch (e) { console.error('node parse', n.id, e); }\n      }\n      if (n.type === 'init') {\n        node.value = node.fn ? node.fn.evaluate({}) : parseFloat(n.expr) || 0;\n        model.initials[n.id] = node.value;\n      }\n      if (typeof n.init !== 'undefined') model.initials[n.id] = n.init;\n      model.nodes[n.id] = node;\n    });\n    (json.edges || []).forEach(e => {\n      const edge = { ...e };\n      if (e.expr) {\n        try { edge.fn = parser.parse(e.expr); } catch (err) { console.error('edge parse', e.source, e.target, err); }\n      }\n      model.edges.push(edge);\n    });\n    Object.values(model.nodes).forEach(n => {\n      if (n.type === 'expr' && n.fn) {\n        n.deps = n.fn.variables().filter(v => model.nodes[v]);\n      }\n    });\n    const inDeg = {};\n    Object.keys(model.nodes).forEach(id => inDeg[id] = 0);\n    Object.values(model.nodes).forEach(n => n.deps.forEach(d => inDeg[n.id]++));\n    const q = [];\n    Object.keys(inDeg).forEach(id => { if (inDeg[id] === 0) q.push(id); });\n    const order = [];\n    while (q.length) {\n      const id = q.shift();\n      order.push(id);\n      Object.values(model.nodes).forEach(n => {\n        if (n.deps.includes(id)) {\n          inDeg[n.id]--;\n          if (inDeg[n.id] === 0) q.push(n.id);\n        }\n      });\n    }\n    Object.keys(model.nodes).forEach(id => { if (!order.includes(id)) order.push(id); });\n    model.order = order;\n    return model;\n  }\n\n  function simulateStep(state, t) {\n    const initials = (model && model.initials) ? model.initials : {};\n    const prev = state[t - 1] || {};\n    const cur = {};\n    const tol = 1e-6, maxIter = 8;\n    let iter = 0, changed = true;\n    while (changed && iter < maxIter) {\n      changed = false;\n      for (const id of model.order) {\n        const n = model.nodes[id];\n        if (n.type === 'init') {\n          cur[id] = model.initials[id];\n          continue;\n        }\n        const ctx = Object.assign({}, simParams, prev, cur, {\n          delay: function(name, d){\n            d = (typeof d === 'number') ? d : 1;\n            const tt = t - d;\n            if (tt < 0) return initials[name] || 0;\n            const st = state[tt];\n            return st && st[name] != null ? st[name] : initials[name] || 0;\n          }\n        });\n        let val = 0;\n        try { val = n.fn ? n.fn.evaluate(ctx) : 0; } catch (e) { console.error('eval', id, e); }\n        if (cur[id] === undefined || Math.abs(cur[id] - val) > tol) {\n          cur[id] = val;\n          changed = true;\n        }\n      }\n      iter++;\n    }\n    return cur;\n  }\n\n  function simulate(params) {\n    if (!model || !model.initials) { throw new Error('model not ready'); }\n    params = params || {};\n    simParams = params;\n    const years = params.years || 30;\n    const initials = model.initials || {};\n    const state = [Object.assign({}, initials)];\n    for (var t = 1; t <= years; t++) {\n      state[t] = simulateStep(state, t);\n    }\n    return {\n      years: Array.from({ length: years + 1 }, function (_, i) { return i; }),\n      series: state.map(function (s) { return s.gw_stock; })\n    };\n  }\n\n  function createTextMeasurer(fontSizePx) {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    return {\n      setFont: function(fontFamily) { ctx.font = fontSizePx + 'px ' + fontFamily; },\n      measure: function(text) {\n        return (ctx && typeof ctx.measureText === 'function') ? ctx.measureText(text).width : 0;\n      },\n      wrapLines: function(text, maxWidth) {\n        if (!text) return [''];\n        const words = text.split(/\\s+/);\n        const lines = [];\n        let line = words[0] || '';\n        for (let i = 1; i < words.length; i++) {\n          const word = words[i];\n          const test = line + ' ' + word;\n          if (this.measure(test) <= maxWidth) {\n            line = test;\n          } else {\n            lines.push(line);\n            line = word;\n          }\n        }\n        lines.push(line);\n        return lines;\n      }\n    };\n  }\n\n  function measureAndResizeNodes(cy, opts = {}) {\n    const fontSize = opts.fontSize || 15;\n    const padding = typeof opts.padding === 'number' ? opts.padding : 18;\n    const maxTextWidth = opts.maxWidth || opts.maxTextWidth || 260;\n    const minWidth = opts.minWidth || 100;\n    const minHeight = opts.minHeight || 48;\n    const container = cy.container();\n    const comp = window.getComputedStyle(container);\n    const fontFamily = comp && comp.fontFamily ? comp.fontFamily : 'sans-serif';\n    const measurer = createTextMeasurer(fontSize);\n    measurer.setFont(fontFamily);\n\n    cy.batch(() => {\n      cy.nodes().forEach(node => {\n        if (node.isParent && node.isParent()) return;\n        const rawLabel = (node.data('label') !== undefined) ? String(node.data('label')) : (node.id() || '');\n        const normalized = rawLabel.replace(/\\s+/g, ' ').trim();\n        const lines = measurer.wrapLines(normalized, maxTextWidth);\n        let maxLineWidth = 0;\n        lines.forEach(ln => {\n          const w = measurer.measure(ln);\n          if (w > maxLineWidth) maxLineWidth = w;\n        });\n        const lineHeight = Math.ceil(fontSize * 1.3);\n        const textHeight = lines.length * lineHeight;\n        const newWidth = Math.max(minWidth, Math.ceil(maxLineWidth + padding * 2));\n        const newHeight = Math.max(minHeight, Math.ceil(textHeight + padding * 2));\n        const multiLabel = lines.join('\\n');\n        node.data('label', multiLabel);\n        node.style({\n          'width': newWidth + 'px',\n          'height': newHeight + 'px',\n          'text-valign': 'center',\n          'text-halign': 'center'\n        });\n      });\n    });\n  }\n\n  window.measureAndResizeNodes = measureAndResizeNodes;\n\n  let cy;\n  let simChart;\n  let baseSim;\n\n  function initSimChart() {\n    try {\n      const el = document.getElementById('sim-chart');\n      if (!el) return console.warn('sim-chart not found');\n      if (!window.Chart) return console.warn('Chart.js not loaded');\n      const ctx = el.getContext('2d');\n      if (!window.__wesh_sim_chart) {\n        Chart.defaults.font.family = 'Vazirmatn, sans-serif';\n        window.__wesh_sim_chart = new Chart(ctx, {\n          type: 'line',\n          data: { labels: [], datasets: [{ label: '\u067E\u0627\u06CC\u0647', data: [], borderWidth: 2, fill: false }] },\n          options: { responsive: true, maintainAspectRatio: false }\n        });\n      }\n      simChart = window.__wesh_sim_chart;\n      __chartReady = true;\n      whenModelReady(initBaselineIfPossible);\n    } catch (e) {\n      console.error('initSimChart failed', e);\n    }\n  }\n  document.addEventListener('DOMContentLoaded', initSimChart);\n  if (document.fonts && document.fonts.ready) {\n    document.fonts.ready.then(initSimChart).catch(function(){ initSimChart(); });\n  }\n\n  function initBaselineIfPossible(){\n    if (!window.__wesh_sim_chart) return;\n    try{\n      if (typeof simulate === 'function' && model && model.initials){\n        var out = simulate({ eff:0, dem:0, delay:0, years:30 });\n        var labels = out.years || (out.baseline ? out.baseline.map(function(_,i){return i;}) : []);\n        baseSim = { years: labels, baseline: out.baseline || out.series || [] };\n        updateChartFromSim(baseSim);\n      } else if (!window.__wesh_sim_chart.data.labels.length){\n        baseSim = {\n          years: Array.from({length:30}, function(_,i){return i;}),\n          baseline: Array.from({length:30}, function(){return 100;})\n        };\n        updateChartFromSim(baseSim);\n      }\n    }catch(e){ console.error('baseline init failed', e); }\n  }\n\n  function updateChartFromSim(out) {\n    if (!window.__wesh_sim_chart || !out) return;\n    const labels = out.years || Array.from({ length: out.baseline ? out.baseline.length : (out.series ? out.series.length : 0) }, (_, i) => i);\n    window.__wesh_sim_chart.data.labels = labels;\n    const datasets = [{\n      label: '\u067E\u0627\u06CC\u0647',\n      data: out.baseline || out.series || [],\n      borderWidth: 2,\n      borderColor: '#0ea5e9',\n      backgroundColor: 'rgba(14,165,233,0.1)',\n      fill: false\n    }];\n    if (out.scenario) datasets.push({\n      label: '\u0633\u0646\u0627\u0631\u06CC\u0648',\n      data: out.scenario,\n      borderWidth: 2,\n      borderColor: 'rgb(220,38,38)',\n      backgroundColor: 'rgba(220,38,38,0.1)',\n      fill: false\n    });\n    window.__wesh_sim_chart.data.datasets = datasets;\n    window.__wesh_sim_chart.update();\n  }\n\n\n  // ---------- helper: seed positions by group (grid) ----------\n  function seedByGroup(cy){\n    var groups = {};\n    cy.nodes().forEach(function(n){\n      var g = n.data('group') || '_';\n      (groups[g] = groups[g] || []).push(n);\n    });\n\n    var gNames = Object.keys(groups);\n    var cols = Math.ceil(Math.sqrt(gNames.length));\n    var gx = 0, gy = 0, gi = 0;\n\n    gNames.forEach(function(g){\n      var baseX = (gi % cols) * 800 + 200;\n      var baseY = Math.floor(gi / cols) * 600 + 200;\n      var arr = groups[g];\n\n      arr.forEach(function(n, j){\n        var col = j % 3, row = Math.floor(j / 3);\n        var nx = baseX + col * 260 + (Math.random()*20 - 10);\n        var ny = baseY + row * 220 + (Math.random()*20 - 10);\n        n.position({x: nx, y: ny});\n      });\n\n      gi++;\n    });\n  }\n\n  // --- load model from URL and rebuild graph (non-module) ---\n  function normalizeModel(m){\n    const nodes = (m.nodes || []).map(function(n, i){\n      const id = n.id || (n.data && n.data.id) || ('n_' + i);\n      return { data: { id: id, label: n.label, group: n.group, unit: n.unit, desc: n.desc } };\n    });\n    const edges = (m.edges || []).map(function(e, i){\n      const id = e.id || (e.data && e.data.id) || (e.source + '__' + e.target + '__' + (e.sign || '') || ('e_' + i));\n      return { data: { id: id, source: e.source, target: e.target, sign: e.sign, label: e.label || (e.sign === '-' ? '\u2212' : '+'), weight: (typeof e.weight === 'number') ? e.weight : undefined, delayYears: (typeof e.delayYears === 'number') ? e.delayYears : 0 } };\n    });\n    return { nodes: nodes, edges: edges };\n  }\n\n  async function loadModelFromUrl(url){\n    const res = await fetch(url, { cache: 'no-store' }).catch(e => { console.error('[CLD] fetch failed', e); });\n    if (!res || !res.ok) { console.error('[CLD] fetch bad status', res && res.status); return; }\n    let model;\n    try { model = await res.json(); } catch (e) { console.error('[CLD] invalid model JSON', e); return; }\n\n    const mapped = toCyElements(model);\n    console.table({ rawNodes: mapped.rawNodes.length, rawEdges: mapped.rawEdges.length });\n    console.log('first raw node', mapped.rawNodes[0]);\n\n    const graph = mapped.graph;\n    if (window.graphStore?.setGraph) window.graphStore.setGraph(graph);\n    else { window.graphStore = window.graphStore || {}; window.graphStore.graph = graph; }\n    window.kernel = window.kernel || {}; window.kernel.graph = graph;\n\n    modelData = model;\n    if (typeof parseModel === 'function') { try { parseModel(model); } catch (e) { console.error('[CLD] parse model', e); } }\n    if (typeof markModelReady === 'function') markModelReady();\n    if (__chartReady && typeof initBaselineIfPossible === 'function') initBaselineIfPossible();\n\n    const els = { nodes: mapped.nodes, edges: mapped.edges };\n    window.__lastElementsForCy = els;\n\n    const inject = () => {\n      console.debug('[CLD] to-cy arrays', { nNodes: els.nodes.length, nEdges: els.edges.length, sampleNode: els.nodes[0] });\n      // \u0627\u06AF\u0631 \u062E\u0627\u0644\u06CC \u0628\u0648\u062F\u060C \u0641\u0642\u0637 \u0647\u0634\u062F\u0627\u0631 \u0628\u062F\u0647 \u0648\u0644\u06CC \u0686\u0631\u062E\u0647 \u0631\u0648 \u0646\u0634\u06A9\u0646\n      if (!els || !Array.isArray(els.nodes)) { console.warn('[CLD] invalid els'); }\n      try {\n        if (window.graphStore?.restore) {\n          window.graphStore.restore({ elements: { nodes: els.nodes, edges: els.edges } });\n        } else {\n          const C = cldGetCy(); if (!C) return;\n          if (C.startBatch) C.startBatch();\n          try {\n            if (typeof C.json === 'function') {\n              C.elements().remove();\n              C.json({ elements: { nodes: els.nodes, edges: els.edges } });\n            } else {\n              C.add(els.nodes.concat(els.edges));\n            }\n          } finally { if (C.endBatch) try { C.endBatch(); } catch (_) {} }\n        }\n      } catch (err) { console.error('[CLD] inject failed', err); return; }\n\n      const cy = cldGetCy();\n      const nn = cy?.nodes()?.length || 0;\n      const ne = cy?.edges()?.length || 0;\n      console.log('[CLD] added to cy', { cyNodes: nn, cyEdges: ne });\n\n      // \u0627\u062C\u0631\u0627\u06CC layout/fit \u0641\u0642\u0637 \u06CC\u06A9\u200C\u0628\u0627\u0631 \u0648 \u067E\u0633 \u0627\u0632 \u0627\u062A\u0645\u0627\u0645 dispatch \u0631\u0648\u06CC\u062F\u0627\u062F\n      try {\n        const algo = window?.cldLayoutName || 'dagre';\n        const layout = cy.layout({ name: algo, rankDir: 'LR', fit: true });\n        layout.run();\n        cy.once('layoutstop', () => {\n          try { cy.fit(); } catch(_) {}\n          window.waterKernel?.emit?.('MODEL_LOADED', graph);\n          window.waterKernel?.emit?.('GRAPH_READY', graph);\n          window.__WATER_CLD_RESOLVE__?.();\n        });\n      } catch (e) {\n        console.warn('[CLD] layout/fit error', e);\n        window.waterKernel?.emit?.('MODEL_LOADED', graph);\n        window.waterKernel?.emit?.('GRAPH_READY', graph);\n        window.__WATER_CLD_RESOLVE__?.();\n      }\n    };\n\n    const doInject = () => inject();\n    if (window.graphStore && typeof window.graphStore.ready === 'function'){\n      window.graphStore.ready().then(()=> doInject()).catch(()=> whenCyReady(()=> doInject()));\n    } else {\n      whenCyReady(()=> doInject());\n    }\n  }\n  window.loadModelFromUrl = loadModelFromUrl;\n\n  function resetScenario() {\n    if (!baseSim) return;\n    updateChartFromSim(baseSim);\n    const effInput = document.getElementById('p-eff');\n    const demInput = document.getElementById('p-dem');\n    const delayInput = document.getElementById('p-delay');\n    if (effInput) { effInput.value = 0; effInput.dispatchEvent(new Event('input')); }\n    if (demInput) { demInput.value = 0; demInput.dispatchEvent(new Event('input')); }\n    if (delayInput) { delayInput.value = 0; delayInput.dispatchEvent(new Event('input')); }\n  }\n\n  document.addEventListener('DOMContentLoaded', async function () {\n    const container = document.getElementById('cy');\n    if (!container) { console.warn('cy container not found'); return; }\n    if (typeof window.cytoscape === 'undefined') { console.warn('cytoscape not loaded'); return; }\n\n    const cy = cldGetCy();\n    if (!cy) { console.warn('[CLD init] cy missing'); return; }\n\n    if (window.tippy) {\n      tippy('.hint', { allowHTML:true, theme:'light', delay:[80,0], placement:'bottom', maxWidth: 320, interactive: true });\n    }\n\n    const rootStyle = getComputedStyle(document.documentElement);\n    const colorPos = rootStyle.getPropertyValue('--pos').trim() || '#16a34a';\n    const colorNeg = rootStyle.getPropertyValue('--neg').trim() || '#dc2626';\n    const colorAccent = rootStyle.getPropertyValue('--accent').trim() || '#58a79a';\n    const colorLine = rootStyle.getPropertyValue('--line').trim() || '#2f6158';\n    const colorText = rootStyle.getPropertyValue('--text').trim() || '#e6f1ef';\n\n    const baseStyle = [\n      { selector: 'node', style: { 'background-color': '#f8faf9', 'border-width': 2 } },\n      { selector: 'node[label][!isGroup]', style: { 'label': 'data(label)', 'font-family': 'Vazirmatn, sans-serif', 'text-wrap': 'wrap', 'text-max-width': 260, 'font-size': 15, 'font-weight': 500, 'color': '#0a0f0e', 'text-valign': 'center', 'text-halign': 'center', 'text-margin-y': 0, 'text-outline-width': 0, 'background-color': '#eaf3f1', 'shape': 'round-rectangle', 'padding': '12px 18px', 'border-width': 3, 'border-color': '#ffffff', 'min-zoomed-font-size': 8 } },\n      { selector: 'node.compound', style: { 'shape': 'round-rectangle', 'background-color': '#ffffff', 'background-opacity': 0.12, 'border-color': '#2b3c39', 'border-width': 1.5, 'label': 'data(label)', 'text-valign': 'top', 'text-halign': 'center', 'font-size': 12, 'color': '#cfe7e2', 'padding': 24, 'font-family': 'Vazirmatn, sans-serif' } },\n      { selector: 'edge', style: { 'curve-style': 'bezier', 'width': ele => 2 + (ele.data('weight') || 0), 'line-style': ele => ele.data('delayYears') > 0 ? 'dashed' : 'solid', 'line-dash-pattern': ele => ele.data('delayYears') > 0 ? [8,6] : [0], 'target-arrow-shape': 'triangle', 'arrow-scale': 1.2, 'line-color': colorLine, 'target-arrow-color': colorLine, 'source-arrow-color': colorLine, 'label': 'data(label)', 'text-rotation': 'autorotate', 'text-background-color': 'rgba(0,0,0,0.35)', 'text-background-opacity': 1, 'text-background-padding': 1, 'text-wrap': 'wrap', 'text-max-width': 100, 'font-family': 'Vazirmatn, sans-serif', 'font-size': 12, 'color': colorText } },\n      { selector: 'edge.pos', style: { 'line-color': colorPos, 'target-arrow-color': colorPos, 'source-arrow-color': colorPos } },\n      { selector: 'edge.neg', style: { 'line-color': colorNeg, 'target-arrow-color': colorNeg, 'source-arrow-color': colorNeg } },\n      { selector: '.hidden', style: { 'display': 'none' } },\n      { selector: '.faded', style: { 'opacity': 0.1 } },\n      { selector: '.highlighted', style: { 'border-color': '#facc15', 'border-width': 3 } },\n      { selector: '.highlight', style: { 'border-color': colorAccent, 'border-width': 3 } },\n      { selector: 'edge.highlight', style: { 'line-color': colorAccent, 'target-arrow-color': colorAccent, 'source-arrow-color': colorAccent, 'width': 4 } }\n    ];\n    cy.style().fromJson(baseStyle).update();\n    cy.layout({ name: 'grid' }).run();\n\n    // === Edge labels only at higher zoom levels ===\n    (function(){\n      var showAt = 1.0; // \u0622\u0633\u062A\u0627\u0646\u0647 \u0632\u0648\u0645 (zoom threshold)\n      function syncEdgeLabels(){\n        var z = cy.zoom();\n        cy.batch(function(){\n          cy.edges().forEach(function(e){\n            e.style('label', z >= showAt ? e.data('label') : '');\n          });\n        });\n      }\n      window.__WATER_CLD_READY__.then(function(){\n        cy.on('zoom', syncEdgeLabels);\n        syncEdgeLabels();\n      });\n    })();\n\n    // === Neighbor highlight with fade on hover ===\n    (function(){\n      var dim = 0.15; // \u0634\u062F\u062A \u06A9\u0645\u200C\u0631\u0646\u06AF \u0634\u062F\u0646\n      window.__WATER_CLD_READY__.then(function(){\n        cy.on('mouseover', 'node', function(evt){\n          var n = evt.target;\n          var hood = n.closedNeighborhood();\n          cy.batch(function(){\n            const others = cy.elements().difference(hood);\n              if (CLD_SAFE?.safeAddClass) {\n                CLD_SAFE.safeAddClass(others, 'faded');\n              } else {\n                console.warn('CLD_SAFE.safeAddClass missing');\n                if (others?.forEach) {\n                  others.forEach(el => el.classList?.add('faded'));\n                } else {\n                  others?.classList?.add('faded');\n                }\n              }\n            hood.removeClass('faded');\n          });\n        });\n        cy.on('mouseout', 'node', function(){\n          cy.elements().removeClass('faded');\n        });\n\n        // \u062A\u0639\u0631\u06CC\u0641 \u0627\u0633\u062A\u0627\u06CC\u0644 \u06A9\u0644\u0627\u0633 faded\n        cy.style()\n          .selector('.faded')\n          .style({ 'opacity': dim })\n          .update();\n      });\n    })();\n\n    // ---- Modern Cytoscape styling: card-like nodes & readable edge labels ----\n    window.__WATER_CLD_READY__.then(function(){\n      cy.style()\n        // Nodes: card-like\n        .selector('node')\n        .style({\n          'width': 'label',\n          'height': 'label',\n          'text-wrap': 'wrap',\n          'text-max-width': 240,\n          'padding': '16px',\n          'font-size': 15,\n          'font-weight': 600,\n          'color': '#0a0f0e',\n          'background-color': '#f8fafc',   // NOTE: Cytoscape \u0627\u0632 CSS var \u067E\u0634\u062A\u06CC\u0628\u0627\u0646\u06CC \u0645\u0633\u062A\u0642\u06CC\u0645 \u0646\u062F\u0627\u0631\u062F\n          'border-color': '#94a3b8',\n          'border-width': 1,\n          'shape': 'round-rectangle'\n        })\n        .selector('node.compound')\n        .style({ 'width': 'auto', 'height': 'auto' })\n\n        // Edges: base\n        .selector('edge')\n        .style({\n          'curve-style': 'bezier',\n          'width': 'mapData(weight, 0, 1.2, 2, 6)',\n          'target-arrow-shape': 'triangle',\n          'line-cap': 'round',\n          'label': 'data(label)',\n          'text-rotation': 'autorotate',\n          'font-size': 11,\n          'text-background-color': 'rgba(11,18,32,.65)',\n          'text-background-opacity': 1,\n          'text-background-shape': 'roundrectangle',\n          'text-background-padding': 3,\n          'color': '#e6f1ff'\n        })\n\n        // Edge color by sign (categorical)\n        .selector('edge[sign = \"+\"]')\n        .style({ 'line-color': '#16a34a', 'target-arrow-color': '#16a34a' })\n        .selector('edge[sign = \"-\"]')\n        .style({ 'line-color': '#dc2626', 'target-arrow-color': '#dc2626' })\n\n        // Dashed if delayed\n        .selector('edge[delayYears > 0]')\n        .style({ 'line-style': 'dashed', 'line-dash-pattern': [8,6] })\n\n        .update();\n\n      // Re-measure after layout & fonts load so labels never clip\n      cy.on('layoutstop', function(){\n        if (window.measureAndResizeNodes) window.measureAndResizeNodes(cy, {maxWidth:240, padding:16});\n      });\n      if (document.fonts && document.fonts.ready) {\n        document.fonts.ready.then(function(){\n          if (window.measureAndResizeNodes) window.measureAndResizeNodes(cy, {maxWidth:240, padding:16});\n        });\n      }\n\n      cy.on('ready', () => setTimeout(() => window.__cldSafeFit(cy), 0));\n      window.addEventListener('resize', () => requestAnimationFrame(() => window.__cldSafeFit(cy)));\n      window.addEventListener('orientationchange', () => setTimeout(() => window.__cldSafeFit(cy),150));\n      if (document.fonts && document.fonts.ready) {\n        document.fonts.ready.then(() => setTimeout(() => window.__cldSafeFit(cy), 60));\n      }\n    });\n\n    // --- [Tooltips for Cytoscape elements using Tippy] ---------------------------\n    (function () {\n      if (!window.tippy) return;\n\n      function esc(s) {\n        return (s == null) ? '' : String(s).replace(/[&<>\"]/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;'}[m]));\n      }\n\n      function makeClientRectFn(ele, cy) {\n        return function getClientRect() {\n          const bb = ele.renderedBoundingBox({ includeLabels: true });\n          const rect = cy.container().getBoundingClientRect();\n          const w = Math.max(10, bb.w || (bb.x2 - bb.x1));\n          const h = Math.max(10, bb.h || (bb.y2 - bb.y1));\n          const left = rect.left + (bb.x1 || 0);\n          const top  = rect.top  + (bb.y1 || 0);\n          return {\n            width:  w,\n            height: h,\n            top:    top,\n            left:   left,\n            right:  left + w,\n            bottom: top  + h\n          };\n        };\n      }\n\n      function buildContent(ele) {\n        const d = ele.data() || {};\n        const box = document.createElement('div');\n        box.dir = 'rtl';\n        box.style.whiteSpace = 'normal';\n        box.style.maxWidth = '260px';\n\n        const parts = [];\n        if (ele.isNode && ele.isNode()) {\n          parts.push(`<div style=\"font-weight:600;margin-bottom:4px\">${esc(d.label || d.id || '')}</div>`);\n          if (d.desc) parts.push(`<div>${esc(d.desc)}</div>`);\n          const meta = [];\n          if (d.unit)  meta.push(`\u0648\u0627\u062D\u062F: ${esc(d.unit)}`);\n          if (d.group) meta.push(`\u06AF\u0631\u0648\u0647: ${esc(d.group)}`);\n          if (meta.length) parts.push(`<div style=\"opacity:.8;margin-top:4px\">${meta.join(' \u2022 ')}</div>`);\n        } else {\n          parts.push(`<div style=\"font-weight:600;margin-bottom:4px\">${esc(d.label || '')}</div>`);\n          const meta = [];\n          if (d.sign) meta.push(`\u0642\u0637\u0628\u06CC\u062A: ${d.sign === '+' ? '\u0645\u062B\u0628\u062A (+)' : '\u0645\u0646\u0641\u06CC (\u2212)'}`);\n          if (typeof d.weight === 'number') meta.push(`\u0648\u0632\u0646: ${d.weight}`);\n          if (typeof d.delayYears === 'number') meta.push(`\u062A\u0623\u062E\u06CC\u0631: ${d.delayYears} \u0633\u0627\u0644`);\n          if (meta.length) parts.push(`<div>${meta.join(' \u2022 ')}</div>`);\n        }\n        box.innerHTML = parts.join('');\n        return box;\n      }\n\n      function createTip(ele, cy) {\n        const tip = tippy(document.body, {\n          trigger: 'manual',\n          appendTo: () => cy.container(),\n          allowHTML: true,\n          interactive: false,\n          arrow: true,\n          placement: 'top',\n          getReferenceClientRect: makeClientRectFn(ele, cy),\n          content: buildContent(ele),\n          theme: 'light',\n          hideOnClick: false\n        });\n        return tip;\n      }\n\n      function bindCyTooltips(cy) {\n        cy.on('mouseover', 'node, edge', function (evt) {\n          const ele = evt.target;\n          if (ele.scratch('_tippy')) return;\n          const tip = createTip(ele, cy);\n          ele.scratch('_tippy', tip);\n          tip.show();\n        });\n\n        cy.on('mouseout tap', 'node, edge', function (evt) {\n          const tip = evt.target.scratch('_tippy');\n          if (tip) {\n            tip.destroy();\n            evt.target.scratch('_tippy', null);\n          }\n        });\n\n        const refreshVisible = () => {\n          cy.$('node, edge').forEach(ele => {\n            const tip = ele.scratch('_tippy');\n            if (tip) {\n              tip.setProps({ getReferenceClientRect: makeClientRectFn(ele, cy) });\n              if (tip.popperInstance && tip.popperInstance.update) tip.popperInstance.update();\n            }\n          });\n        };\n        cy.on('pan zoom drag position', refreshVisible);\n        cy.on('layoutstop', refreshVisible);\n        cy.on('remove', 'node, edge', function (evt) {\n          const tip = evt.target.scratch('_tippy');\n          if (tip) tip.destroy();\n        });\n      }\n\n      window.__WATER_CLD_READY__.then(function(){ bindCyTooltips(cy); });\n    })();\n\n    window.__WATER_CLD_READY__.then(function(){\n      cy.on('dbltap', 'node', n => {\n        if (n.target.locked()) {\n          n.target.unlock().removeClass('highlight');\n        } else {\n            const t = n.target.lock();\n            if (CLD_SAFE?.safeAddClass) {\n              CLD_SAFE.safeAddClass(t, 'highlight');\n            } else {\n              console.warn('CLD_SAFE.safeAddClass missing');\n              t?.classList?.add('highlight');\n            }\n        }\n      });\n    });\n\n    const layoutSel = document.getElementById('layout');\n\n    const layoutPresetSel = document.getElementById('layout-preset');\n    if (layoutPresetSel) layoutPresetSel.addEventListener('change', () => {\n      const val = layoutPresetSel.value;\n      if (!val) {\n        if (layoutSel) runLayout(layoutSel.value);\n        return;\n      }\n      if (window.getLayoutPreset) {\n        const opt = window.getLayoutPreset(val);\n        if (opt) {\n          try { cy.layout(opt).run(); } catch(e) { console.error('layout preset', e); }\n        }\n      }\n    });\n\n    const fPos = document.getElementById('f-pos');\n    const fNeg = document.getElementById('f-neg');\n    const fGroup = document.getElementById('f-group');\n    const fDelay = document.getElementById('f-delay');\n    const qInput = document.getElementById('q');\n    const loopsList = document.getElementById('loops-list');\n    const loopsBtn = document.getElementById('btn-loops');\n    const loopsPanel = document.getElementById('panel-loops');\n    const wMin = document.getElementById('flt-weight-min');\n    const dMax = document.getElementById('flt-delay-max');\n    const wMinOut = document.getElementById('flt-weight-min-val');\n    const dMaxOut = document.getElementById('flt-delay-max-val');\n\n    function applyFilters() {\n      cy.elements().removeClass('hidden');\n      const showPos = !(fPos && fPos.classList.contains('off'));\n      const showNeg = !(fNeg && fNeg.classList.contains('off'));\n      const groupVal = fGroup ? fGroup.value : '';\n      const delayOnly = fDelay ? fDelay.checked : false;\n\n      cy.edges().forEach(e => {\n        const signOk = e.data('sign') === '+' ? showPos : showNeg;\n        const groupOk = !groupVal || (e.source().data('parent') === groupVal && e.target().data('parent') === groupVal);\n        const delayOk = !delayOnly || e.data('delayYears') > 0;\n        if (!(signOk && groupOk && delayOk)) {\n            if (CLD_SAFE?.safeAddClass) {\n              CLD_SAFE.safeAddClass(e, 'hidden');\n            } else {\n              console.warn('CLD_SAFE.safeAddClass missing');\n              e?.classList?.add('hidden');\n            }\n        }\n      });\n\n      cy.nodes().forEach(n => {\n        if (groupVal && n.data('parent') !== groupVal && n.id() !== groupVal) {\n            if (CLD_SAFE?.safeAddClass) {\n              CLD_SAFE.safeAddClass(n, 'hidden');\n            } else {\n              console.warn('CLD_SAFE.safeAddClass missing');\n              n?.classList?.add('hidden');\n            }\n        }\n      });\n\n      window.__cldSafeFit(cy);\n    }\n\n    function bindOut(inp, out){\n      if (inp && out){\n        out.textContent = String(inp.value);\n        inp.addEventListener('input', () => { out.textContent = String(inp.value); });\n      }\n    }\n    bindOut(wMin, wMinOut);\n    bindOut(dMax, dMaxOut);\n    function applyEdgeFilters(){\n      cy.edges().removeClass('hidden');\n      const w = wMin ? Number(wMin.value) : 0;\n      const d = dMax ? Number(dMax.value) : 0;\n      cy.edges().forEach(e => {\n        if (e.data('weight') < w || e.data('delayYears') > d) {\n            if (CLD_SAFE?.safeAddClass) {\n              CLD_SAFE.safeAddClass(e, 'hidden');\n            } else {\n              console.warn('CLD_SAFE.safeAddClass missing');\n              e?.classList?.add('hidden');\n            }\n        }\n      });\n      window.__cldSafeFit(cy);\n    }\n    if (wMin) wMin.addEventListener('input', applyEdgeFilters, {passive:true});\n    if (dMax) dMax.addEventListener('input', applyEdgeFilters, {passive:true});\n\n    if (fPos) fPos.addEventListener('click', () => { fPos.classList.toggle('off'); applyFilters(); });\n    if (fNeg) fNeg.addEventListener('click', () => { fNeg.classList.toggle('off'); applyFilters(); });\n    if (fGroup) fGroup.addEventListener('change', applyFilters);\n    if (fDelay) fDelay.addEventListener('change', applyFilters);\n    applyFilters();\n    applyEdgeFilters();\n\n    if (qInput) {\n      qInput.addEventListener('input', () => {\n        cy.elements().removeClass('faded');\n        cy.nodes().removeClass('highlighted');\n        const val = qInput.value.trim();\n        if (val) {\n          let re;\n          try {\n            re = new RegExp(val, 'i');\n          } catch (err) {\n            return;\n          }\n          const nodesAll = cy.nodes();\n            if (CLD_SAFE?.safeAddClass) {\n              CLD_SAFE.safeAddClass(nodesAll, 'faded');\n            } else {\n              console.warn('CLD_SAFE.safeAddClass missing');\n              if (nodesAll?.forEach) {\n                nodesAll.forEach(el => el.classList?.add('faded'));\n              } else {\n                nodesAll?.classList?.add('faded');\n              }\n            }\n          const edgesAll = cy.edges();\n            if (CLD_SAFE?.safeAddClass) {\n              CLD_SAFE.safeAddClass(edgesAll, 'faded');\n            } else {\n              console.warn('CLD_SAFE.safeAddClass missing');\n              if (edgesAll?.forEach) {\n                edgesAll.forEach(el => el.classList?.add('faded'));\n              } else {\n                edgesAll?.classList?.add('faded');\n              }\n            }\n          const matches = cy.nodes().filter(n => re.test(n.data('label')));\n          matches.removeClass('faded');\n            if (CLD_SAFE?.safeAddClass) {\n              CLD_SAFE.safeAddClass(matches, 'highlighted');\n            } else {\n              console.warn('CLD_SAFE.safeAddClass missing');\n              if (matches?.forEach) {\n                matches.forEach(el => el.classList?.add('highlighted'));\n              } else {\n                matches?.classList?.add('highlighted');\n              }\n            }\n          matches.connectedEdges().removeClass('faded');\n        }\n      });\n    }\n\n    if (loopsBtn) loopsBtn.addEventListener('click', () => { populateLoops(); if (loopsPanel) loopsPanel.open = true; });\n\n    function populateLoops() {\n      if (!loopsList || !window.cydetectLoops) return;\n      loopsList.innerHTML = '';\n      const cycles = window.cydetectLoops(cy) || [];\n        cycles.forEach(cycle => {\n          const li = document.createElement('li');\n          const labels = (cycle.nodeIds || []).map(id => cy.getElementById(id).data('label') || id);\n          const negCount = (cycle.edgeIds || []).filter(id => cy.getElementById(id).data('sign') === '-').length;\n          const sign = negCount % 2 === 0 ? '+' : '-';\n          li.textContent = `${sign}: ${labels.join(' \\u2192 ')}`;\n          li.style.cursor = 'pointer';\n          li.addEventListener('click', () => {\n            cy.elements().removeClass('highlight');\n            const col = cy.collection();\n            (cycle.nodeIds || []).forEach(id => {\n              const n = cy.getElementById(id);\n                if (CLD_SAFE?.safeAddClass) {\n                  CLD_SAFE.safeAddClass(n, 'highlight');\n                } else {\n                  console.warn('CLD_SAFE.safeAddClass missing');\n                  n?.classList?.add('highlight');\n                }\n              col.merge(n);\n            });\n            (cycle.edgeIds || []).forEach(id => {\n              const e = cy.getElementById(id);\n                if (CLD_SAFE?.safeAddClass) {\n                  CLD_SAFE.safeAddClass(e, 'highlight');\n                } else {\n                  console.warn('CLD_SAFE.safeAddClass missing');\n                  e?.classList?.add('highlight');\n                }\n              col.merge(e);\n            });\n            cy.fit(col, 50);\n          });\n          loopsList.appendChild(li);\n        });\n    }\n\n    const importInput = document.getElementById('import-json');\n    if (importInput) {\n      importInput.addEventListener('change', e => {\n        const file = e.target.files[0];\n        if (!file) return;\n        const reader = new FileReader();\n        reader.onload = ev => {\n          try {\n            const data = JSON.parse(ev.target.result);\n            const groups = data.groups || [];\n            if (groupSelect) {\n              groupSelect.innerHTML = '<option value=\"\">\u0647\u0645\u0647 \u06AF\u0631\u0648\u0647\u200C\u0647\u0627</option>';\n              groups.forEach(g => {\n                const opt = document.createElement('option');\n                opt.value = g.id;\n                opt.textContent = g.id;\n                groupSelect.appendChild(opt);\n              });\n            }\n            const els = [];\n            groups.forEach(g => els.push({ data: { id: g.id, color: g.color, isGroup: true }, classes: 'compound group' }));\n            (data.nodes || []).forEach(n => els.push({ data: { id: n.id, label: n.label, parent: n.group, desc: n.desc, unit: n.unit } }));\n            (data.edges || []).forEach((e, idx) => els.push({\n              data: {\n                id: `e${idx}`,\n                source: e.source,\n                target: e.target,\n                label: e.label,\n                sign: e.sign,\n                weight: e.weight || 0,\n                delayYears: e.delayYears || 0\n              },\n              classes: e.sign === '-' ? 'neg' : 'pos'\n            }));\n            cy.elements().remove();\n            cy.add(els);\n            runLayout('elk');\n            updateSignFilter(); // \u0627\u06AF\u0631 \u062C\u0627\u06CC\u06CC \u062A\u0639\u0631\u06CC\u0641 \u0646\u0634\u062F\u0647\u060C \u0645\u06CC\u200C\u062A\u0648\u0627\u0646\u06CC\u062F \u0628\u0639\u062F\u0627\u064B \u062D\u0630\u0641/\u062C\u0627\u06CC\u06AF\u0632\u06CC\u0646 \u06A9\u0646\u06CC\u062F\n          } catch (err) {\n            console.error('Import JSON failed', err);\n          }\n        };\n        reader.readAsText(file);\n      });\n    }\n\n    const legend = document.getElementById('legend');\n    if (legend) {\n      const items = [\n        '<span class=\"badge pos\"><i class=\"dot\" style=\"background:var(--pos)\"></i>\u0645\u062B\u0628\u062A</span>',\n        '<span class=\"badge neg\"><i class=\"dot\" style=\"background:var(--neg)\"></i>\u0645\u0646\u0641\u06CC</span>',\n        '<span class=\"badge dashed\"><i class=\"dot\" style=\"border:2px dashed #cbd5e1\"></i>\u062A\u0627\u062E\u06CC\u0631\u062F\u0627\u0631/\u063A\u06CC\u0631\u0645\u0633\u062A\u0642\u06CC\u0645</span>'\n      ];\n      groups.forEach(g => items.push(`<span class=\"badge\" style=\"border-color:${g.color}\"><i class=\"dot\" style=\"background:${g.color}\"></i>${g.id}</span>`));\n      legend.innerHTML = items.join('');\n    }\n\n    const effInput = document.getElementById('p-eff');\n    const demInput = document.getElementById('p-dem');\n    const delayInput = document.getElementById('p-delay');\n    const runBtn = document.getElementById('btn-run');\n    const resetBtn = document.getElementById('btn-reset');\n    const exportBtn = document.getElementById('btn-export-csv');\n    const scNew = document.getElementById('sc-new');\n    const scSave = document.getElementById('sc-save');\n    const scLoad = document.getElementById('sc-load');\n    const scDelete = document.getElementById('sc-delete');\n    const scTable = document.getElementById('sc-table');\n    const sensParam = document.getElementById('sens-param');\n    const sensMin = document.getElementById('sens-min');\n    const sensMax = document.getElementById('sens-max');\n    const sensStep = document.getElementById('sens-step');\n    const sensRun = document.getElementById('sens-run');\n    const sensProgress = document.getElementById('sens-progress');\n    let selectedScenario = null;\n    let lastSensitivity = null;\n    const worker = new Worker('/assets/sim-worker.js');\n    worker.postMessage({ cmd: 'init' });\n    const effVal = document.getElementById('val-eff');\n    const demVal = document.getElementById('val-dem');\n    const delayVal = document.getElementById('val-delay');\n\n    function bindSlider(input, output) {\n      if (input && output) {\n        output.textContent = input.value;\n        input.addEventListener('input', () => {\n          output.textContent = input.value;\n        });\n      }\n    }\n    bindSlider(effInput, effVal);\n    bindSlider(demInput, demVal);\n    bindSlider(delayInput, delayVal);\n\n    const scTbody = scTable ? scTable.querySelector('tbody') : null;\n    function refreshScenarioTable() {\n      if (!scTbody) return;\n      scTbody.innerHTML = '';\n      const scs = getScenarios();\n      Object.entries(scs).forEach(([name, p]) => {\n        const tr = document.createElement('tr');\n        tr.innerHTML = `<td>${name}</td><td>${p.eff}</td><td>${p.dem}</td><td>${p.delay}</td>`;\n        tr.addEventListener('click', () => {\n          selectedScenario = name;\n          Array.from(scTbody.children).forEach(r => r.classList.remove('selected'));\n          CLD_SAFE?.safeAddClass(tr, 'selected');\n        });\n        scTbody.appendChild(tr);\n      });\n    }\n    refreshScenarioTable();\n\n    if (scNew) scNew.addEventListener('click', () => {\n      selectedScenario = null;\n      resetScenario();\n      if (scTbody) Array.from(scTbody.children).forEach(r => r.classList.remove('selected'));\n    });\n\n    if (scSave) scSave.addEventListener('click', () => {\n      const name = prompt('Scenario name', selectedScenario || '');\n      if (!name) return;\n      const scs = getScenarios();\n      scs[name] = {\n        eff: parseFloat(effInput.value),\n        dem: parseFloat(demInput.value),\n        delay: parseInt(delayInput.value)\n      };\n      setScenarios(scs);\n      selectedScenario = name;\n      refreshScenarioTable();\n    });\n\n    if (scLoad) scLoad.addEventListener('click', () => {\n      const scs = getScenarios();\n      if (!selectedScenario || !scs[selectedScenario]) return;\n      const p = scs[selectedScenario];\n      effInput.value = p.eff;\n      demInput.value = p.dem;\n      delayInput.value = p.delay;\n      effInput.dispatchEvent(new Event('input'));\n      demInput.dispatchEvent(new Event('input'));\n      delayInput.dispatchEvent(new Event('input'));\n      runBtn.click();\n    });\n\n    if (scDelete) scDelete.addEventListener('click', () => {\n      const scs = getScenarios();\n      if (selectedScenario && scs[selectedScenario]) {\n        delete scs[selectedScenario];\n        setScenarios(scs);\n        selectedScenario = null;\n        refreshScenarioTable();\n      }\n    });\n\n    if (exportBtn) exportBtn.addEventListener('click', () => {\n      if (!simChart) return;\n      const years = simChart.data.labels || [];\n      const ds = simChart.data.datasets || [];\n      let csv = 'year,baseline,scenario\\n';\n      for (let i = 0; i < years.length; i++) {\n        const row = [years[i]];\n        row.push(ds[0] && ds[0].data ? ds[0].data[i] : '');\n        row.push(ds[1] && ds[1].data ? ds[1].data[i] : '');\n        csv += row.join(',') + '\\n';\n      }\n      const blob = new Blob([csv], { type: 'text/csv' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'results.csv';\n      a.click();\n      URL.revokeObjectURL(url);\n    });\n\n    worker.onmessage = e => {\n      if (e.data.type === 'progress') {\n        if (sensProgress) sensProgress.textContent = Math.round(e.data.value * 100) + '%';\n      } else if (e.data.type === 'complete') {\n        if (sensProgress) sensProgress.textContent = '';\n        const { years, p10, p50, p90 } = e.data;\n        while (simChart.data.datasets.length > 1) simChart.data.datasets.pop();\n        simChart.data.labels = years;\n        simChart.data.datasets.push({\n          label: 'p90',\n          data: p90,\n          borderColor: 'rgba(0,0,0,0)',\n          fill: false\n        });\n        simChart.data.datasets.push({\n          label: 'p10',\n          data: p10,\n          borderColor: 'rgba(0,0,0,0)',\n          backgroundColor: 'rgba(99,102,241,0.2)',\n          fill: '-1'\n        });\n        simChart.data.datasets.push({\n          label: 'p50',\n          data: p50,\n          borderColor: '#f97316',\n          backgroundColor: 'rgba(249,115,22,0.1)',\n          fill: false\n        });\n        simChart.update();\n        lastSensitivity = { years, p10, p50, p90 };\n      }\n    };\n\n    if (sensRun) sensRun.addEventListener('click', (e) => {\n      e.preventDefault();\n      const param = sensParam.value;\n      const range = { min: parseFloat(sensMin.value), max: parseFloat(sensMax.value), step: parseFloat(sensStep.value) };\n      const base = {\n        eff: parseFloat(effInput.value),\n        dem: parseFloat(demInput.value),\n        delay: parseInt(delayInput.value)\n      };\n      if (sensProgress) sensProgress.textContent = '0%';\n      worker.postMessage({ cmd: 'runBatch', param, range, base });\n    });\n\n    const tabParam = document.getElementById('tab-param');\n    const tabFormula = document.getElementById('tab-formula');\n    const panelParam = document.getElementById('panel-param');\n    const panelFormula = document.getElementById('panel-formula');\n    if (tabParam && tabFormula && panelParam && panelFormula) {\n      tabParam.addEventListener('click', () => {\n        CLD_SAFE?.safeAddClass(tabParam, 'active');\n        tabFormula.classList.remove('active');\n        panelParam.style.display = 'block';\n        panelFormula.style.display = 'none';\n      });\n      tabFormula.addEventListener('click', () => {\n        CLD_SAFE?.safeAddClass(tabFormula, 'active');\n        tabParam.classList.remove('active');\n        panelParam.style.display = 'none';\n        panelFormula.style.display = 'block';\n      });\n    }\n\n    const formulaNode = document.getElementById('formula-node');\n    const formulaExpr = document.getElementById('formula-expr');\n    const formulaMsg = document.getElementById('formula-msg');\n    if (formulaNode && formulaExpr) {\n      (modelData.nodes || []).forEach(n => {\n        const opt = document.createElement('option');\n        opt.value = n.id;\n        opt.textContent = n.label || n.id;\n        formulaNode.appendChild(opt);\n      });\n      formulaNode.addEventListener('change', () => {\n        const n = modelData.nodes.find(nd => nd.id === formulaNode.value);\n        formulaExpr.value = n && n.expr ? n.expr : '';\n        if (formulaMsg) formulaMsg.textContent = '';\n      });\n      formulaNode.dispatchEvent(new Event('change'));\n    }\n\n    const validateBtn = document.getElementById('btn-validate');\n    if (validateBtn) validateBtn.addEventListener('click', () => {\n      try {\n        new Parser().parse(formulaExpr.value);\n        if (formulaMsg) formulaMsg.textContent = '\u2705';\n      } catch (err) {\n        if (formulaMsg) formulaMsg.textContent = err.message;\n      }\n    });\n\n    const saveBtn = document.getElementById('btn-save');\n    if (saveBtn) saveBtn.addEventListener('click', function(){\n      try{\n        new Parser().parse(formulaExpr.value);\n        var n = modelData.nodes.find(function(nd){ return nd.id === formulaNode.value; });\n        if (n) n.expr = formulaExpr.value;\n        parseModel(modelData);\n        markModelReady();\n        if (__chartReady) initBaselineIfPossible();\n        whenModelReady(function(){\n          try{\n            var baseRes = simulate({ eff:0, dem:0, delay:0, years:30 });\n            baseSim = { years: baseRes.years, baseline: baseRes.series };\n            updateChartFromSim(baseSim);\n            if (formulaMsg) formulaMsg.textContent = 'Saved';\n          }catch(e){ if (formulaMsg) formulaMsg.textContent = e.message; }\n        });\n      }catch(err){ if (formulaMsg) formulaMsg.textContent = err.message; }\n    });\n\n    if (runBtn) {\n      runBtn.addEventListener('click', function(){\n        whenModelReady(function(){\n          try{\n            var params = {\n              eff: parseFloat(effInput.value),\n              dem: parseFloat(demInput.value),\n              delay: parseInt(delayInput.value,10),\n              years: baseSim && baseSim.years ? baseSim.years.length - 1 : 30\n            };\n            var res = simulate(params);\n            updateChartFromSim({ years: res.years, baseline: baseSim ? baseSim.baseline : [], scenario: res.series });\n            if (window.__wesh_sim_chart) window.__wesh_sim_chart.update();\n          }catch(e){ console.error('simulate failed', e); }\n        });\n      });\n    }\n\n    // ===== Layout Direction Control + UI State (non-module, CSP-safe) =====\n    (function () {\n      var LS_KEY = 'waterCLD.ui.v1';\n\n      // ---------- helpers: LocalStorage\n      function loadState() {\n        try { return JSON.parse(localStorage.getItem(LS_KEY) || '{}'); }\n        catch(e){ return {}; }\n      }\n      function saveState(patch) {\n        var s = loadState();\n        for (var k in patch) s[k] = patch[k];\n        localStorage.setItem(LS_KEY, JSON.stringify(s));\n      }\n\n      // ---------- inject layout-dir control next to #layout\n      function ensureLayoutDirControl() {\n        var layoutSel = document.getElementById('layout');\n        if (!layoutSel) return null;\n        var exists = document.getElementById('layout-dir');\n        if (exists) return exists;\n\n        var dirSel = document.createElement('select');\n        dirSel.id = 'layout-dir';\n        dirSel.setAttribute('aria-label','\u062C\u0647\u062A \u0686\u06CC\u062F\u0645\u0627\u0646');\n\n        var optLR = document.createElement('option');\n        optLR.value = 'LR'; optLR.textContent = '\u0686\u067E\u2192\u0631\u0627\u0633\u062A';\n        var optTB = document.createElement('option');\n        optTB.value = 'TB'; optTB.textContent = '\u0628\u0627\u0644\u0627\u2192\u067E\u0627\u06CC\u06CC\u0646';\n        dirSel.appendChild(optLR); dirSel.appendChild(optTB);\n\n        // \u0642\u0631\u0627\u0631 \u062F\u0627\u062F\u0646 \u0628\u0644\u0627\u0641\u0627\u0635\u0644\u0647 \u0628\u0639\u062F \u0627\u0632 #layout\n        layoutSel.insertAdjacentElement('afterend', dirSel);\n\n        // \u0631\u0648\u06CC\u062F\u0627\u062F \u062A\u063A\u06CC\u06CC\u0631 \u062C\u0647\u062A\n        dirSel.addEventListener('change', function () {\n          var algo = (document.getElementById('layout')||{}).value || 'elk';\n          saveState({ dir: dirSel.value, layout: algo });\n          if (window.runLayout) window.runLayout(algo, dirSel.value);\n        });\n\n        // \u062A\u063A\u06CC\u06CC\u0631 \u0627\u0644\u06AF\u0648\u0631\u06CC\u062A\u0645 \u0646\u06CC\u0632 \u062C\u0647\u062A \u0631\u0627 \u062D\u0641\u0638 \u06A9\u0646\u062F\n        layoutSel.addEventListener('change', function () {\n          var algo = layoutSel.value;\n          var dir  = (document.getElementById('layout-dir')||{}).value || 'LR';\n          saveState({ dir: dir, layout: algo });\n          if (window.runLayout) window.runLayout(algo, dir);\n        });\n\n        return dirSel;\n      }\n\n      function loadScriptOnce(src, id){\n        return new Promise(function(res, rej){\n          if (document.getElementById(id) || document.querySelector('script[src=\"'+src+'\"]')) return res();\n          var s = document.createElement('script');\n          s.id = id; s.src = src; s.defer = true;\n          s.onload = res; s.onerror = rej;\n          document.head.appendChild(s);\n        });\n      }\n      async function ensureLayoutLib(name){\n        if (name === 'elk'){\n          await loadScriptOnce('/assets/vendor/elk.bundled.js','elk-lib');\n          await loadScriptOnce('/assets/vendor/cytoscape-elk.js','cy-elk');\n        } else {\n          await loadScriptOnce('/assets/vendor/dagre.min.js','dagre-lib');\n          await loadScriptOnce('/assets/vendor/cytoscape-dagre.js','cy-dagre');\n        }\n      }\n\n      // ---------- runLayout with generous spacing (ELK/Dagre) ----------\n      (function(){\n        var runLayoutOrig = window.runLayout;\n\n        window.runLayout = async function(name, dir){\n          var cy = getCy(); if(!cy) return;\n          name = (name||'elk').toLowerCase();\n          dir  = dir || (document.getElementById('layout-dir') ? document.getElementById('layout-dir').value : 'LR');\n\n          await ensureLayoutLib(name);\n\n          var opts;\n          if (name === 'elk') {\n            var elkDir = (dir === 'TB' ? 'DOWN' : 'RIGHT');\n            opts = {\n              name: 'elk',\n              nodeDimensionsIncludeLabels: true,\n              fit: false,\n              animate: 'end',\n              animationDuration: 300,\n              elk: {\n                algorithm: 'layered',\n                'elk.direction': elkDir,\n                'elk.layered.spacing.nodeNodeBetweenLayers': 140,\n                'elk.spacing.nodeNode': 100,\n                'elk.layered.considerModelOrder.strategy': 'NODES_AND_EDGES',\n                'elk.edgeRouting': 'POLYLINE'\n              }\n            };\n          } else {\n            var rankDir = (dir === 'TB' ? 'TB' : 'LR');\n            opts = {\n              name: 'dagre',\n              rankDir: rankDir,\n              nodeSep: 120,\n              rankSep: 140,\n              fit: false,\n              animate: 'end',\n              animationDuration: 300\n            };\n          }\n\n          cy.layout(opts).run();\n\n          cy.once('layoutstop', function(){\n            if (window.measureAndResizeNodes) window.measureAndResizeNodes(cy, {maxWidth: 240, padding: 16});\n            requestAnimationFrame(() => window.__cldSafeFit(cy));\n          });\n        };\n      })();\n\n      // ---------- persist & restore UI controls + cy view\n      function bindPersistence() {\n        var st = loadState();\n\n        // controls\n        var layoutSel = document.getElementById('layout');\n        var dirSel    = document.getElementById('layout-dir') || ensureLayoutDirControl();\n        var wMin      = document.getElementById('flt-weight-min');\n        var dMax      = document.getElementById('flt-delay-max');\n        var q         = document.getElementById('q');\n        var fGroup    = document.getElementById('f-group');\n        var posCbs    = document.querySelectorAll('input[type=checkbox].pos');\n        var negCbs    = document.querySelectorAll('input[type=checkbox].neg');\n        var posBtn    = document.getElementById('f-pos');\n        var negBtn    = document.getElementById('f-neg');\n\n        // --- restore\n        if (st.layout && layoutSel) layoutSel.value = st.layout;\n        if (st.dir    && dirSel)    dirSel.value    = st.dir;\n\n        if (st.flt) {\n          if (wMin && typeof st.flt.weightMin !== 'undefined') wMin.value = st.flt.weightMin;\n          if (dMax && typeof st.flt.delayMax  !== 'undefined') dMax.value = st.flt.delayMax;\n          if (typeof st.flt.pos === 'boolean') {\n            if (posCbs.length) posCbs.forEach(function(cb){ cb.checked = st.flt.pos; });\n            if (posBtn) posBtn.classList.toggle('off', !st.flt.pos);\n          }\n          if (typeof st.flt.neg === 'boolean') {\n            if (negCbs.length) negCbs.forEach(function(cb){ cb.checked = st.flt.neg; });\n            if (negBtn) negBtn.classList.toggle('off', !st.flt.neg);\n          }\n          if (fGroup && typeof st.flt.group !== 'undefined') fGroup.value = st.flt.group;\n          if (posBtn || negBtn) applyFilters();\n        }\n        if (q && typeof st.q === 'string') q.value = st.q;\n\n        // trigger existing handlers (\u0627\u06AF\u0631 \u062F\u0631 \u06A9\u062F \u0627\u0635\u0644\u06CC listen \u0634\u062F\u0647)\n        ['change','input'].forEach(function(ev){\n          if (wMin)  wMin.dispatchEvent(new Event(ev));\n          if (dMax)  dMax.dispatchEvent(new Event(ev));\n          if (q)     q.dispatchEvent(new Event(ev));\n          if (fGroup)fGroup.dispatchEvent(new Event(ev));\n          if (layoutSel) layoutSel.dispatchEvent(new Event('change'));\n          if (dirSel)    dirSel.dispatchEvent(new Event('change'));\n          posCbs.forEach(function(cb){ cb.dispatchEvent(new Event('change')); });\n          negCbs.forEach(function(cb){ cb.dispatchEvent(new Event('change')); });\n        });\n\n        // --- save on changes\n        function syncFilters() {\n          saveState({\n            flt: {\n              weightMin: wMin ? Number(wMin.value) : undefined,\n              delayMax:  dMax ? Number(dMax.value)  : undefined,\n              pos:  posCbs.length ? posCbs[0].checked : !(posBtn && posBtn.classList.contains('off')),\n              neg:  negCbs.length ? negCbs[0].checked : !(negBtn && negBtn.classList.contains('off')),\n              group: fGroup ? fGroup.value : ''\n            }\n          });\n        }\n        if (wMin)  wMin.addEventListener('input', syncFilters);\n        if (dMax)  dMax.addEventListener('input', syncFilters);\n        posCbs.forEach(function(cb){ cb.addEventListener('change', syncFilters); });\n        negCbs.forEach(function(cb){ cb.addEventListener('change', syncFilters); });\n        if (posBtn) posBtn.addEventListener('click', syncFilters);\n        if (negBtn) negBtn.addEventListener('click', syncFilters);\n        if (fGroup) fGroup.addEventListener('change', syncFilters);\n        if (q) q.addEventListener('input', function(){ saveState({ q: q.value }); });\n\n        // persist layout/dir (\u062F\u0631 \u0635\u0648\u0631\u062A \u062A\u063A\u06CC\u06CC\u0631 \u0627\u0632 \u0628\u06CC\u0631\u0648\u0646)\n        if (layoutSel) layoutSel.addEventListener('change', function(){\n          saveState({ layout: layoutSel.value });\n        });\n        if (dirSel) dirSel.addEventListener('change', function(){\n          saveState({ dir: dirSel.value });\n        });\n\n          // --- persist cy view (zoom/pan)\n          window.__WATER_CLD_READY__.then(function(){\n            var saveViewThrottled;\n            function commitView() {\n              var z = cy.zoom();\n              var p = cy.pan();\n              saveState({ zoom: z, pan: {x:p.x, y:p.y} });\n              saveViewThrottled = null;\n            }\n            function scheduleSave() {\n              if (saveViewThrottled) return;\n              saveViewThrottled = setTimeout(commitView, 200);\n            }\n            cy.on('zoom pan', scheduleSave);\n          });\n      }\n\n      // init after DOM & cy\n      if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', function(){\n          ensureLayoutDirControl();\n          bindPersistence();\n        });\n      } else {\n        ensureLayoutDirControl();\n        bindPersistence();\n      }\n    })();\n\n    const resetBtnEl = resetBtn;\n    if (resetBtnEl) {\n      resetBtnEl.addEventListener('click', function(){\n        whenModelReady(function(){\n          try {\n            resetScenario();\n            if (window.__wesh_sim_chart) window.__wesh_sim_chart.update();\n          } catch(e){ console.error(e); }\n        });\n      });\n    }\n  });\n\n  (function(){\n    function initSwitcher(){\n      var sw = document.getElementById('model-switch');\n      if (!sw) return;\n      try {\n        var last = localStorage.getItem('waterCLD.activeModel');\n        if (last) sw.value = last;\n      } catch(e){}\n      sw.addEventListener('change', function(){\n        window.loadModelFromUrl(sw.value);\n      });\n      if (sw.value) window.loadModelFromUrl(sw.value);\n    }\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', initSwitcher);\n    } else {\n      initSwitcher();\n    }\n  })();\n\n  window.CLDSim = { simulate, runLayout: function(name, dir){ return window.runLayout(name, dir); }, resetScenario, parseModel, simulateStep };\n})();\n", "// docs/assets/js/watercld.entry.js\n\n// 1) \u06AF\u0627\u0631\u062F\u0647\u0627\u06CC \u0622\u0645\u0627\u062F\u0647\u200C\u0633\u0627\u0632\u06CC \u0648 \u0627\u06CC\u0648\u0646\u062F\u0647\u0627 (\u0645\u0648\u062C\u0648\u062F\u0646\u062F)\nimport '../water-cld.runtime-guards.js';\nimport '../water-cld.cy-alias.js';\n\n// 2) \u0645\u0646\u0637\u0642 \u0627\u0635\u0644\u06CC \u0646\u0645\u0648\u062F\u0627\u0631 (\u0641\u0627\u06CC\u0644 \u0645\u0648\u062C\u0648\u062F \u062F\u0631 \u0647\u0645\u06CC\u0646 \u067E\u0648\u0634\u0647\u200C\u06CC assets)\nimport '../water-cld.js';\n\n// 3) pre-shim: \u0627\u06AF\u0631 \u0628\u0647\u200C\u062E\u0627\u0637\u0631 id=\"cy\" \u0631\u0648\u06CC window \u067E\u0631\u0627\u067E\u0631\u062A\u06CC DOM \u0633\u0627\u062E\u062A\u0647 \u0634\u062F\u0647\u060C \u062E\u0646\u062B\u06CC\u200C\u0627\u0634 \u06A9\u0646\ntry { if (window.cy && window.cy.tagName) window.cy = undefined; } catch (_) {}\n\n// 4) \u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC \u0627\u06CC\u0645\u0646: \u0627\u06AF\u0631 \u0627\u06CC\u0646\u0633\u062A\u0646\u0633 Cytoscape \u0633\u0627\u062E\u062A\u0647 \u0634\u062F\u060C \u062F\u0631 \u0641\u0636\u0627\u06CC\u200C\u0646\u0627\u0645 \u0627\u0645\u0646 \u0630\u062E\u06CC\u0631\u0647 \u0648 \u0631\u0648\u06CC\u062F\u0627\u062F \u0628\u062F\u0647\n(function syncCy(){\n  const cy = window.CLD_SAFE?.cy || window.cy;\n  if (cy && typeof cy.nodes === 'function') {\n    window.CLD_SAFE = window.CLD_SAFE || {};\n    window.CLD_SAFE.cy = cy;\n    document.dispatchEvent(new CustomEvent('cld:ready', { detail: { cy } }));\n    return; // \u0622\u0645\u0627\u062F\u0647 \u0634\u062F\n  }\n  requestAnimationFrame(syncCy);\n})();\n\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA,OAAC,WAAU;AACT,YAAI,OAAO,iBAAkB;AAAQ,eAAO,mBAAiB;AAG7D,YAAI,CAAC,OAAO,WAAW;AACrB,iBAAO,gBAAgB;AACvB,iBAAO,YAAY,SAAS,KAAI;AAC9B,kBAAM,SAAS,wBAAC,OAAO;AAAE,kBAAI,MAAM,OAAO,QAAM,YAAY;AAAE,oBAAG;AAAE,sBAAI,EAAE;AAAA,gBAAG,SAAO,GAAE;AAAA,gBAAC;AAAA,cAAC;AAAA,YAAE,GAA1E;AACf,kBAAM,KAAK,MAAM;AACjB,gBAAI,MAAM,OAAO,GAAG,OAAK,YAAY;AAAE,qBAAO,EAAE;AAAG;AAAA,YAAQ;AAC3D,gBAAI,CAAC,OAAO,eAAc;AACxB,qBAAO,gBAAgB;AACvB,uBAAS,iBAAiB,YAAY,CAAC,MAAK,OAAQ,KAAK,EAAE,UAAU,EAAE,OAAO,MAAO,MAAM,CAAC,GAAG,EAAE,MAAK,KAAK,CAAC;AAC5G,kBAAI,OAAO,eAAgB,QAAO,eAAe,MAAK,OAAO,MAAM,CAAC,CAAC;AACrE,kBAAI,SAAS,eAAe,UAAW,YAAW,MAAK,OAAO,MAAM,CAAC,GAAG,CAAC;AAAA,kBACpE,UAAS,iBAAiB,oBAAoB,MAAK,OAAO,MAAM,CAAC,GAAG,EAAE,MAAK,KAAK,CAAC;AAAA,YACxF;AAAA,UACF;AAAA,QACF;AAGA,YAAI,CAAC,OAAO,eAAe;AACzB,iBAAO,gBAAgB,SAAS,IAAI,KAAG,IAAG;AAAE,gBAAI,IAAE;AAAG,mBAAO,WAAU;AAAE,oBAAM,IAAE;AAAW,2BAAa,CAAC;AAAG,kBAAE,WAAW,MAAI,GAAG,MAAM,MAAK,CAAC,GAAG,EAAE;AAAA,YAAG;AAAA,UAAG;AAAA,QACzJ;AAGA,YAAI,CAAC,OAAO,cAAc;AACxB,iBAAO,eAAe,SAAS,IAAG;AAAE,gBAAG;AAAE,oBAAM,MAAM,yBAAI;AAAY,kBAAI,CAAC,OAAO,IAAI,WAAS,EAAG;AAAQ,iBAAG,IAAI,KAAK,EAAE;AAAA,YAAE,SAAO,GAAE;AAAA,YAAC;AAAA,UAAE;AAAA,QACvI;AAAA,MACF,GAAG;AAAA;AAAA;;;AC7BH;AAAA;AAAA,OAAC,WAAU;AACT,YAAI,OAAO,aAAc;AAAQ,eAAO,eAAe;AAEvD,iBAAS,SAAQ;AACf,cAAG;AACD,mBAAO,eAAe,QAAQ,KAAK;AAAA,cACjC,cAAc;AAAA,cACd,KAAK,kCAAU;AAAE,uBAAO,MAAM;AAAA,cAAG,GAA5B;AAAA;AAAA;AAAA,cAGL,KAAK,gCAAS,GAAE;AACd,oBAAG;AACD,yBAAO,WAAW,OAAO,YAAY,CAAC;AACtC,yBAAO,SAAS,KAAK;AACrB,yBAAO,OAAO;AACd,yBAAO,SAAS;AAChB,sBAAI,CAAC,OAAO,OAAQ,QAAO,KAAK;AAChC,2BAAS,cAAc,IAAI,YAAY,YAAY,EAAE,QAAO,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;AACxE,2BAAS,cAAc,IAAI,YAAY,aAAa,EAAE,QAAO,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;AAAA,gBAC3E,SAAO,GAAE;AAAA,gBAAC;AAAA,cAAC,GATR;AAAA,YAUP,CAAC;AAAA,UACH,SAAO,GAAE;AAAE,mBAAO,IAAI,MAAM;AAAA,UAAG;AAAA,QACjC;AAnBS;AAqBT,eAAO;AACP,iBAAS,iBAAiB,YAAY,MAAM;AAC5C,iBAAS,iBAAiB,aAAa,MAAM;AAG7C,mBAAW,WAAU;AACnB,cAAG;AACD,kBAAM,IAAI,MAAM;AAChB,gBAAI,KAAK,OAAO,EAAE,QAAQ,YAAY;AACpC,uBAAS,cAAc,IAAI,YAAY,YAAY,EAAE,QAAO,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;AACxE,uBAAS,cAAc,IAAI,YAAY,aAAa,EAAE,QAAO,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;AAAA,YAC3E;AAAA,UACF,SAAO,GAAE;AAAA,UAAC;AAAA,QACZ,GAAG,CAAC;AAAA,MACN,GAAG;AAAA;AAAA;;;ACtCH;AAAA;AAAA,aAAO,sBAAsB,IAAI,QAAQ,SAAS,SAAQ;AAAE,eAAO,wBAAwB;AAAA,MAAS,CAAC;AACrG,UAAMA,SAAQ,6BAAM,OAAO,YAAY,OAAO,SAAS,IAAzC;AAEd,aAAO,gBAAgB,OAAO,iBAAiB;AAC/C,aAAO,YAAY,OAAO,aAAa,SAAU,KAAK;AAEpD,cAAM,KAAKA,OAAM;AACjB,YAAI,MAAM,OAAO,GAAG,OAAO,YAAY;AAAE,cAAI;AAAE,gBAAI,EAAE;AAAA,UAAG,SAAS,GAAG;AAAA,UAAC;AAAE;AAAA,QAAQ;AAG/E,YAAI,CAAC,OAAO,eAAe;AACzB,iBAAO,gBAAgB;AACvB,mBAAS,iBAAiB,YAAY,OAAK;AAZ/C;AAaM,kBAAM,MAAI,OAAE,WAAF,mBAAU,OAAMA,OAAM;AAChC,gBAAI,KAAK,OAAO,QAAQ,WAAY,KAAI;AAAE,kBAAI,CAAC;AAAA,YAAG,SAASC,IAAG;AAAA,YAAC;AAAA,UACjE,GAAG,EAAE,MAAM,KAAK,CAAC;AACjB,cAAI,OAAO,gBAAgB;AACzB,mBAAO,eAAe,MAAM;AAC1B,oBAAM,IAAID,OAAM;AAChB,kBAAI,KAAK,OAAO,QAAQ,WAAY,KAAI;AAAE,oBAAI,CAAC;AAAA,cAAG,SAAS,GAAG;AAAA,cAAC;AAAA,YACjE,CAAC;AAAA,UACH,OAAO;AACL,qBAAS,iBAAiB,oBAAoB,MAAM;AAClD,oBAAM,IAAIA,OAAM;AAChB,kBAAI,KAAK,OAAO,QAAQ,WAAY,KAAI;AAAE,oBAAI,CAAC;AAAA,cAAG,SAAS,GAAG;AAAA,cAAC;AAAA,YACjE,GAAG,EAAE,MAAM,KAAK,CAAC;AAAA,UACnB;AAAA,QACF;AAAA,MACF;AAGA,aAAO,gBAAgB,OAAO,iBAAiB,SAAU,IAAI,KAAK,IAAI;AACpE,YAAI,IAAI;AAAG,eAAO,IAAI,MAAM;AAAE,uBAAa,CAAC;AAAG,cAAI,WAAW,MAAM,GAAG,GAAG,CAAC,GAAG,EAAE;AAAA,QAAG;AAAA,MACrF;AAGA,aAAO,eAAe,OAAO,gBAAgB,SAAU,IAAI;AACzD,YAAI,CAAC,MAAM,GAAG,SAAS,EAAE,WAAW,EAAG;AACvC,YAAI;AAAE,aAAG,IAAI,GAAG,SAAS,GAAG,EAAE;AAAA,QAAG,SAAS,GAAG;AAAA,QAAC;AAAA,MAChD;AAGA,OAAC,WAAU;AACT,YAAI,CAAC,OAAO,eAAe;AAGzB,cAASE,WAAT,WAAkB;AAChB,gBAAI,OAAO,QAAQ,OAAO,OAAO,KAAK,eAAe,YAAY;AAC/D,qBAAO,OAAO;AAAA,YAChB;AACA,kBAAM,KAAK,SAAS,eAAe,IAAI;AACvC,gBAAI,CAAC,IAAI;AAAE,sBAAQ,KAAK,wBAAwB;AAAG,qBAAO;AAAA,YAAM;AAChE,gBAAI,CAAC,OAAO,WAAW;AAAE,sBAAQ,KAAK,iCAAiC;AAAG,qBAAO;AAAA,YAAM;AAEvF,gBAAI;AACF,kBAAI,OAAO,MAAM,OAAO,GAAG,SAAS;AAAE,uBAAO,SAAS,OAAO;AAAI,uBAAO,KAAK;AAAA,cAAW;AAAA,YAC1F,SAAQ,GAAE;AAAA,YAAC;AAEX,kBAAM,KAAK,UAAU,EAAE,WAAW,IAAI,UAAU,CAAC,EAAE,CAAC;AAEpD,mBAAO,OAAS;AAChB,mBAAO,SAAS;AAChB,mBAAO,WAAW,OAAO,YAAY,CAAC;AACtC,mBAAO,SAAS,KAAK;AACrB,gBAAI,CAAC,OAAO,OAAQ,QAAO,KAAK;AAEhC,qBAAS,cAAc,IAAI,YAAY,YAAY,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC;AACtE,qBAAS,cAAc,IAAI,YAAY,aAAa,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC;AACvE,oBAAQ,IAAI,uBAAuB,IAAI;AACvC,mBAAO;AAAA,UACT;AAxBS,wBAAAA;AAAA,iBAAAA,UAAA;AAFT,iBAAO,gBAAgB;AA4BvB,cAAI,SAAS,eAAe,WAAW;AACrC,qBAAS,iBAAiB,oBAAoBA,UAAS,EAAE,MAAK,KAAK,CAAC;AAAA,UACtE,OAAO;AACL,YAAAA,SAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF,GAAG;AAQH,eAAS,WAAU;AACjB,cAAM,IAAK,OAAO,YAAY,OAAO,SAAS,MAAO,OAAO,QAAQ,OAAO,UAAU,OAAO,MAAM;AAClG,eAAQ,KAAK,OAAO,EAAE,eAAe,aAAc,IAAI;AAAA,MACzD;AAHS;AAMT,eAAS,cAAc,OAAM;AA5F7B;AA6FE,cAAM,IAAI,SAAS,CAAC;AACpB,cAAM,QAAQ,MAAM,QAAQ,EAAE,KAAK,IAAI,EAAE,QAAQ,CAAC;AAClD,cAAM,QAAQ,MAAM,QAAQ,EAAE,KAAK,IAAI,EAAE,QAAQ,CAAC;AAClD,cAAM,OAAQ,EAAE,QAAQ,CAAC;AACzB,cAAM,MAAS,KAAK,uBAAuB,MAAO,KAAK,cAAc;AAErE,cAAM,YAAY,oBAAI,IAAI;AAC1B,cAAM,UAAY,oBAAI,IAAI;AAC1B,cAAM,aAAa,CAAC;AACpB,mBAAW,KAAK,OAAM;AACpB,gBAAM,KAAK,QAAO,uBAAG,OAAM,EAAE,EAAE,KAAK;AACpC,cAAI,CAAC,MAAM,UAAU,IAAI,EAAE,EAAG;AAC9B,oBAAU,IAAI,EAAE;AAAG,kBAAQ,IAAI,EAAE;AACjC,qBAAW,KAAK,EAAE,MAAK,EAAE,IAAI,QAAQ,4BAAG,UAAH,YAAY,IAAK,QAAO,uBAAG,UAAS,GAAG,GAAG,UAAS,uBAAG,YAAS,GAAI,CAAC;AAAA,QAC3G;AAEA,cAAM,YAAY,oBAAI,IAAI;AAC1B,cAAM,aAAa,CAAC;AACpB,mBAAW,KAAK,OAAM;AACpB,cAAI,IAAI,QAAO,uBAAG,WAAU,EAAE,EAAE,KAAK;AACrC,cAAI,IAAI,QAAO,uBAAG,WAAU,EAAE,EAAE,KAAK;AACrC,cAAI,KAAI;AAAE,gBAAI,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC;AAAG,gBAAI,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC;AAAA,UAAG;AACpE,cAAI,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,CAAC,EAAG;AACpD,gBAAM,KAAK,uBAAG,cAAa,QAAO,uBAAG,cAAa,MAAO,EAAE,YAChD,uBAAG,OAAK,uBAAG,SAAQ;AAC9B,gBAAM,MAAM,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC;AAC3B,cAAI,UAAU,IAAI,GAAG,EAAG;AACxB,oBAAU,IAAI,GAAG;AACjB,qBAAW,KAAK,EAAE,MAAK,EAAE,KAAK,uBAAG,OAAM,KAAM,QAAO,GAAG,QAAO,GAAG,UAAS,GAAG,QAAQ,EAAC,uBAAG,WAAQ,EAAG,GAAG,UAAS,uBAAG,YAAS,GAAI,CAAC;AAAA,QACnI;AACA,eAAO,EAAE,OAAO,YAAY,OAAO,YAAY,KAAK;AAAA,MACtD;AAhCS;AAkCT,eAAS,YAAY,KAAI;AACvB,cAAM,IAAI,SAAS;AACnB,YAAI,KAAK,OAAO,QAAQ,YAAW;AAAE,cAAG;AAAE,gBAAI,CAAC;AAAA,UAAG,SAAO,GAAE;AAAA,UAAE;AAAE;AAAA,QAAQ;AACvE,iBAAS,iBAAiB,YAAY,CAAC,OAAK;AAC1C,gBAAM,KAAM,MAAM,GAAG,UAAU,GAAG,OAAO,MAAO,SAAS;AACzD,cAAI,MAAM,OAAO,QAAQ,WAAY,KAAG;AAAE,gBAAI,EAAE;AAAA,UAAG,SAAO,GAAE;AAAA,UAAE;AAAA,QAChE,GAAG,EAAE,MAAK,KAAK,CAAC;AAAA,MAClB;AAPS;AAST,eAAS,aAAa,IAAG;AAvIzB;AAwIE,cAAM,QAAQ,iBAAAF,OAAM,MAAN,mBAAS,UAAT,mBAAgB,SAAhB,YAAyB,EAAE,aAAa,oBAAI,IAAI,GAAG,OAAO,oBAAI,IAAI,GAAG,OAAO,oBAAI,IAAI,EAAE;AACpG,cAAM,MAAM,KAAK,uBAAuB,MAAM,KAAK,cAAc,oBAAI,IAAI;AACzE,gBAAQ,IAAI,IAAI,EAAE,KAAK,CAAC,GAAG,IAAI,SAAS,GAAE;AAAE,iBAAO;AAAA,QAAG,CAAC,EAAE,OAAO,OAAO;AAAA,MACzE;AAJS;AAMT,eAAS,iBAAiB,IAAG;AA7I7B;AA8IE,cAAM,QAAQ,iBAAAA,OAAM,MAAN,mBAAS,UAAT,mBAAgB,SAAhB,YAAyB,EAAE,aAAa,oBAAI,IAAI,GAAG,OAAO,oBAAI,IAAI,GAAG,OAAO,oBAAI,IAAI,EAAE;AACpG,cAAM,MAAM,KAAK,uBAAuB,MAAM,KAAK,cAAc,oBAAI,IAAI;AACzE,gBAAQ,IAAI,IAAI,EAAE,KAAK,CAAC,GAAG,IAAI,SAAS,GAAE;AAhJ5C,cAAAG,KAAAC;AAgJ8C,kBAAOA,OAAAD,MAAA,KAAK,UAAL,gBAAAA,IAAY,QAAZ,gBAAAC,IAAA,KAAAD,KAAkB;AAAA,QAAI,CAAC,EAAE,OAAO,OAAO;AAAA,MAC5F;AAJS;AAKT,aAAO,eAAe;AACtB,aAAO,mBAAmB;AAG1B,eAAS,aAAa,KAAI;AACxB,cAAM,WAAW,MAAM,QAAQ,GAAG,IAAI,OAAO,2BAAK,WAAS,2BAAK,aAAY,CAAC;AAC7E,cAAM,WAAW,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,2BAAK,WAAS,2BAAK,WAAS,2BAAK,gBAAe,CAAC;AAC7F,cAAM,QAAQ,cAAc,EAAE,OAAO,UAAU,OAAO,UAAU,OAAM,2BAAK,SAAQ,CAAC,EAAE,CAAC;AACvF,cAAM,QAAQ,MAAM,MAAM,IAAI,QAAM,EAAE,OAAO,SAAS,MAAM,EAAE,MAAM,SAAS,EAAE,QAAQ,EAAE;AACzF,cAAM,QAAQ,MAAM,MAAM,IAAI,QAAM,EAAE,OAAO,SAAS,MAAM,EAAE,MAAM,SAAS,EAAE,QAAQ,EAAE;AACzF,eAAO,EAAE,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,UAAU,UAAU,UAAU,SAAS;AAAA,MAChG;AAPS;AAUT,OAAC,WAAY;AACX,cAAM,SAAU,OAAO,YAAY,OAAO,SAAS,UAAW,WAAY;AACxE,eAAK,QAAQ,WAAY;AACvB,mBAAO,EAAE,UAAU,kCAAY;AAAE,qBAAO;AAAA,YAAG,GAAxB,aAA2B,WAAW,kCAAY;AAAE,qBAAO,CAAC;AAAA,YAAG,GAAzB,aAA2B;AAAA,UACtF;AAAA,QACF;AAGA,YAAI,eAAe;AACnB,YAAI,eAAe;AACnB,YAAI,oBAAoB,CAAC;AACzB,iBAAS,eAAe,IAAG;AAAE,cAAG,cAAa;AAAE,gBAAG;AAAE,iBAAG;AAAA,YAAG,SAAO,GAAE;AAAE,sBAAQ,MAAM,CAAC;AAAA,YAAE;AAAA,UAAE,OAAO;AAAE,8BAAkB,KAAK,EAAE;AAAA,UAAG;AAAA,QAAE;AAAtH;AACT,iBAAS,iBAAgB;AAAE,yBAAe;AAAM,mBAAQ,IAAE,GAAE,IAAE,kBAAkB,QAAO,KAAI;AAAE,gBAAG;AAAE,gCAAkB,CAAC,EAAE;AAAA,YAAG,SAAO,GAAE;AAAE,sBAAQ,MAAM,CAAC;AAAA,YAAE;AAAA,UAAE;AAAE,8BAAoB,CAAC;AAAA,QAAG;AAAzK;AACT,eAAO,iBAAiB;AAExB,iBAAS,WAAU;AACjB,gBAAM,KAAK,OAAO,cAAc;AAChC,mBAAS,gBAAgB,MAAM,YAAY,QAAQ,GAAG,EAAE,IAAI;AAAA,QAC9D;AAHS;AAIT,iBAAS;AACT,eAAO,iBAAiB,UAAU,QAAQ;AAC1C,eAAO,iBAAiB,qBAAqB,MAAM;AAAE,qBAAW,UAAU,GAAG;AAAA,QAAG,CAAC;AAEjF,YAAI;AACJ,YAAI;AACJ,YAAI,YAAY,CAAC;AACjB,cAAM,SAAS;AAEf,iBAAS,eAAe;AACtB,cAAI;AAAE,mBAAO,KAAK,MAAM,aAAa,QAAQ,MAAM,CAAC,KAAK,CAAC;AAAA,UAAG,SAAS,GAAG;AAAE,mBAAO,CAAC;AAAA,UAAG;AAAA,QACxF;AAFS;AAIT,iBAAS,aAAa,KAAK;AACzB,uBAAa,QAAQ,QAAQ,KAAK,UAAU,GAAG,CAAC;AAAA,QAClD;AAFS;AAIT,iBAAS,WAAW,MAAM;AACxB,gBAAM,SAAS,IAAI,OAAO;AAC1B,kBAAQ,EAAE,OAAO,CAAC,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC,GAAG,UAAU,CAAC,EAAE;AACxD,WAAC,KAAK,SAAS,CAAC,GAAG,QAAQ,OAAK;AAC9B,kBAAM,OAAO,EAAE,GAAG,GAAG,MAAM,CAAC,EAAE;AAC9B,gBAAI,EAAE,MAAM;AACV,kBAAI;AAAE,qBAAK,KAAK,OAAO,MAAM,EAAE,IAAI;AAAA,cAAG,SAAS,GAAG;AAAE,wBAAQ,MAAM,cAAc,EAAE,IAAI,CAAC;AAAA,cAAG;AAAA,YAC5F;AACA,gBAAI,EAAE,SAAS,QAAQ;AACrB,mBAAK,QAAQ,KAAK,KAAK,KAAK,GAAG,SAAS,CAAC,CAAC,IAAI,WAAW,EAAE,IAAI,KAAK;AACpE,oBAAM,SAAS,EAAE,EAAE,IAAI,KAAK;AAAA,YAC9B;AACA,gBAAI,OAAO,EAAE,SAAS,YAAa,OAAM,SAAS,EAAE,EAAE,IAAI,EAAE;AAC5D,kBAAM,MAAM,EAAE,EAAE,IAAI;AAAA,UACtB,CAAC;AACD,WAAC,KAAK,SAAS,CAAC,GAAG,QAAQ,OAAK;AAC9B,kBAAM,OAAO,EAAE,GAAG,EAAE;AACpB,gBAAI,EAAE,MAAM;AACV,kBAAI;AAAE,qBAAK,KAAK,OAAO,MAAM,EAAE,IAAI;AAAA,cAAG,SAAS,KAAK;AAAE,wBAAQ,MAAM,cAAc,EAAE,QAAQ,EAAE,QAAQ,GAAG;AAAA,cAAG;AAAA,YAC9G;AACA,kBAAM,MAAM,KAAK,IAAI;AAAA,UACvB,CAAC;AACD,iBAAO,OAAO,MAAM,KAAK,EAAE,QAAQ,OAAK;AACtC,gBAAI,EAAE,SAAS,UAAU,EAAE,IAAI;AAC7B,gBAAE,OAAO,EAAE,GAAG,UAAU,EAAE,OAAO,OAAK,MAAM,MAAM,CAAC,CAAC;AAAA,YACtD;AAAA,UACF,CAAC;AACD,gBAAM,QAAQ,CAAC;AACf,iBAAO,KAAK,MAAM,KAAK,EAAE,QAAQ,QAAM,MAAM,EAAE,IAAI,CAAC;AACpD,iBAAO,OAAO,MAAM,KAAK,EAAE,QAAQ,OAAK,EAAE,KAAK,QAAQ,OAAK,MAAM,EAAE,EAAE,GAAG,CAAC;AAC1E,gBAAM,IAAI,CAAC;AACX,iBAAO,KAAK,KAAK,EAAE,QAAQ,QAAM;AAAE,gBAAI,MAAM,EAAE,MAAM,EAAG,GAAE,KAAK,EAAE;AAAA,UAAG,CAAC;AACrE,gBAAM,QAAQ,CAAC;AACf,iBAAO,EAAE,QAAQ;AACf,kBAAM,KAAK,EAAE,MAAM;AACnB,kBAAM,KAAK,EAAE;AACb,mBAAO,OAAO,MAAM,KAAK,EAAE,QAAQ,OAAK;AACtC,kBAAI,EAAE,KAAK,SAAS,EAAE,GAAG;AACvB,sBAAM,EAAE,EAAE;AACV,oBAAI,MAAM,EAAE,EAAE,MAAM,EAAG,GAAE,KAAK,EAAE,EAAE;AAAA,cACpC;AAAA,YACF,CAAC;AAAA,UACH;AACA,iBAAO,KAAK,MAAM,KAAK,EAAE,QAAQ,QAAM;AAAE,gBAAI,CAAC,MAAM,SAAS,EAAE,EAAG,OAAM,KAAK,EAAE;AAAA,UAAG,CAAC;AACnF,gBAAM,QAAQ;AACd,iBAAO;AAAA,QACT;AA9CS;AAgDT,iBAAS,aAAa,OAAO,GAAG;AAC9B,gBAAM,WAAY,SAAS,MAAM,WAAY,MAAM,WAAW,CAAC;AAC/D,gBAAM,OAAO,MAAM,IAAI,CAAC,KAAK,CAAC;AAC9B,gBAAM,MAAM,CAAC;AACb,gBAAM,MAAM,MAAM,UAAU;AAC5B,cAAI,OAAO,GAAG,UAAU;AACxB,iBAAO,WAAW,OAAO,SAAS;AAChC,sBAAU;AACV,uBAAW,MAAM,MAAM,OAAO;AAC5B,oBAAM,IAAI,MAAM,MAAM,EAAE;AACxB,kBAAI,EAAE,SAAS,QAAQ;AACrB,oBAAI,EAAE,IAAI,MAAM,SAAS,EAAE;AAC3B;AAAA,cACF;AACA,oBAAM,MAAM,OAAO,OAAO,CAAC,GAAG,WAAW,MAAM,KAAK;AAAA,gBAClD,OAAO,gCAAS,MAAM,GAAE;AACtB,sBAAK,OAAO,MAAM,WAAY,IAAI;AAClC,wBAAM,KAAK,IAAI;AACf,sBAAI,KAAK,EAAG,QAAO,SAAS,IAAI,KAAK;AACrC,wBAAM,KAAK,MAAM,EAAE;AACnB,yBAAO,MAAM,GAAG,IAAI,KAAK,OAAO,GAAG,IAAI,IAAI,SAAS,IAAI,KAAK;AAAA,gBAC/D,GANO;AAAA,cAOT,CAAC;AACD,kBAAI,MAAM;AACV,kBAAI;AAAE,sBAAM,EAAE,KAAK,EAAE,GAAG,SAAS,GAAG,IAAI;AAAA,cAAG,SAAS,GAAG;AAAE,wBAAQ,MAAM,QAAQ,IAAI,CAAC;AAAA,cAAG;AACvF,kBAAI,IAAI,EAAE,MAAM,UAAa,KAAK,IAAI,IAAI,EAAE,IAAI,GAAG,IAAI,KAAK;AAC1D,oBAAI,EAAE,IAAI;AACV,0BAAU;AAAA,cACZ;AAAA,YACF;AACA;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAjCS;AAmCT,iBAAS,SAAS,QAAQ;AACxB,cAAI,CAAC,SAAS,CAAC,MAAM,UAAU;AAAE,kBAAM,IAAI,MAAM,iBAAiB;AAAA,UAAG;AACrE,mBAAS,UAAU,CAAC;AACpB,sBAAY;AACZ,gBAAM,QAAQ,OAAO,SAAS;AAC9B,gBAAM,WAAW,MAAM,YAAY,CAAC;AACpC,gBAAM,QAAQ,CAAC,OAAO,OAAO,CAAC,GAAG,QAAQ,CAAC;AAC1C,mBAAS,IAAI,GAAG,KAAK,OAAO,KAAK;AAC/B,kBAAM,CAAC,IAAI,aAAa,OAAO,CAAC;AAAA,UAClC;AACA,iBAAO;AAAA,YACL,OAAO,MAAM,KAAK,EAAE,QAAQ,QAAQ,EAAE,GAAG,SAAU,GAAG,GAAG;AAAE,qBAAO;AAAA,YAAG,CAAC;AAAA,YACtE,QAAQ,MAAM,IAAI,SAAU,GAAG;AAAE,qBAAO,EAAE;AAAA,YAAU,CAAC;AAAA,UACvD;AAAA,QACF;AAdS;AAgBT,iBAAS,mBAAmB,YAAY;AACtC,gBAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,gBAAM,MAAM,OAAO,WAAW,IAAI;AAClC,iBAAO;AAAA,YACL,SAAS,gCAAS,YAAY;AAAE,kBAAI,OAAO,aAAa,QAAQ;AAAA,YAAY,GAAnE;AAAA,YACT,SAAS,gCAAS,MAAM;AACtB,qBAAQ,OAAO,OAAO,IAAI,gBAAgB,aAAc,IAAI,YAAY,IAAI,EAAE,QAAQ;AAAA,YACxF,GAFS;AAAA,YAGT,WAAW,gCAAS,MAAM,UAAU;AAClC,kBAAI,CAAC,KAAM,QAAO,CAAC,EAAE;AACrB,oBAAM,QAAQ,KAAK,MAAM,KAAK;AAC9B,oBAAM,QAAQ,CAAC;AACf,kBAAI,OAAO,MAAM,CAAC,KAAK;AACvB,uBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,sBAAM,OAAO,MAAM,CAAC;AACpB,sBAAM,OAAO,OAAO,MAAM;AAC1B,oBAAI,KAAK,QAAQ,IAAI,KAAK,UAAU;AAClC,yBAAO;AAAA,gBACT,OAAO;AACL,wBAAM,KAAK,IAAI;AACf,yBAAO;AAAA,gBACT;AAAA,cACF;AACA,oBAAM,KAAK,IAAI;AACf,qBAAO;AAAA,YACT,GAjBW;AAAA,UAkBb;AAAA,QACF;AA3BS;AA6BT,iBAAS,sBAAsBE,KAAI,OAAO,CAAC,GAAG;AAC5C,gBAAM,WAAW,KAAK,YAAY;AAClC,gBAAM,UAAU,OAAO,KAAK,YAAY,WAAW,KAAK,UAAU;AAClE,gBAAM,eAAe,KAAK,YAAY,KAAK,gBAAgB;AAC3D,gBAAM,WAAW,KAAK,YAAY;AAClC,gBAAM,YAAY,KAAK,aAAa;AACpC,gBAAM,YAAYA,IAAG,UAAU;AAC/B,gBAAM,OAAO,OAAO,iBAAiB,SAAS;AAC9C,gBAAM,aAAa,QAAQ,KAAK,aAAa,KAAK,aAAa;AAC/D,gBAAM,WAAW,mBAAmB,QAAQ;AAC5C,mBAAS,QAAQ,UAAU;AAE3B,UAAAA,IAAG,MAAM,MAAM;AACb,YAAAA,IAAG,MAAM,EAAE,QAAQ,UAAQ;AACzB,kBAAI,KAAK,YAAY,KAAK,SAAS,EAAG;AACtC,oBAAM,WAAY,KAAK,KAAK,OAAO,MAAM,SAAa,OAAO,KAAK,KAAK,OAAO,CAAC,IAAK,KAAK,GAAG,KAAK;AACjG,oBAAM,aAAa,SAAS,QAAQ,QAAQ,GAAG,EAAE,KAAK;AACtD,oBAAM,QAAQ,SAAS,UAAU,YAAY,YAAY;AACzD,kBAAI,eAAe;AACnB,oBAAM,QAAQ,QAAM;AAClB,sBAAM,IAAI,SAAS,QAAQ,EAAE;AAC7B,oBAAI,IAAI,aAAc,gBAAe;AAAA,cACvC,CAAC;AACD,oBAAM,aAAa,KAAK,KAAK,WAAW,GAAG;AAC3C,oBAAM,aAAa,MAAM,SAAS;AAClC,oBAAM,WAAW,KAAK,IAAI,UAAU,KAAK,KAAK,eAAe,UAAU,CAAC,CAAC;AACzE,oBAAM,YAAY,KAAK,IAAI,WAAW,KAAK,KAAK,aAAa,UAAU,CAAC,CAAC;AACzE,oBAAM,aAAa,MAAM,KAAK,IAAI;AAClC,mBAAK,KAAK,SAAS,UAAU;AAC7B,mBAAK,MAAM;AAAA,gBACT,SAAS,WAAW;AAAA,gBACpB,UAAU,YAAY;AAAA,gBACtB,eAAe;AAAA,gBACf,eAAe;AAAA,cACjB,CAAC;AAAA,YACH,CAAC;AAAA,UACH,CAAC;AAAA,QACH;AArCS;AAuCT,eAAO,wBAAwB;AAE/B,YAAI;AACJ,YAAI;AACJ,YAAI;AAEJ,iBAAS,eAAe;AACtB,cAAI;AACF,kBAAM,KAAK,SAAS,eAAe,WAAW;AAC9C,gBAAI,CAAC,GAAI,QAAO,QAAQ,KAAK,qBAAqB;AAClD,gBAAI,CAAC,OAAO,MAAO,QAAO,QAAQ,KAAK,qBAAqB;AAC5D,kBAAM,MAAM,GAAG,WAAW,IAAI;AAC9B,gBAAI,CAAC,OAAO,kBAAkB;AAC5B,oBAAM,SAAS,KAAK,SAAS;AAC7B,qBAAO,mBAAmB,IAAI,MAAM,KAAK;AAAA,gBACvC,MAAM;AAAA,gBACN,MAAM,EAAE,QAAQ,CAAC,GAAG,UAAU,CAAC,EAAE,OAAO,4BAAQ,MAAM,CAAC,GAAG,aAAa,GAAG,MAAM,MAAM,CAAC,EAAE;AAAA,gBACzF,SAAS,EAAE,YAAY,MAAM,qBAAqB,MAAM;AAAA,cAC1D,CAAC;AAAA,YACH;AACA,uBAAW,OAAO;AAClB,2BAAe;AACf,2BAAe,sBAAsB;AAAA,UACvC,SAAS,GAAG;AACV,oBAAQ,MAAM,uBAAuB,CAAC;AAAA,UACxC;AAAA,QACF;AApBS;AAqBT,iBAAS,iBAAiB,oBAAoB,YAAY;AAC1D,YAAI,SAAS,SAAS,SAAS,MAAM,OAAO;AAC1C,mBAAS,MAAM,MAAM,KAAK,YAAY,EAAE,MAAM,WAAU;AAAE,yBAAa;AAAA,UAAG,CAAC;AAAA,QAC7E;AAEA,iBAAS,yBAAwB;AAC/B,cAAI,CAAC,OAAO,iBAAkB;AAC9B,cAAG;AACD,gBAAI,OAAO,aAAa,cAAc,SAAS,MAAM,UAAS;AAC5D,kBAAI,MAAM,SAAS,EAAE,KAAI,GAAG,KAAI,GAAG,OAAM,GAAG,OAAM,GAAG,CAAC;AACtD,kBAAI,SAAS,IAAI,UAAU,IAAI,WAAW,IAAI,SAAS,IAAI,SAAS,GAAE,GAAE;AAAC,uBAAO;AAAA,cAAE,CAAC,IAAI,CAAC;AACxF,wBAAU,EAAE,OAAO,QAAQ,UAAU,IAAI,YAAY,IAAI,UAAU,CAAC,EAAE;AACtE,iCAAmB,OAAO;AAAA,YAC5B,WAAW,CAAC,OAAO,iBAAiB,KAAK,OAAO,QAAO;AACrD,wBAAU;AAAA,gBACR,OAAO,MAAM,KAAK,EAAC,QAAO,GAAE,GAAG,SAAS,GAAE,GAAE;AAAC,yBAAO;AAAA,gBAAE,CAAC;AAAA,gBACvD,UAAU,MAAM,KAAK,EAAC,QAAO,GAAE,GAAG,WAAU;AAAC,yBAAO;AAAA,gBAAI,CAAC;AAAA,cAC3D;AACA,iCAAmB,OAAO;AAAA,YAC5B;AAAA,UACF,SAAO,GAAE;AAAE,oBAAQ,MAAM,wBAAwB,CAAC;AAAA,UAAG;AAAA,QACvD;AAhBS;AAkBT,iBAAS,mBAAmB,KAAK;AAC/B,cAAI,CAAC,OAAO,oBAAoB,CAAC,IAAK;AACtC,gBAAM,SAAS,IAAI,SAAS,MAAM,KAAK,EAAE,QAAQ,IAAI,WAAW,IAAI,SAAS,SAAU,IAAI,SAAS,IAAI,OAAO,SAAS,EAAG,GAAG,CAAC,GAAG,MAAM,CAAC;AACzI,iBAAO,iBAAiB,KAAK,SAAS;AACtC,gBAAM,WAAW,CAAC;AAAA,YAChB,OAAO;AAAA,YACP,MAAM,IAAI,YAAY,IAAI,UAAU,CAAC;AAAA,YACrC,aAAa;AAAA,YACb,aAAa;AAAA,YACb,iBAAiB;AAAA,YACjB,MAAM;AAAA,UACR,CAAC;AACD,cAAI,IAAI,SAAU,UAAS,KAAK;AAAA,YAC9B,OAAO;AAAA,YACP,MAAM,IAAI;AAAA,YACV,aAAa;AAAA,YACb,aAAa;AAAA,YACb,iBAAiB;AAAA,YACjB,MAAM;AAAA,UACR,CAAC;AACD,iBAAO,iBAAiB,KAAK,WAAW;AACxC,iBAAO,iBAAiB,OAAO;AAAA,QACjC;AAtBS;AA0BT,iBAAS,YAAYA,KAAG;AACtB,cAAIC,UAAS,CAAC;AACd,UAAAD,IAAG,MAAM,EAAE,QAAQ,SAAS,GAAE;AAC5B,gBAAI,IAAI,EAAE,KAAK,OAAO,KAAK;AAC3B,aAACC,QAAO,CAAC,IAAIA,QAAO,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;AAAA,UACtC,CAAC;AAED,cAAI,SAAS,OAAO,KAAKA,OAAM;AAC/B,cAAI,OAAO,KAAK,KAAK,KAAK,KAAK,OAAO,MAAM,CAAC;AAC7C,cAAI,KAAK,GAAG,KAAK,GAAG,KAAK;AAEzB,iBAAO,QAAQ,SAAS,GAAE;AACxB,gBAAI,QAAS,KAAK,OAAQ,MAAM;AAChC,gBAAI,QAAQ,KAAK,MAAM,KAAK,IAAI,IAAI,MAAM;AAC1C,gBAAI,MAAMA,QAAO,CAAC;AAElB,gBAAI,QAAQ,SAAS,GAAG,GAAE;AACxB,kBAAI,MAAM,IAAI,GAAG,MAAM,KAAK,MAAM,IAAI,CAAC;AACvC,kBAAI,KAAK,QAAQ,MAAM,OAAO,KAAK,OAAO,IAAE,KAAK;AACjD,kBAAI,KAAK,QAAQ,MAAM,OAAO,KAAK,OAAO,IAAE,KAAK;AACjD,gBAAE,SAAS,EAAC,GAAG,IAAI,GAAG,GAAE,CAAC;AAAA,YAC3B,CAAC;AAED;AAAA,UACF,CAAC;AAAA,QACH;AAzBS;AA4BT,iBAAS,eAAe,GAAE;AACxB,gBAAM,SAAS,EAAE,SAAS,CAAC,GAAG,IAAI,SAAS,GAAG,GAAE;AAC9C,kBAAM,KAAK,EAAE,MAAO,EAAE,QAAQ,EAAE,KAAK,MAAQ,OAAO;AACpD,mBAAO,EAAE,MAAM,EAAE,IAAQ,OAAO,EAAE,OAAO,OAAO,EAAE,OAAO,MAAM,EAAE,MAAM,MAAM,EAAE,KAAK,EAAE;AAAA,UACxF,CAAC;AACD,gBAAM,SAAS,EAAE,SAAS,CAAC,GAAG,IAAI,SAAS,GAAG,GAAE;AAC9C,kBAAM,KAAK,EAAE,MAAO,EAAE,QAAQ,EAAE,KAAK,OAAQ,EAAE,SAAS,OAAO,EAAE,SAAS,QAAQ,EAAE,QAAQ,OAAQ,OAAO;AAC3G,mBAAO,EAAE,MAAM,EAAE,IAAQ,QAAQ,EAAE,QAAQ,QAAQ,EAAE,QAAQ,MAAM,EAAE,MAAM,OAAO,EAAE,UAAU,EAAE,SAAS,MAAM,WAAM,MAAM,QAAS,OAAO,EAAE,WAAW,WAAY,EAAE,SAAS,QAAW,YAAa,OAAO,EAAE,eAAe,WAAY,EAAE,aAAa,EAAE,EAAE;AAAA,UAChQ,CAAC;AACD,iBAAO,EAAE,OAAc,MAAa;AAAA,QACtC;AAVS;AAYT,uBAAe,iBAAiB,KAAI;AA/dtC;AAgeI,gBAAM,MAAM,MAAM,MAAM,KAAK,EAAE,OAAO,WAAW,CAAC,EAAE,MAAM,OAAK;AAAE,oBAAQ,MAAM,sBAAsB,CAAC;AAAA,UAAG,CAAC;AAC1G,cAAI,CAAC,OAAO,CAAC,IAAI,IAAI;AAAE,oBAAQ,MAAM,0BAA0B,OAAO,IAAI,MAAM;AAAG;AAAA,UAAQ;AAC3F,cAAIC;AACJ,cAAI;AAAE,YAAAA,SAAQ,MAAM,IAAI,KAAK;AAAA,UAAG,SAAS,GAAG;AAAE,oBAAQ,MAAM,4BAA4B,CAAC;AAAG;AAAA,UAAQ;AAEpG,gBAAM,SAAS,aAAaA,MAAK;AACjC,kBAAQ,MAAM,EAAE,UAAU,OAAO,SAAS,QAAQ,UAAU,OAAO,SAAS,OAAO,CAAC;AACpF,kBAAQ,IAAI,kBAAkB,OAAO,SAAS,CAAC,CAAC;AAEhD,gBAAM,QAAQ,OAAO;AACrB,eAAI,YAAO,eAAP,mBAAmB,SAAU,QAAO,WAAW,SAAS,KAAK;AAAA,eAC5D;AAAE,mBAAO,aAAa,OAAO,cAAc,CAAC;AAAG,mBAAO,WAAW,QAAQ;AAAA,UAAO;AACrF,iBAAO,SAAS,OAAO,UAAU,CAAC;AAAG,iBAAO,OAAO,QAAQ;AAE3D,sBAAYA;AACZ,cAAI,OAAO,eAAe,YAAY;AAAE,gBAAI;AAAE,yBAAWA,MAAK;AAAA,YAAG,SAAS,GAAG;AAAE,sBAAQ,MAAM,qBAAqB,CAAC;AAAA,YAAG;AAAA,UAAE;AACxH,cAAI,OAAO,mBAAmB,WAAY,gBAAe;AACzD,cAAI,gBAAgB,OAAO,2BAA2B,WAAY,wBAAuB;AAEzF,gBAAM,MAAM,EAAE,OAAO,OAAO,OAAO,OAAO,OAAO,MAAM;AACvD,iBAAO,sBAAsB;AAE7B,gBAAM,SAAS,6BAAM;AAtfzB,gBAAAJ,KAAA;AAufM,oBAAQ,MAAM,sBAAsB,EAAE,QAAQ,IAAI,MAAM,QAAQ,QAAQ,IAAI,MAAM,QAAQ,YAAY,IAAI,MAAM,CAAC,EAAE,CAAC;AAEpH,gBAAI,CAAC,OAAO,CAAC,MAAM,QAAQ,IAAI,KAAK,GAAG;AAAE,sBAAQ,KAAK,mBAAmB;AAAA,YAAG;AAC5E,gBAAI;AACF,mBAAIA,MAAA,OAAO,eAAP,gBAAAA,IAAmB,SAAS;AAC9B,uBAAO,WAAW,QAAQ,EAAE,UAAU,EAAE,OAAO,IAAI,OAAO,OAAO,IAAI,MAAM,EAAE,CAAC;AAAA,cAChF,OAAO;AACL,sBAAM,IAAI,SAAS;AAAG,oBAAI,CAAC,EAAG;AAC9B,oBAAI,EAAE,WAAY,GAAE,WAAW;AAC/B,oBAAI;AACF,sBAAI,OAAO,EAAE,SAAS,YAAY;AAChC,sBAAE,SAAS,EAAE,OAAO;AACpB,sBAAE,KAAK,EAAE,UAAU,EAAE,OAAO,IAAI,OAAO,OAAO,IAAI,MAAM,EAAE,CAAC;AAAA,kBAC7D,OAAO;AACL,sBAAE,IAAI,IAAI,MAAM,OAAO,IAAI,KAAK,CAAC;AAAA,kBACnC;AAAA,gBACF,UAAE;AAAU,sBAAI,EAAE,SAAU,KAAI;AAAE,sBAAE,SAAS;AAAA,kBAAG,SAAS,GAAG;AAAA,kBAAC;AAAA,gBAAE;AAAA,cACjE;AAAA,YACF,SAAS,KAAK;AAAE,sBAAQ,MAAM,uBAAuB,GAAG;AAAG;AAAA,YAAQ;AAEnE,kBAAME,MAAK,SAAS;AACpB,kBAAM,OAAK,KAAAA,OAAA,gBAAAA,IAAI,YAAJ,mBAAa,WAAU;AAClC,kBAAM,OAAK,KAAAA,OAAA,gBAAAA,IAAI,YAAJ,mBAAa,WAAU;AAClC,oBAAQ,IAAI,qBAAqB,EAAE,SAAS,IAAI,SAAS,GAAG,CAAC;AAG7D,gBAAI;AACF,oBAAM,QAAO,iCAAQ,kBAAiB;AACtC,oBAAM,SAASA,IAAG,OAAO,EAAE,MAAM,MAAM,SAAS,MAAM,KAAK,KAAK,CAAC;AACjE,qBAAO,IAAI;AACX,cAAAA,IAAG,KAAK,cAAc,MAAM;AArhBpC,oBAAAF,KAAAC,KAAAI,KAAAC,KAAAC;AAshBU,oBAAI;AAAE,kBAAAL,IAAG,IAAI;AAAA,gBAAG,SAAQ,GAAG;AAAA,gBAAC;AAC5B,iBAAAD,OAAAD,MAAA,OAAO,gBAAP,gBAAAA,IAAoB,SAApB,gBAAAC,IAAA,KAAAD,KAA2B,gBAAgB;AAC3C,iBAAAM,OAAAD,MAAA,OAAO,gBAAP,gBAAAA,IAAoB,SAApB,gBAAAC,IAAA,KAAAD,KAA2B,eAAe;AAC1C,iBAAAE,MAAA,OAAO,0BAAP,gBAAAA,IAAA;AAAA,cACF,CAAC;AAAA,YACH,SAAS,GAAG;AACV,sBAAQ,KAAK,0BAA0B,CAAC;AACxC,iCAAO,gBAAP,mBAAoB,SAApB,4BAA2B,gBAAgB;AAC3C,iCAAO,gBAAP,mBAAoB,SAApB,4BAA2B,eAAe;AAC1C,2BAAO,0BAAP;AAAA,YACF;AAAA,UACF,GA3Ce;AA6Cf,gBAAM,WAAW,6BAAM,OAAO,GAAb;AACjB,cAAI,OAAO,cAAc,OAAO,OAAO,WAAW,UAAU,YAAW;AACrE,mBAAO,WAAW,MAAM,EAAE,KAAK,MAAK,SAAS,CAAC,EAAE,MAAM,MAAK,YAAY,MAAK,SAAS,CAAC,CAAC;AAAA,UACzF,OAAO;AACL,wBAAY,MAAK,SAAS,CAAC;AAAA,UAC7B;AAAA,QACF;AA1Ee;AA2Ef,eAAO,mBAAmB;AAE1B,iBAAS,gBAAgB;AACvB,cAAI,CAAC,QAAS;AACd,6BAAmB,OAAO;AAC1B,gBAAM,WAAW,SAAS,eAAe,OAAO;AAChD,gBAAM,WAAW,SAAS,eAAe,OAAO;AAChD,gBAAM,aAAa,SAAS,eAAe,SAAS;AACpD,cAAI,UAAU;AAAE,qBAAS,QAAQ;AAAG,qBAAS,cAAc,IAAI,MAAM,OAAO,CAAC;AAAA,UAAG;AAChF,cAAI,UAAU;AAAE,qBAAS,QAAQ;AAAG,qBAAS,cAAc,IAAI,MAAM,OAAO,CAAC;AAAA,UAAG;AAChF,cAAI,YAAY;AAAE,uBAAW,QAAQ;AAAG,uBAAW,cAAc,IAAI,MAAM,OAAO,CAAC;AAAA,UAAG;AAAA,QACxF;AATS;AAWT,iBAAS,iBAAiB,oBAAoB,iBAAkB;AAC9D,gBAAM,YAAY,SAAS,eAAe,IAAI;AAC9C,cAAI,CAAC,WAAW;AAAE,oBAAQ,KAAK,wBAAwB;AAAG;AAAA,UAAQ;AAClE,cAAI,OAAO,OAAO,cAAc,aAAa;AAAE,oBAAQ,KAAK,sBAAsB;AAAG;AAAA,UAAQ;AAE7F,gBAAML,MAAK,SAAS;AACpB,cAAI,CAACA,KAAI;AAAE,oBAAQ,KAAK,uBAAuB;AAAG;AAAA,UAAQ;AAE1D,cAAI,OAAO,OAAO;AAChB,kBAAM,SAAS,EAAE,WAAU,MAAM,OAAM,SAAS,OAAM,CAAC,IAAG,CAAC,GAAG,WAAU,UAAU,UAAU,KAAK,aAAa,KAAK,CAAC;AAAA,UACtH;AAEA,gBAAM,YAAY,iBAAiB,SAAS,eAAe;AAC3D,gBAAM,WAAW,UAAU,iBAAiB,OAAO,EAAE,KAAK,KAAK;AAC/D,gBAAM,WAAW,UAAU,iBAAiB,OAAO,EAAE,KAAK,KAAK;AAC/D,gBAAM,cAAc,UAAU,iBAAiB,UAAU,EAAE,KAAK,KAAK;AACrE,gBAAM,YAAY,UAAU,iBAAiB,QAAQ,EAAE,KAAK,KAAK;AACjE,gBAAM,YAAY,UAAU,iBAAiB,QAAQ,EAAE,KAAK,KAAK;AAEjE,gBAAM,YAAY;AAAA,YAChB,EAAE,UAAU,QAAQ,OAAO,EAAE,oBAAoB,WAAW,gBAAgB,EAAE,EAAE;AAAA,YAChF,EAAE,UAAU,yBAAyB,OAAO,EAAE,SAAS,eAAe,eAAe,yBAAyB,aAAa,QAAQ,kBAAkB,KAAK,aAAa,IAAI,eAAe,KAAK,SAAS,WAAW,eAAe,UAAU,eAAe,UAAU,iBAAiB,GAAG,sBAAsB,GAAG,oBAAoB,WAAW,SAAS,mBAAmB,WAAW,aAAa,gBAAgB,GAAG,gBAAgB,WAAW,wBAAwB,EAAE,EAAE;AAAA,YAC/c,EAAE,UAAU,iBAAiB,OAAO,EAAE,SAAS,mBAAmB,oBAAoB,WAAW,sBAAsB,MAAM,gBAAgB,WAAW,gBAAgB,KAAK,SAAS,eAAe,eAAe,OAAO,eAAe,UAAU,aAAa,IAAI,SAAS,WAAW,WAAW,IAAI,eAAe,wBAAwB,EAAE;AAAA,YACjV,EAAE,UAAU,QAAQ,OAAO,EAAE,eAAe,UAAU,SAAS,gCAAO,KAAK,IAAI,KAAK,QAAQ,KAAK,IAAlC,UAAsC,cAAc,gCAAO,IAAI,KAAK,YAAY,IAAI,IAAI,WAAW,SAA/C,eAAwD,qBAAqB,gCAAO,IAAI,KAAK,YAAY,IAAI,IAAI,CAAC,GAAE,CAAC,IAAI,CAAC,CAAC,GAA9C,sBAAiD,sBAAsB,YAAY,eAAe,KAAK,cAAc,WAAW,sBAAsB,WAAW,sBAAsB,WAAW,SAAS,eAAe,iBAAiB,cAAc,yBAAyB,oBAAoB,2BAA2B,GAAG,2BAA2B,GAAG,aAAa,QAAQ,kBAAkB,KAAK,eAAe,yBAAyB,aAAa,IAAI,SAAS,UAAU,EAAE;AAAA,YAC5pB,EAAE,UAAU,YAAY,OAAO,EAAE,cAAc,UAAU,sBAAsB,UAAU,sBAAsB,SAAS,EAAE;AAAA,YAC1H,EAAE,UAAU,YAAY,OAAO,EAAE,cAAc,UAAU,sBAAsB,UAAU,sBAAsB,SAAS,EAAE;AAAA,YAC1H,EAAE,UAAU,WAAW,OAAO,EAAE,WAAW,OAAO,EAAE;AAAA,YACpD,EAAE,UAAU,UAAU,OAAO,EAAE,WAAW,IAAI,EAAE;AAAA,YAChD,EAAE,UAAU,gBAAgB,OAAO,EAAE,gBAAgB,WAAW,gBAAgB,EAAE,EAAE;AAAA,YACpF,EAAE,UAAU,cAAc,OAAO,EAAE,gBAAgB,aAAa,gBAAgB,EAAE,EAAE;AAAA,YACpF,EAAE,UAAU,kBAAkB,OAAO,EAAE,cAAc,aAAa,sBAAsB,aAAa,sBAAsB,aAAa,SAAS,EAAE,EAAE;AAAA,UACvJ;AACA,UAAAA,IAAG,MAAM,EAAE,SAAS,SAAS,EAAE,OAAO;AACtC,UAAAA,IAAG,OAAO,EAAE,MAAM,OAAO,CAAC,EAAE,IAAI;AAGhC,WAAC,WAAU;AACT,gBAAI,SAAS;AACb,qBAAS,iBAAgB;AACvB,kBAAI,IAAIA,IAAG,KAAK;AAChB,cAAAA,IAAG,MAAM,WAAU;AACjB,gBAAAA,IAAG,MAAM,EAAE,QAAQ,SAAS,GAAE;AAC5B,oBAAE,MAAM,SAAS,KAAK,SAAS,EAAE,KAAK,OAAO,IAAI,EAAE;AAAA,gBACrD,CAAC;AAAA,cACH,CAAC;AAAA,YACH;AAPS;AAQT,mBAAO,oBAAoB,KAAK,WAAU;AACxC,cAAAA,IAAG,GAAG,QAAQ,cAAc;AAC5B,6BAAe;AAAA,YACjB,CAAC;AAAA,UACH,GAAG;AAGH,WAAC,WAAU;AACT,gBAAI,MAAM;AACV,mBAAO,oBAAoB,KAAK,WAAU;AACxC,cAAAA,IAAG,GAAG,aAAa,QAAQ,SAAS,KAAI;AACtC,oBAAI,IAAI,IAAI;AACZ,oBAAI,OAAO,EAAE,mBAAmB;AAChC,gBAAAA,IAAG,MAAM,WAAU;AAlnB7B;AAmnBY,wBAAM,SAASA,IAAG,SAAS,EAAE,WAAW,IAAI;AAC1C,sBAAI,qCAAU,cAAc;AAC1B,6BAAS,aAAa,QAAQ,OAAO;AAAA,kBACvC,OAAO;AACL,4BAAQ,KAAK,+BAA+B;AAC5C,wBAAI,iCAAQ,SAAS;AACnB,6BAAO,QAAQ,QAAG;AAznBpC,4BAAAF;AAynBuC,gCAAAA,MAAA,GAAG,cAAH,gBAAAA,IAAc,IAAI;AAAA,uBAAQ;AAAA,oBACjD,OAAO;AACL,6DAAQ,cAAR,mBAAmB,IAAI;AAAA,oBACzB;AAAA,kBACF;AACF,uBAAK,YAAY,OAAO;AAAA,gBAC1B,CAAC;AAAA,cACH,CAAC;AACD,cAAAE,IAAG,GAAG,YAAY,QAAQ,WAAU;AAClC,gBAAAA,IAAG,SAAS,EAAE,YAAY,OAAO;AAAA,cACnC,CAAC;AAGD,cAAAA,IAAG,MAAM,EACN,SAAS,QAAQ,EACjB,MAAM,EAAE,WAAW,IAAI,CAAC,EACxB,OAAO;AAAA,YACZ,CAAC;AAAA,UACH,GAAG;AAGH,iBAAO,oBAAoB,KAAK,WAAU;AACxC,YAAAA,IAAG,MAAM,EAEN,SAAS,MAAM,EACf,MAAM;AAAA,cACL,SAAS;AAAA,cACT,UAAU;AAAA,cACV,aAAa;AAAA,cACb,kBAAkB;AAAA,cAClB,WAAW;AAAA,cACX,aAAa;AAAA,cACb,eAAe;AAAA,cACf,SAAS;AAAA,cACT,oBAAoB;AAAA;AAAA,cACpB,gBAAgB;AAAA,cAChB,gBAAgB;AAAA,cAChB,SAAS;AAAA,YACX,CAAC,EACA,SAAS,eAAe,EACxB,MAAM,EAAE,SAAS,QAAQ,UAAU,OAAO,CAAC,EAG3C,SAAS,MAAM,EACf,MAAM;AAAA,cACL,eAAe;AAAA,cACf,SAAS;AAAA,cACT,sBAAsB;AAAA,cACtB,YAAY;AAAA,cACZ,SAAS;AAAA,cACT,iBAAiB;AAAA,cACjB,aAAa;AAAA,cACb,yBAAyB;AAAA,cACzB,2BAA2B;AAAA,cAC3B,yBAAyB;AAAA,cACzB,2BAA2B;AAAA,cAC3B,SAAS;AAAA,YACX,CAAC,EAGA,SAAS,kBAAkB,EAC3B,MAAM,EAAE,cAAc,WAAW,sBAAsB,UAAU,CAAC,EAClE,SAAS,kBAAkB,EAC3B,MAAM,EAAE,cAAc,WAAW,sBAAsB,UAAU,CAAC,EAGlE,SAAS,sBAAsB,EAC/B,MAAM,EAAE,cAAc,UAAU,qBAAqB,CAAC,GAAE,CAAC,EAAE,CAAC,EAE5D,OAAO;AAGV,YAAAA,IAAG,GAAG,cAAc,WAAU;AAC5B,kBAAI,OAAO,sBAAuB,QAAO,sBAAsBA,KAAI,EAAC,UAAS,KAAK,SAAQ,GAAE,CAAC;AAAA,YAC/F,CAAC;AACD,gBAAI,SAAS,SAAS,SAAS,MAAM,OAAO;AAC1C,uBAAS,MAAM,MAAM,KAAK,WAAU;AAClC,oBAAI,OAAO,sBAAuB,QAAO,sBAAsBA,KAAI,EAAC,UAAS,KAAK,SAAQ,GAAE,CAAC;AAAA,cAC/F,CAAC;AAAA,YACH;AAEA,YAAAA,IAAG,GAAG,SAAS,MAAM,WAAW,MAAM,OAAO,aAAaA,GAAE,GAAG,CAAC,CAAC;AACjE,mBAAO,iBAAiB,UAAU,MAAM,sBAAsB,MAAM,OAAO,aAAaA,GAAE,CAAC,CAAC;AAC5F,mBAAO,iBAAiB,qBAAqB,MAAM,WAAW,MAAM,OAAO,aAAaA,GAAE,GAAE,GAAG,CAAC;AAChG,gBAAI,SAAS,SAAS,SAAS,MAAM,OAAO;AAC1C,uBAAS,MAAM,MAAM,KAAK,MAAM,WAAW,MAAM,OAAO,aAAaA,GAAE,GAAG,EAAE,CAAC;AAAA,YAC/E;AAAA,UACF,CAAC;AAGD,WAAC,WAAY;AACX,gBAAI,CAAC,OAAO,MAAO;AAEnB,qBAAS,IAAI,GAAG;AACd,qBAAQ,KAAK,OAAQ,KAAK,OAAO,CAAC,EAAE,QAAQ,WAAW,QAAM,EAAC,KAAI,SAAQ,KAAI,QAAO,KAAI,QAAO,KAAI,SAAQ,GAAE,CAAC,CAAE;AAAA,YACnH;AAFS;AAIT,qBAAS,iBAAiB,KAAKA,KAAI;AACjC,qBAAO,gCAAS,gBAAgB;AAC9B,sBAAM,KAAK,IAAI,oBAAoB,EAAE,eAAe,KAAK,CAAC;AAC1D,sBAAM,OAAOA,IAAG,UAAU,EAAE,sBAAsB;AAClD,sBAAM,IAAI,KAAK,IAAI,IAAI,GAAG,KAAM,GAAG,KAAK,GAAG,EAAG;AAC9C,sBAAM,IAAI,KAAK,IAAI,IAAI,GAAG,KAAM,GAAG,KAAK,GAAG,EAAG;AAC9C,sBAAM,OAAO,KAAK,QAAQ,GAAG,MAAM;AACnC,sBAAM,MAAO,KAAK,OAAQ,GAAG,MAAM;AACnC,uBAAO;AAAA,kBACL,OAAQ;AAAA,kBACR,QAAQ;AAAA,kBACR;AAAA,kBACA;AAAA,kBACA,OAAQ,OAAO;AAAA,kBACf,QAAQ,MAAO;AAAA,gBACjB;AAAA,cACF,GAfO;AAAA,YAgBT;AAjBS;AAmBT,qBAAS,aAAa,KAAK;AACzB,oBAAM,IAAI,IAAI,KAAK,KAAK,CAAC;AACzB,oBAAM,MAAM,SAAS,cAAc,KAAK;AACxC,kBAAI,MAAM;AACV,kBAAI,MAAM,aAAa;AACvB,kBAAI,MAAM,WAAW;AAErB,oBAAM,QAAQ,CAAC;AACf,kBAAI,IAAI,UAAU,IAAI,OAAO,GAAG;AAC9B,sBAAM,KAAK,kDAAkD,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,CAAC,QAAQ;AAC/F,oBAAI,EAAE,KAAM,OAAM,KAAK,QAAQ,IAAI,EAAE,IAAI,CAAC,QAAQ;AAClD,sBAAM,OAAO,CAAC;AACd,oBAAI,EAAE,KAAO,MAAK,KAAK,6BAAS,IAAI,EAAE,IAAI,CAAC,EAAE;AAC7C,oBAAI,EAAE,MAAO,MAAK,KAAK,6BAAS,IAAI,EAAE,KAAK,CAAC,EAAE;AAC9C,oBAAI,KAAK,OAAQ,OAAM,KAAK,0CAA0C,KAAK,KAAK,UAAK,CAAC,QAAQ;AAAA,cAChG,OAAO;AACL,sBAAM,KAAK,kDAAkD,IAAI,EAAE,SAAS,EAAE,CAAC,QAAQ;AACvF,sBAAM,OAAO,CAAC;AACd,oBAAI,EAAE,KAAM,MAAK,KAAK,mCAAU,EAAE,SAAS,MAAM,iCAAa,mCAAU,EAAE;AAC1E,oBAAI,OAAO,EAAE,WAAW,SAAU,MAAK,KAAK,uBAAQ,EAAE,MAAM,EAAE;AAC9D,oBAAI,OAAO,EAAE,eAAe,SAAU,MAAK,KAAK,mCAAU,EAAE,UAAU,qBAAM;AAC5E,oBAAI,KAAK,OAAQ,OAAM,KAAK,QAAQ,KAAK,KAAK,UAAK,CAAC,QAAQ;AAAA,cAC9D;AACA,kBAAI,YAAY,MAAM,KAAK,EAAE;AAC7B,qBAAO;AAAA,YACT;AAzBS;AA2BT,qBAAS,UAAU,KAAKA,KAAI;AAC1B,oBAAM,MAAM,MAAM,SAAS,MAAM;AAAA,gBAC/B,SAAS;AAAA,gBACT,UAAU,6BAAMA,IAAG,UAAU,GAAnB;AAAA,gBACV,WAAW;AAAA,gBACX,aAAa;AAAA,gBACb,OAAO;AAAA,gBACP,WAAW;AAAA,gBACX,wBAAwB,iBAAiB,KAAKA,GAAE;AAAA,gBAChD,SAAS,aAAa,GAAG;AAAA,gBACzB,OAAO;AAAA,gBACP,aAAa;AAAA,cACf,CAAC;AACD,qBAAO;AAAA,YACT;AAdS;AAgBT,qBAAS,eAAeA,KAAI;AAC1B,cAAAA,IAAG,GAAG,aAAa,cAAc,SAAU,KAAK;AAC9C,sBAAM,MAAM,IAAI;AAChB,oBAAI,IAAI,QAAQ,QAAQ,EAAG;AAC3B,sBAAM,MAAM,UAAU,KAAKA,GAAE;AAC7B,oBAAI,QAAQ,UAAU,GAAG;AACzB,oBAAI,KAAK;AAAA,cACX,CAAC;AAED,cAAAA,IAAG,GAAG,gBAAgB,cAAc,SAAU,KAAK;AACjD,sBAAM,MAAM,IAAI,OAAO,QAAQ,QAAQ;AACvC,oBAAI,KAAK;AACP,sBAAI,QAAQ;AACZ,sBAAI,OAAO,QAAQ,UAAU,IAAI;AAAA,gBACnC;AAAA,cACF,CAAC;AAED,oBAAM,iBAAiB,6BAAM;AAC3B,gBAAAA,IAAG,EAAE,YAAY,EAAE,QAAQ,SAAO;AAChC,wBAAM,MAAM,IAAI,QAAQ,QAAQ;AAChC,sBAAI,KAAK;AACP,wBAAI,SAAS,EAAE,wBAAwB,iBAAiB,KAAKA,GAAE,EAAE,CAAC;AAClE,wBAAI,IAAI,kBAAkB,IAAI,eAAe,OAAQ,KAAI,eAAe,OAAO;AAAA,kBACjF;AAAA,gBACF,CAAC;AAAA,cACH,GARuB;AASvB,cAAAA,IAAG,GAAG,0BAA0B,cAAc;AAC9C,cAAAA,IAAG,GAAG,cAAc,cAAc;AAClC,cAAAA,IAAG,GAAG,UAAU,cAAc,SAAU,KAAK;AAC3C,sBAAM,MAAM,IAAI,OAAO,QAAQ,QAAQ;AACvC,oBAAI,IAAK,KAAI,QAAQ;AAAA,cACvB,CAAC;AAAA,YACH;AAhCS;AAkCT,mBAAO,oBAAoB,KAAK,WAAU;AAAE,6BAAeA,GAAE;AAAA,YAAG,CAAC;AAAA,UACnE,GAAG;AAEH,iBAAO,oBAAoB,KAAK,WAAU;AACxC,YAAAA,IAAG,GAAG,UAAU,QAAQ,OAAK;AA9zBnC;AA+zBQ,kBAAI,EAAE,OAAO,OAAO,GAAG;AACrB,kBAAE,OAAO,OAAO,EAAE,YAAY,WAAW;AAAA,cAC3C,OAAO;AACH,sBAAM,IAAI,EAAE,OAAO,KAAK;AACxB,oBAAI,qCAAU,cAAc;AAC1B,2BAAS,aAAa,GAAG,WAAW;AAAA,gBACtC,OAAO;AACL,0BAAQ,KAAK,+BAA+B;AAC5C,+CAAG,cAAH,mBAAc,IAAI;AAAA,gBACpB;AAAA,cACJ;AAAA,YACF,CAAC;AAAA,UACH,CAAC;AAED,gBAAM,YAAY,SAAS,eAAe,QAAQ;AAElD,gBAAM,kBAAkB,SAAS,eAAe,eAAe;AAC/D,cAAI,gBAAiB,iBAAgB,iBAAiB,UAAU,MAAM;AACpE,kBAAM,MAAM,gBAAgB;AAC5B,gBAAI,CAAC,KAAK;AACR,kBAAI,UAAW,WAAU,UAAU,KAAK;AACxC;AAAA,YACF;AACA,gBAAI,OAAO,iBAAiB;AAC1B,oBAAM,MAAM,OAAO,gBAAgB,GAAG;AACtC,kBAAI,KAAK;AACP,oBAAI;AAAE,kBAAAA,IAAG,OAAO,GAAG,EAAE,IAAI;AAAA,gBAAG,SAAQ,GAAG;AAAE,0BAAQ,MAAM,iBAAiB,CAAC;AAAA,gBAAG;AAAA,cAC9E;AAAA,YACF;AAAA,UACF,CAAC;AAED,gBAAM,OAAO,SAAS,eAAe,OAAO;AAC5C,gBAAM,OAAO,SAAS,eAAe,OAAO;AAC5C,gBAAM,SAAS,SAAS,eAAe,SAAS;AAChD,gBAAM,SAAS,SAAS,eAAe,SAAS;AAChD,gBAAM,SAAS,SAAS,eAAe,GAAG;AAC1C,gBAAM,YAAY,SAAS,eAAe,YAAY;AACtD,gBAAM,WAAW,SAAS,eAAe,WAAW;AACpD,gBAAM,aAAa,SAAS,eAAe,aAAa;AACxD,gBAAM,OAAO,SAAS,eAAe,gBAAgB;AACrD,gBAAM,OAAO,SAAS,eAAe,eAAe;AACpD,gBAAM,UAAU,SAAS,eAAe,oBAAoB;AAC5D,gBAAM,UAAU,SAAS,eAAe,mBAAmB;AAE3D,mBAAS,eAAe;AACtB,YAAAA,IAAG,SAAS,EAAE,YAAY,QAAQ;AAClC,kBAAM,UAAU,EAAE,QAAQ,KAAK,UAAU,SAAS,KAAK;AACvD,kBAAM,UAAU,EAAE,QAAQ,KAAK,UAAU,SAAS,KAAK;AACvD,kBAAM,WAAW,SAAS,OAAO,QAAQ;AACzC,kBAAM,YAAY,SAAS,OAAO,UAAU;AAE5C,YAAAA,IAAG,MAAM,EAAE,QAAQ,OAAK;AAl3B9B;AAm3BQ,oBAAM,SAAS,EAAE,KAAK,MAAM,MAAM,MAAM,UAAU;AAClD,oBAAM,UAAU,CAAC,YAAa,EAAE,OAAO,EAAE,KAAK,QAAQ,MAAM,YAAY,EAAE,OAAO,EAAE,KAAK,QAAQ,MAAM;AACtG,oBAAM,UAAU,CAAC,aAAa,EAAE,KAAK,YAAY,IAAI;AACrD,kBAAI,EAAE,UAAU,WAAW,UAAU;AACjC,oBAAI,qCAAU,cAAc;AAC1B,2BAAS,aAAa,GAAG,QAAQ;AAAA,gBACnC,OAAO;AACL,0BAAQ,KAAK,+BAA+B;AAC5C,+CAAG,cAAH,mBAAc,IAAI;AAAA,gBACpB;AAAA,cACJ;AAAA,YACF,CAAC;AAED,YAAAA,IAAG,MAAM,EAAE,QAAQ,OAAK;AAh4B9B;AAi4BQ,kBAAI,YAAY,EAAE,KAAK,QAAQ,MAAM,YAAY,EAAE,GAAG,MAAM,UAAU;AAClE,oBAAI,qCAAU,cAAc;AAC1B,2BAAS,aAAa,GAAG,QAAQ;AAAA,gBACnC,OAAO;AACL,0BAAQ,KAAK,+BAA+B;AAC5C,+CAAG,cAAH,mBAAc,IAAI;AAAA,gBACpB;AAAA,cACJ;AAAA,YACF,CAAC;AAED,mBAAO,aAAaA,GAAE;AAAA,UACxB;AAjCS;AAmCT,mBAAS,QAAQ,KAAK,KAAI;AACxB,gBAAI,OAAO,KAAI;AACb,kBAAI,cAAc,OAAO,IAAI,KAAK;AAClC,kBAAI,iBAAiB,SAAS,MAAM;AAAE,oBAAI,cAAc,OAAO,IAAI,KAAK;AAAA,cAAG,CAAC;AAAA,YAC9E;AAAA,UACF;AALS;AAMT,kBAAQ,MAAM,OAAO;AACrB,kBAAQ,MAAM,OAAO;AACrB,mBAAS,mBAAkB;AACzB,YAAAA,IAAG,MAAM,EAAE,YAAY,QAAQ;AAC/B,kBAAM,IAAI,OAAO,OAAO,KAAK,KAAK,IAAI;AACtC,kBAAM,IAAI,OAAO,OAAO,KAAK,KAAK,IAAI;AACtC,YAAAA,IAAG,MAAM,EAAE,QAAQ,OAAK;AA15B9B;AA25BQ,kBAAI,EAAE,KAAK,QAAQ,IAAI,KAAK,EAAE,KAAK,YAAY,IAAI,GAAG;AAClD,oBAAI,qCAAU,cAAc;AAC1B,2BAAS,aAAa,GAAG,QAAQ;AAAA,gBACnC,OAAO;AACL,0BAAQ,KAAK,+BAA+B;AAC5C,+CAAG,cAAH,mBAAc,IAAI;AAAA,gBACpB;AAAA,cACJ;AAAA,YACF,CAAC;AACD,mBAAO,aAAaA,GAAE;AAAA,UACxB;AAfS;AAgBT,cAAI,KAAM,MAAK,iBAAiB,SAAS,kBAAkB,EAAC,SAAQ,KAAI,CAAC;AACzE,cAAI,KAAM,MAAK,iBAAiB,SAAS,kBAAkB,EAAC,SAAQ,KAAI,CAAC;AAEzE,cAAI,KAAM,MAAK,iBAAiB,SAAS,MAAM;AAAE,iBAAK,UAAU,OAAO,KAAK;AAAG,yBAAa;AAAA,UAAG,CAAC;AAChG,cAAI,KAAM,MAAK,iBAAiB,SAAS,MAAM;AAAE,iBAAK,UAAU,OAAO,KAAK;AAAG,yBAAa;AAAA,UAAG,CAAC;AAChG,cAAI,OAAQ,QAAO,iBAAiB,UAAU,YAAY;AAC1D,cAAI,OAAQ,QAAO,iBAAiB,UAAU,YAAY;AAC1D,uBAAa;AACb,2BAAiB;AAEjB,cAAI,QAAQ;AACV,mBAAO,iBAAiB,SAAS,MAAM;AAj7B7C;AAk7BQ,cAAAA,IAAG,SAAS,EAAE,YAAY,OAAO;AACjC,cAAAA,IAAG,MAAM,EAAE,YAAY,aAAa;AACpC,oBAAM,MAAM,OAAO,MAAM,KAAK;AAC9B,kBAAI,KAAK;AACP,oBAAI;AACJ,oBAAI;AACF,uBAAK,IAAI,OAAO,KAAK,GAAG;AAAA,gBAC1B,SAAS,KAAK;AACZ;AAAA,gBACF;AACA,sBAAM,WAAWA,IAAG,MAAM;AACxB,oBAAI,qCAAU,cAAc;AAC1B,2BAAS,aAAa,UAAU,OAAO;AAAA,gBACzC,OAAO;AACL,0BAAQ,KAAK,+BAA+B;AAC5C,sBAAI,qCAAU,SAAS;AACrB,6BAAS,QAAQ,QAAG;AAl8BpC,0BAAAF;AAk8BuC,8BAAAA,MAAA,GAAG,cAAH,gBAAAA,IAAc,IAAI;AAAA,qBAAQ;AAAA,kBACnD,OAAO;AACL,+DAAU,cAAV,mBAAqB,IAAI;AAAA,kBAC3B;AAAA,gBACF;AACF,sBAAM,WAAWE,IAAG,MAAM;AACxB,oBAAI,qCAAU,cAAc;AAC1B,2BAAS,aAAa,UAAU,OAAO;AAAA,gBACzC,OAAO;AACL,0BAAQ,KAAK,+BAA+B;AAC5C,sBAAI,qCAAU,SAAS;AACrB,6BAAS,QAAQ,QAAG;AA78BpC,0BAAAF;AA68BuC,8BAAAA,MAAA,GAAG,cAAH,gBAAAA,IAAc,IAAI;AAAA,qBAAQ;AAAA,kBACnD,OAAO;AACL,+DAAU,cAAV,mBAAqB,IAAI;AAAA,kBAC3B;AAAA,gBACF;AACF,sBAAM,UAAUE,IAAG,MAAM,EAAE,OAAO,OAAK,GAAG,KAAK,EAAE,KAAK,OAAO,CAAC,CAAC;AAC/D,wBAAQ,YAAY,OAAO;AACzB,oBAAI,qCAAU,cAAc;AAC1B,2BAAS,aAAa,SAAS,aAAa;AAAA,gBAC9C,OAAO;AACL,0BAAQ,KAAK,+BAA+B;AAC5C,sBAAI,mCAAS,SAAS;AACpB,4BAAQ,QAAQ,QAAG;AAz9BnC,0BAAAF;AAy9BsC,8BAAAA,MAAA,GAAG,cAAH,gBAAAA,IAAc,IAAI;AAAA,qBAAc;AAAA,kBACxD,OAAO;AACL,6DAAS,cAAT,mBAAoB,IAAI;AAAA,kBAC1B;AAAA,gBACF;AACF,wBAAQ,eAAe,EAAE,YAAY,OAAO;AAAA,cAC9C;AAAA,YACF,CAAC;AAAA,UACH;AAEA,cAAI,SAAU,UAAS,iBAAiB,SAAS,MAAM;AAAE,0BAAc;AAAG,gBAAI,WAAY,YAAW,OAAO;AAAA,UAAM,CAAC;AAEnH,mBAAS,gBAAgB;AACvB,gBAAI,CAAC,aAAa,CAAC,OAAO,cAAe;AACzC,sBAAU,YAAY;AACtB,kBAAM,SAAS,OAAO,cAAcE,GAAE,KAAK,CAAC;AAC1C,mBAAO,QAAQ,WAAS;AACtB,oBAAM,KAAK,SAAS,cAAc,IAAI;AACtC,oBAAM,UAAU,MAAM,WAAW,CAAC,GAAG,IAAI,QAAMA,IAAG,eAAe,EAAE,EAAE,KAAK,OAAO,KAAK,EAAE;AACxF,oBAAM,YAAY,MAAM,WAAW,CAAC,GAAG,OAAO,QAAMA,IAAG,eAAe,EAAE,EAAE,KAAK,MAAM,MAAM,GAAG,EAAE;AAChG,oBAAM,OAAO,WAAW,MAAM,IAAI,MAAM;AACxC,iBAAG,cAAc,GAAG,IAAI,KAAK,OAAO,KAAK,UAAU,CAAC;AACpD,iBAAG,MAAM,SAAS;AAClB,iBAAG,iBAAiB,SAAS,MAAM;AACjC,gBAAAA,IAAG,SAAS,EAAE,YAAY,WAAW;AACrC,sBAAM,MAAMA,IAAG,WAAW;AAC1B,iBAAC,MAAM,WAAW,CAAC,GAAG,QAAQ,QAAM;AAn/BhD;AAo/Bc,wBAAM,IAAIA,IAAG,eAAe,EAAE;AAC5B,sBAAI,qCAAU,cAAc;AAC1B,6BAAS,aAAa,GAAG,WAAW;AAAA,kBACtC,OAAO;AACL,4BAAQ,KAAK,+BAA+B;AAC5C,iDAAG,cAAH,mBAAc,IAAI;AAAA,kBACpB;AACF,sBAAI,MAAM,CAAC;AAAA,gBACb,CAAC;AACD,iBAAC,MAAM,WAAW,CAAC,GAAG,QAAQ,QAAM;AA7/BhD;AA8/Bc,wBAAM,IAAIA,IAAG,eAAe,EAAE;AAC5B,sBAAI,qCAAU,cAAc;AAC1B,6BAAS,aAAa,GAAG,WAAW;AAAA,kBACtC,OAAO;AACL,4BAAQ,KAAK,+BAA+B;AAC5C,iDAAG,cAAH,mBAAc,IAAI;AAAA,kBACpB;AACF,sBAAI,MAAM,CAAC;AAAA,gBACb,CAAC;AACD,gBAAAA,IAAG,IAAI,KAAK,EAAE;AAAA,cAChB,CAAC;AACD,wBAAU,YAAY,EAAE;AAAA,YAC1B,CAAC;AAAA,UACL;AAtCS;AAwCT,gBAAM,cAAc,SAAS,eAAe,aAAa;AACzD,cAAI,aAAa;AACf,wBAAY,iBAAiB,UAAU,OAAK;AAC1C,oBAAM,OAAO,EAAE,OAAO,MAAM,CAAC;AAC7B,kBAAI,CAAC,KAAM;AACX,oBAAM,SAAS,IAAI,WAAW;AAC9B,qBAAO,SAAS,QAAM;AACpB,oBAAI;AACF,wBAAM,OAAO,KAAK,MAAM,GAAG,OAAO,MAAM;AACxC,wBAAMC,UAAS,KAAK,UAAU,CAAC;AAC/B,sBAAI,aAAa;AACf,gCAAY,YAAY;AACxB,oBAAAA,QAAO,QAAQ,OAAK;AAClB,4BAAM,MAAM,SAAS,cAAc,QAAQ;AAC3C,0BAAI,QAAQ,EAAE;AACd,0BAAI,cAAc,EAAE;AACpB,kCAAY,YAAY,GAAG;AAAA,oBAC7B,CAAC;AAAA,kBACH;AACA,wBAAM,MAAM,CAAC;AACb,kBAAAA,QAAO,QAAQ,OAAK,IAAI,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,OAAO,EAAE,OAAO,SAAS,KAAK,GAAG,SAAS,iBAAiB,CAAC,CAAC;AAC9G,mBAAC,KAAK,SAAS,CAAC,GAAG,QAAQ,OAAK,IAAI,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,OAAO,EAAE,OAAO,QAAQ,EAAE,OAAO,MAAM,EAAE,MAAM,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;AAC7H,mBAAC,KAAK,SAAS,CAAC,GAAG,QAAQ,CAACL,IAAG,QAAQ,IAAI,KAAK;AAAA,oBAC9C,MAAM;AAAA,sBACJ,IAAI,IAAI,GAAG;AAAA,sBACX,QAAQA,GAAE;AAAA,sBACV,QAAQA,GAAE;AAAA,sBACV,OAAOA,GAAE;AAAA,sBACT,MAAMA,GAAE;AAAA,sBACR,QAAQA,GAAE,UAAU;AAAA,sBACpB,YAAYA,GAAE,cAAc;AAAA,oBAC9B;AAAA,oBACA,SAASA,GAAE,SAAS,MAAM,QAAQ;AAAA,kBACpC,CAAC,CAAC;AACF,kBAAAI,IAAG,SAAS,EAAE,OAAO;AACrB,kBAAAA,IAAG,IAAI,GAAG;AACV,4BAAU,KAAK;AACf,mCAAiB;AAAA,gBACnB,SAAS,KAAK;AACZ,0BAAQ,MAAM,sBAAsB,GAAG;AAAA,gBACzC;AAAA,cACF;AACA,qBAAO,WAAW,IAAI;AAAA,YACxB,CAAC;AAAA,UACH;AAEA,gBAAM,SAAS,SAAS,eAAe,QAAQ;AAC/C,cAAI,QAAQ;AACV,kBAAM,QAAQ;AAAA,cACZ;AAAA,cACA;AAAA,cACA;AAAA,YACF;AACA,mBAAO,QAAQ,OAAK,MAAM,KAAK,2CAA2C,EAAE,KAAK,sCAAsC,EAAE,KAAK,SAAS,EAAE,EAAE,SAAS,CAAC;AACrJ,mBAAO,YAAY,MAAM,KAAK,EAAE;AAAA,UAClC;AAEA,gBAAM,WAAW,SAAS,eAAe,OAAO;AAChD,gBAAM,WAAW,SAAS,eAAe,OAAO;AAChD,gBAAM,aAAa,SAAS,eAAe,SAAS;AACpD,gBAAM,SAAS,SAAS,eAAe,SAAS;AAChD,gBAAM,WAAW,SAAS,eAAe,WAAW;AACpD,gBAAM,YAAY,SAAS,eAAe,gBAAgB;AAC1D,gBAAM,QAAQ,SAAS,eAAe,QAAQ;AAC9C,gBAAM,SAAS,SAAS,eAAe,SAAS;AAChD,gBAAM,SAAS,SAAS,eAAe,SAAS;AAChD,gBAAM,WAAW,SAAS,eAAe,WAAW;AACpD,gBAAM,UAAU,SAAS,eAAe,UAAU;AAClD,gBAAM,YAAY,SAAS,eAAe,YAAY;AACtD,gBAAM,UAAU,SAAS,eAAe,UAAU;AAClD,gBAAM,UAAU,SAAS,eAAe,UAAU;AAClD,gBAAM,WAAW,SAAS,eAAe,WAAW;AACpD,gBAAM,UAAU,SAAS,eAAe,UAAU;AAClD,gBAAM,eAAe,SAAS,eAAe,eAAe;AAC5D,cAAI,mBAAmB;AACvB,cAAI,kBAAkB;AACtB,gBAAM,SAAS,IAAI,OAAO,uBAAuB;AACjD,iBAAO,YAAY,EAAE,KAAK,OAAO,CAAC;AAClC,gBAAM,SAAS,SAAS,eAAe,SAAS;AAChD,gBAAM,SAAS,SAAS,eAAe,SAAS;AAChD,gBAAM,WAAW,SAAS,eAAe,WAAW;AAEpD,mBAAS,WAAW,OAAO,QAAQ;AACjC,gBAAI,SAAS,QAAQ;AACnB,qBAAO,cAAc,MAAM;AAC3B,oBAAM,iBAAiB,SAAS,MAAM;AACpC,uBAAO,cAAc,MAAM;AAAA,cAC7B,CAAC;AAAA,YACH;AAAA,UACF;AAPS;AAQT,qBAAW,UAAU,MAAM;AAC3B,qBAAW,UAAU,MAAM;AAC3B,qBAAW,YAAY,QAAQ;AAE/B,gBAAM,UAAU,UAAU,QAAQ,cAAc,OAAO,IAAI;AAC3D,mBAAS,uBAAuB;AAC9B,gBAAI,CAAC,QAAS;AACd,oBAAQ,YAAY;AACpB,kBAAM,MAAM,aAAa;AACzB,mBAAO,QAAQ,GAAG,EAAE,QAAQ,CAAC,CAAC,MAAM,CAAC,MAAM;AACzC,oBAAM,KAAK,SAAS,cAAc,IAAI;AACtC,iBAAG,YAAY,OAAO,IAAI,YAAY,EAAE,GAAG,YAAY,EAAE,GAAG,YAAY,EAAE,KAAK;AAC/E,iBAAG,iBAAiB,SAAS,MAAM;AACjC,mCAAmB;AACnB,sBAAM,KAAK,QAAQ,QAAQ,EAAE,QAAQ,OAAK,EAAE,UAAU,OAAO,UAAU,CAAC;AACxE,qDAAU,aAAa,IAAI;AAAA,cAC7B,CAAC;AACD,sBAAQ,YAAY,EAAE;AAAA,YACxB,CAAC;AAAA,UACH;AAdS;AAeT,+BAAqB;AAErB,cAAI,MAAO,OAAM,iBAAiB,SAAS,MAAM;AAC/C,+BAAmB;AACnB,0BAAc;AACd,gBAAI,QAAS,OAAM,KAAK,QAAQ,QAAQ,EAAE,QAAQ,OAAK,EAAE,UAAU,OAAO,UAAU,CAAC;AAAA,UACvF,CAAC;AAED,cAAI,OAAQ,QAAO,iBAAiB,SAAS,MAAM;AACjD,kBAAM,OAAO,OAAO,iBAAiB,oBAAoB,EAAE;AAC3D,gBAAI,CAAC,KAAM;AACX,kBAAM,MAAM,aAAa;AACzB,gBAAI,IAAI,IAAI;AAAA,cACV,KAAK,WAAW,SAAS,KAAK;AAAA,cAC9B,KAAK,WAAW,SAAS,KAAK;AAAA,cAC9B,OAAO,SAAS,WAAW,KAAK;AAAA,YAClC;AACA,yBAAa,GAAG;AAChB,+BAAmB;AACnB,iCAAqB;AAAA,UACvB,CAAC;AAED,cAAI,OAAQ,QAAO,iBAAiB,SAAS,MAAM;AACjD,kBAAM,MAAM,aAAa;AACzB,gBAAI,CAAC,oBAAoB,CAAC,IAAI,gBAAgB,EAAG;AACjD,kBAAM,IAAI,IAAI,gBAAgB;AAC9B,qBAAS,QAAQ,EAAE;AACnB,qBAAS,QAAQ,EAAE;AACnB,uBAAW,QAAQ,EAAE;AACrB,qBAAS,cAAc,IAAI,MAAM,OAAO,CAAC;AACzC,qBAAS,cAAc,IAAI,MAAM,OAAO,CAAC;AACzC,uBAAW,cAAc,IAAI,MAAM,OAAO,CAAC;AAC3C,mBAAO,MAAM;AAAA,UACf,CAAC;AAED,cAAI,SAAU,UAAS,iBAAiB,SAAS,MAAM;AACrD,kBAAM,MAAM,aAAa;AACzB,gBAAI,oBAAoB,IAAI,gBAAgB,GAAG;AAC7C,qBAAO,IAAI,gBAAgB;AAC3B,2BAAa,GAAG;AAChB,iCAAmB;AACnB,mCAAqB;AAAA,YACvB;AAAA,UACF,CAAC;AAED,cAAI,UAAW,WAAU,iBAAiB,SAAS,MAAM;AACvD,gBAAI,CAAC,SAAU;AACf,kBAAM,QAAQ,SAAS,KAAK,UAAU,CAAC;AACvC,kBAAM,KAAK,SAAS,KAAK,YAAY,CAAC;AACtC,gBAAI,MAAM;AACV,qBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,oBAAM,MAAM,CAAC,MAAM,CAAC,CAAC;AACrB,kBAAI,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,EAAE,OAAO,GAAG,CAAC,EAAE,KAAK,CAAC,IAAI,EAAE;AACjD,kBAAI,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,EAAE,OAAO,GAAG,CAAC,EAAE,KAAK,CAAC,IAAI,EAAE;AACjD,qBAAO,IAAI,KAAK,GAAG,IAAI;AAAA,YACzB;AACA,kBAAM,OAAO,IAAI,KAAK,CAAC,GAAG,GAAG,EAAE,MAAM,WAAW,CAAC;AACjD,kBAAM,MAAM,IAAI,gBAAgB,IAAI;AACpC,kBAAM,IAAI,SAAS,cAAc,GAAG;AACpC,cAAE,OAAO;AACT,cAAE,WAAW;AACb,cAAE,MAAM;AACR,gBAAI,gBAAgB,GAAG;AAAA,UACzB,CAAC;AAED,iBAAO,YAAY,OAAK;AACtB,gBAAI,EAAE,KAAK,SAAS,YAAY;AAC9B,kBAAI,aAAc,cAAa,cAAc,KAAK,MAAM,EAAE,KAAK,QAAQ,GAAG,IAAI;AAAA,YAChF,WAAW,EAAE,KAAK,SAAS,YAAY;AACrC,kBAAI,aAAc,cAAa,cAAc;AAC7C,oBAAM,EAAE,OAAO,KAAK,KAAK,IAAI,IAAI,EAAE;AACnC,qBAAO,SAAS,KAAK,SAAS,SAAS,EAAG,UAAS,KAAK,SAAS,IAAI;AACrE,uBAAS,KAAK,SAAS;AACvB,uBAAS,KAAK,SAAS,KAAK;AAAA,gBAC1B,OAAO;AAAA,gBACP,MAAM;AAAA,gBACN,aAAa;AAAA,gBACb,MAAM;AAAA,cACR,CAAC;AACD,uBAAS,KAAK,SAAS,KAAK;AAAA,gBAC1B,OAAO;AAAA,gBACP,MAAM;AAAA,gBACN,aAAa;AAAA,gBACb,iBAAiB;AAAA,gBACjB,MAAM;AAAA,cACR,CAAC;AACD,uBAAS,KAAK,SAAS,KAAK;AAAA,gBAC1B,OAAO;AAAA,gBACP,MAAM;AAAA,gBACN,aAAa;AAAA,gBACb,iBAAiB;AAAA,gBACjB,MAAM;AAAA,cACR,CAAC;AACD,uBAAS,OAAO;AAChB,gCAAkB,EAAE,OAAO,KAAK,KAAK,IAAI;AAAA,YAC3C;AAAA,UACF;AAEA,cAAI,QAAS,SAAQ,iBAAiB,SAAS,CAAC,MAAM;AACpD,cAAE,eAAe;AACjB,kBAAM,QAAQ,UAAU;AACxB,kBAAM,QAAQ,EAAE,KAAK,WAAW,QAAQ,KAAK,GAAG,KAAK,WAAW,QAAQ,KAAK,GAAG,MAAM,WAAW,SAAS,KAAK,EAAE;AACjH,kBAAM,OAAO;AAAA,cACX,KAAK,WAAW,SAAS,KAAK;AAAA,cAC9B,KAAK,WAAW,SAAS,KAAK;AAAA,cAC9B,OAAO,SAAS,WAAW,KAAK;AAAA,YAClC;AACA,gBAAI,aAAc,cAAa,cAAc;AAC7C,mBAAO,YAAY,EAAE,KAAK,YAAY,OAAO,OAAO,KAAK,CAAC;AAAA,UAC5D,CAAC;AAED,gBAAM,WAAW,SAAS,eAAe,WAAW;AACpD,gBAAM,aAAa,SAAS,eAAe,aAAa;AACxD,gBAAM,aAAa,SAAS,eAAe,aAAa;AACxD,gBAAM,eAAe,SAAS,eAAe,eAAe;AAC5D,cAAI,YAAY,cAAc,cAAc,cAAc;AACxD,qBAAS,iBAAiB,SAAS,MAAM;AACvC,mDAAU,aAAa,UAAU;AACjC,yBAAW,UAAU,OAAO,QAAQ;AACpC,yBAAW,MAAM,UAAU;AAC3B,2BAAa,MAAM,UAAU;AAAA,YAC/B,CAAC;AACD,uBAAW,iBAAiB,SAAS,MAAM;AACzC,mDAAU,aAAa,YAAY;AACnC,uBAAS,UAAU,OAAO,QAAQ;AAClC,yBAAW,MAAM,UAAU;AAC3B,2BAAa,MAAM,UAAU;AAAA,YAC/B,CAAC;AAAA,UACH;AAEA,gBAAM,cAAc,SAAS,eAAe,cAAc;AAC1D,gBAAM,cAAc,SAAS,eAAe,cAAc;AAC1D,gBAAM,aAAa,SAAS,eAAe,aAAa;AACxD,cAAI,eAAe,aAAa;AAC9B,aAAC,UAAU,SAAS,CAAC,GAAG,QAAQ,OAAK;AACnC,oBAAM,MAAM,SAAS,cAAc,QAAQ;AAC3C,kBAAI,QAAQ,EAAE;AACd,kBAAI,cAAc,EAAE,SAAS,EAAE;AAC/B,0BAAY,YAAY,GAAG;AAAA,YAC7B,CAAC;AACD,wBAAY,iBAAiB,UAAU,MAAM;AAC3C,oBAAM,IAAI,UAAU,MAAM,KAAK,QAAM,GAAG,OAAO,YAAY,KAAK;AAChE,0BAAY,QAAQ,KAAK,EAAE,OAAO,EAAE,OAAO;AAC3C,kBAAI,WAAY,YAAW,cAAc;AAAA,YAC3C,CAAC;AACD,wBAAY,cAAc,IAAI,MAAM,QAAQ,CAAC;AAAA,UAC/C;AAEA,gBAAM,cAAc,SAAS,eAAe,cAAc;AAC1D,cAAI,YAAa,aAAY,iBAAiB,SAAS,MAAM;AAC3D,gBAAI;AACF,kBAAI,OAAO,EAAE,MAAM,YAAY,KAAK;AACpC,kBAAI,WAAY,YAAW,cAAc;AAAA,YAC3C,SAAS,KAAK;AACZ,kBAAI,WAAY,YAAW,cAAc,IAAI;AAAA,YAC/C;AAAA,UACF,CAAC;AAED,gBAAM,UAAU,SAAS,eAAe,UAAU;AAClD,cAAI,QAAS,SAAQ,iBAAiB,SAAS,WAAU;AACvD,gBAAG;AACD,kBAAI,OAAO,EAAE,MAAM,YAAY,KAAK;AACpC,kBAAI,IAAI,UAAU,MAAM,KAAK,SAAS,IAAG;AAAE,uBAAO,GAAG,OAAO,YAAY;AAAA,cAAO,CAAC;AAChF,kBAAI,EAAG,GAAE,OAAO,YAAY;AAC5B,yBAAW,SAAS;AACpB,6BAAe;AACf,kBAAI,aAAc,wBAAuB;AACzC,6BAAe,WAAU;AACvB,oBAAG;AACD,sBAAI,UAAU,SAAS,EAAE,KAAI,GAAG,KAAI,GAAG,OAAM,GAAG,OAAM,GAAG,CAAC;AAC1D,4BAAU,EAAE,OAAO,QAAQ,OAAO,UAAU,QAAQ,OAAO;AAC3D,qCAAmB,OAAO;AAC1B,sBAAI,WAAY,YAAW,cAAc;AAAA,gBAC3C,SAAO,GAAE;AAAE,sBAAI,WAAY,YAAW,cAAc,EAAE;AAAA,gBAAS;AAAA,cACjE,CAAC;AAAA,YACH,SAAO,KAAI;AAAE,kBAAI,WAAY,YAAW,cAAc,IAAI;AAAA,YAAS;AAAA,UACrE,CAAC;AAED,cAAI,QAAQ;AACV,mBAAO,iBAAiB,SAAS,WAAU;AACzC,6BAAe,WAAU;AACvB,oBAAG;AACD,sBAAI,SAAS;AAAA,oBACX,KAAK,WAAW,SAAS,KAAK;AAAA,oBAC9B,KAAK,WAAW,SAAS,KAAK;AAAA,oBAC9B,OAAO,SAAS,WAAW,OAAM,EAAE;AAAA,oBACnC,OAAO,WAAW,QAAQ,QAAQ,QAAQ,MAAM,SAAS,IAAI;AAAA,kBAC/D;AACA,sBAAI,MAAM,SAAS,MAAM;AACzB,qCAAmB,EAAE,OAAO,IAAI,OAAO,UAAU,UAAU,QAAQ,WAAW,CAAC,GAAG,UAAU,IAAI,OAAO,CAAC;AACxG,sBAAI,OAAO,iBAAkB,QAAO,iBAAiB,OAAO;AAAA,gBAC9D,SAAO,GAAE;AAAE,0BAAQ,MAAM,mBAAmB,CAAC;AAAA,gBAAG;AAAA,cAClD,CAAC;AAAA,YACH,CAAC;AAAA,UACH;AAGA,WAAC,WAAY;AACX,gBAAI,SAAS;AAGb,qBAAS,YAAY;AACnB,kBAAI;AAAE,uBAAO,KAAK,MAAM,aAAa,QAAQ,MAAM,KAAK,IAAI;AAAA,cAAG,SACzD,GAAE;AAAE,uBAAO,CAAC;AAAA,cAAG;AAAA,YACvB;AAHS;AAIT,qBAAS,UAAU,OAAO;AACxB,kBAAI,IAAI,UAAU;AAClB,uBAAS,KAAK,MAAO,GAAE,CAAC,IAAI,MAAM,CAAC;AACnC,2BAAa,QAAQ,QAAQ,KAAK,UAAU,CAAC,CAAC;AAAA,YAChD;AAJS;AAOT,qBAAS,yBAAyB;AAChC,kBAAIM,aAAY,SAAS,eAAe,QAAQ;AAChD,kBAAI,CAACA,WAAW,QAAO;AACvB,kBAAI,SAAS,SAAS,eAAe,YAAY;AACjD,kBAAI,OAAQ,QAAO;AAEnB,kBAAI,SAAS,SAAS,cAAc,QAAQ;AAC5C,qBAAO,KAAK;AACZ,qBAAO,aAAa,cAAa,yDAAY;AAE7C,kBAAI,QAAQ,SAAS,cAAc,QAAQ;AAC3C,oBAAM,QAAQ;AAAM,oBAAM,cAAc;AACxC,kBAAI,QAAQ,SAAS,cAAc,QAAQ;AAC3C,oBAAM,QAAQ;AAAM,oBAAM,cAAc;AACxC,qBAAO,YAAY,KAAK;AAAG,qBAAO,YAAY,KAAK;AAGnD,cAAAA,WAAU,sBAAsB,YAAY,MAAM;AAGlD,qBAAO,iBAAiB,UAAU,WAAY;AAC5C,oBAAI,QAAQ,SAAS,eAAe,QAAQ,KAAG,CAAC,GAAG,SAAS;AAC5D,0BAAU,EAAE,KAAK,OAAO,OAAO,QAAQ,KAAK,CAAC;AAC7C,oBAAI,OAAO,UAAW,QAAO,UAAU,MAAM,OAAO,KAAK;AAAA,cAC3D,CAAC;AAGD,cAAAA,WAAU,iBAAiB,UAAU,WAAY;AAC/C,oBAAI,OAAOA,WAAU;AACrB,oBAAI,OAAQ,SAAS,eAAe,YAAY,KAAG,CAAC,GAAG,SAAS;AAChE,0BAAU,EAAE,KAAU,QAAQ,KAAK,CAAC;AACpC,oBAAI,OAAO,UAAW,QAAO,UAAU,MAAM,GAAG;AAAA,cAClD,CAAC;AAED,qBAAO;AAAA,YACT;AAnCS;AAqCT,qBAAS,eAAe,KAAK,IAAG;AAC9B,qBAAO,IAAI,QAAQ,SAAS,KAAK,KAAI;AACnC,oBAAI,SAAS,eAAe,EAAE,KAAK,SAAS,cAAc,iBAAe,MAAI,IAAI,EAAG,QAAO,IAAI;AAC/F,oBAAI,IAAI,SAAS,cAAc,QAAQ;AACvC,kBAAE,KAAK;AAAI,kBAAE,MAAM;AAAK,kBAAE,QAAQ;AAClC,kBAAE,SAAS;AAAK,kBAAE,UAAU;AAC5B,yBAAS,KAAK,YAAY,CAAC;AAAA,cAC7B,CAAC;AAAA,YACH;AARS;AAST,2BAAe,gBAAgB,MAAK;AAClC,kBAAI,SAAS,OAAM;AACjB,sBAAM,eAAe,iCAAgC,SAAS;AAC9D,sBAAM,eAAe,mCAAkC,QAAQ;AAAA,cACjE,OAAO;AACL,sBAAM,eAAe,+BAA8B,WAAW;AAC9D,sBAAM,eAAe,qCAAoC,UAAU;AAAA,cACrE;AAAA,YACF;AARe;AAWf,aAAC,WAAU;AACT,kBAAI,gBAAgB,OAAO;AAE3B,qBAAO,YAAY,eAAe,MAAM,KAAI;AAC1C,oBAAIN,MAAKL,OAAM;AAAG,oBAAG,CAACK,IAAI;AAC1B,wBAAQ,QAAM,OAAO,YAAY;AACjC,sBAAO,QAAQ,SAAS,eAAe,YAAY,IAAI,SAAS,eAAe,YAAY,EAAE,QAAQ;AAErG,sBAAM,gBAAgB,IAAI;AAE1B,oBAAI;AACJ,oBAAI,SAAS,OAAO;AAClB,sBAAI,SAAU,QAAQ,OAAO,SAAS;AACtC,yBAAO;AAAA,oBACL,MAAM;AAAA,oBACN,6BAA6B;AAAA,oBAC7B,KAAK;AAAA,oBACL,SAAS;AAAA,oBACT,mBAAmB;AAAA,oBACnB,KAAK;AAAA,sBACH,WAAW;AAAA,sBACX,iBAAiB;AAAA,sBACjB,6CAA6C;AAAA,sBAC7C,wBAAwB;AAAA,sBACxB,2CAA2C;AAAA,sBAC3C,mBAAmB;AAAA,oBACrB;AAAA,kBACF;AAAA,gBACF,OAAO;AACL,sBAAI,UAAW,QAAQ,OAAO,OAAO;AACrC,yBAAO;AAAA,oBACL,MAAM;AAAA,oBACN;AAAA,oBACA,SAAS;AAAA,oBACT,SAAS;AAAA,oBACT,KAAK;AAAA,oBACL,SAAS;AAAA,oBACT,mBAAmB;AAAA,kBACrB;AAAA,gBACF;AAEA,gBAAAA,IAAG,OAAO,IAAI,EAAE,IAAI;AAEpB,gBAAAA,IAAG,KAAK,cAAc,WAAU;AAC9B,sBAAI,OAAO,sBAAuB,QAAO,sBAAsBA,KAAI,EAAC,UAAU,KAAK,SAAS,GAAE,CAAC;AAC/F,wCAAsB,MAAM,OAAO,aAAaA,GAAE,CAAC;AAAA,gBACrD,CAAC;AAAA,cACH;AAAA,YACF,GAAG;AAGH,qBAAS,kBAAkB;AACzB,kBAAI,KAAK,UAAU;AAGnB,kBAAIM,aAAY,SAAS,eAAe,QAAQ;AAChD,kBAAI,SAAY,SAAS,eAAe,YAAY,KAAK,uBAAuB;AAChF,kBAAIC,QAAY,SAAS,eAAe,gBAAgB;AACxD,kBAAIC,QAAY,SAAS,eAAe,eAAe;AACvD,kBAAI,IAAY,SAAS,eAAe,GAAG;AAC3C,kBAAIC,UAAY,SAAS,eAAe,SAAS;AACjD,kBAAI,SAAY,SAAS,iBAAiB,0BAA0B;AACpE,kBAAI,SAAY,SAAS,iBAAiB,0BAA0B;AACpE,kBAAI,SAAY,SAAS,eAAe,OAAO;AAC/C,kBAAI,SAAY,SAAS,eAAe,OAAO;AAG/C,kBAAI,GAAG,UAAUH,WAAW,CAAAA,WAAU,QAAQ,GAAG;AACjD,kBAAI,GAAG,OAAU,OAAW,QAAO,QAAW,GAAG;AAEjD,kBAAI,GAAG,KAAK;AACV,oBAAIC,SAAQ,OAAO,GAAG,IAAI,cAAc,YAAa,CAAAA,MAAK,QAAQ,GAAG,IAAI;AACzE,oBAAIC,SAAQ,OAAO,GAAG,IAAI,aAAc,YAAa,CAAAA,MAAK,QAAQ,GAAG,IAAI;AACzE,oBAAI,OAAO,GAAG,IAAI,QAAQ,WAAW;AACnC,sBAAI,OAAO,OAAQ,QAAO,QAAQ,SAAS,IAAG;AAAE,uBAAG,UAAU,GAAG,IAAI;AAAA,kBAAK,CAAC;AAC1E,sBAAI,OAAQ,QAAO,UAAU,OAAO,OAAO,CAAC,GAAG,IAAI,GAAG;AAAA,gBACxD;AACA,oBAAI,OAAO,GAAG,IAAI,QAAQ,WAAW;AACnC,sBAAI,OAAO,OAAQ,QAAO,QAAQ,SAAS,IAAG;AAAE,uBAAG,UAAU,GAAG,IAAI;AAAA,kBAAK,CAAC;AAC1E,sBAAI,OAAQ,QAAO,UAAU,OAAO,OAAO,CAAC,GAAG,IAAI,GAAG;AAAA,gBACxD;AACA,oBAAIC,WAAU,OAAO,GAAG,IAAI,UAAU,YAAa,CAAAA,QAAO,QAAQ,GAAG,IAAI;AACzE,oBAAI,UAAU,OAAQ,cAAa;AAAA,cACrC;AACA,kBAAI,KAAK,OAAO,GAAG,MAAM,SAAU,GAAE,QAAQ,GAAG;AAGhD,eAAC,UAAS,OAAO,EAAE,QAAQ,SAAS,IAAG;AACrC,oBAAIF,MAAO,CAAAA,MAAK,cAAc,IAAI,MAAM,EAAE,CAAC;AAC3C,oBAAIC,MAAO,CAAAA,MAAK,cAAc,IAAI,MAAM,EAAE,CAAC;AAC3C,oBAAI,EAAO,GAAE,cAAc,IAAI,MAAM,EAAE,CAAC;AACxC,oBAAIC,QAAO,CAAAA,QAAO,cAAc,IAAI,MAAM,EAAE,CAAC;AAC7C,oBAAIH,WAAW,CAAAA,WAAU,cAAc,IAAI,MAAM,QAAQ,CAAC;AAC1D,oBAAI,OAAW,QAAO,cAAc,IAAI,MAAM,QAAQ,CAAC;AACvD,uBAAO,QAAQ,SAAS,IAAG;AAAE,qBAAG,cAAc,IAAI,MAAM,QAAQ,CAAC;AAAA,gBAAG,CAAC;AACrE,uBAAO,QAAQ,SAAS,IAAG;AAAE,qBAAG,cAAc,IAAI,MAAM,QAAQ,CAAC;AAAA,gBAAG,CAAC;AAAA,cACvE,CAAC;AAGD,uBAAS,cAAc;AACrB,0BAAU;AAAA,kBACR,KAAK;AAAA,oBACH,WAAWC,QAAO,OAAOA,MAAK,KAAK,IAAI;AAAA,oBACvC,UAAWC,QAAO,OAAOA,MAAK,KAAK,IAAK;AAAA,oBACxC,KAAM,OAAO,SAAS,OAAO,CAAC,EAAE,UAAU,EAAE,UAAU,OAAO,UAAU,SAAS,KAAK;AAAA,oBACrF,KAAM,OAAO,SAAS,OAAO,CAAC,EAAE,UAAU,EAAE,UAAU,OAAO,UAAU,SAAS,KAAK;AAAA,oBACrF,OAAOC,UAASA,QAAO,QAAQ;AAAA,kBACjC;AAAA,gBACF,CAAC;AAAA,cACH;AAVS;AAWT,kBAAIF,MAAO,CAAAA,MAAK,iBAAiB,SAAS,WAAW;AACrD,kBAAIC,MAAO,CAAAA,MAAK,iBAAiB,SAAS,WAAW;AACrD,qBAAO,QAAQ,SAAS,IAAG;AAAE,mBAAG,iBAAiB,UAAU,WAAW;AAAA,cAAG,CAAC;AAC1E,qBAAO,QAAQ,SAAS,IAAG;AAAE,mBAAG,iBAAiB,UAAU,WAAW;AAAA,cAAG,CAAC;AAC1E,kBAAI,OAAQ,QAAO,iBAAiB,SAAS,WAAW;AACxD,kBAAI,OAAQ,QAAO,iBAAiB,SAAS,WAAW;AACxD,kBAAIC,QAAQ,CAAAA,QAAO,iBAAiB,UAAU,WAAW;AACzD,kBAAI,EAAG,GAAE,iBAAiB,SAAS,WAAU;AAAE,0BAAU,EAAE,GAAG,EAAE,MAAM,CAAC;AAAA,cAAG,CAAC;AAG3E,kBAAIH,WAAW,CAAAA,WAAU,iBAAiB,UAAU,WAAU;AAC5D,0BAAU,EAAE,QAAQA,WAAU,MAAM,CAAC;AAAA,cACvC,CAAC;AACD,kBAAI,OAAQ,QAAO,iBAAiB,UAAU,WAAU;AACtD,0BAAU,EAAE,KAAK,OAAO,MAAM,CAAC;AAAA,cACjC,CAAC;AAGC,qBAAO,oBAAoB,KAAK,WAAU;AACxC,oBAAI;AACJ,yBAAS,aAAa;AACpB,sBAAI,IAAIN,IAAG,KAAK;AAChB,sBAAI,IAAIA,IAAG,IAAI;AACf,4BAAU,EAAE,MAAM,GAAG,KAAK,EAAC,GAAE,EAAE,GAAG,GAAE,EAAE,EAAC,EAAE,CAAC;AAC1C,sCAAoB;AAAA,gBACtB;AALS;AAMT,yBAAS,eAAe;AACtB,sBAAI,kBAAmB;AACvB,sCAAoB,WAAW,YAAY,GAAG;AAAA,gBAChD;AAHS;AAIT,gBAAAA,IAAG,GAAG,YAAY,YAAY;AAAA,cAChC,CAAC;AAAA,YACL;AA3FS;AA8FT,gBAAI,SAAS,eAAe,WAAW;AACrC,uBAAS,iBAAiB,oBAAoB,WAAU;AACtD,uCAAuB;AACvB,gCAAgB;AAAA,cAClB,CAAC;AAAA,YACH,OAAO;AACL,qCAAuB;AACvB,8BAAgB;AAAA,YAClB;AAAA,UACF,GAAG;AAEH,gBAAM,aAAa;AACnB,cAAI,YAAY;AACd,uBAAW,iBAAiB,SAAS,WAAU;AAC7C,6BAAe,WAAU;AACvB,oBAAI;AACF,gCAAc;AACd,sBAAI,OAAO,iBAAkB,QAAO,iBAAiB,OAAO;AAAA,gBAC9D,SAAQ,GAAE;AAAE,0BAAQ,MAAM,CAAC;AAAA,gBAAG;AAAA,cAChC,CAAC;AAAA,YACH,CAAC;AAAA,UACH;AAAA,QACF,CAAC;AAED,SAAC,WAAU;AACT,mBAAS,eAAc;AACrB,gBAAI,KAAK,SAAS,eAAe,cAAc;AAC/C,gBAAI,CAAC,GAAI;AACT,gBAAI;AACF,kBAAI,OAAO,aAAa,QAAQ,sBAAsB;AACtD,kBAAI,KAAM,IAAG,QAAQ;AAAA,YACvB,SAAQ,GAAE;AAAA,YAAC;AACX,eAAG,iBAAiB,UAAU,WAAU;AACtC,qBAAO,iBAAiB,GAAG,KAAK;AAAA,YAClC,CAAC;AACD,gBAAI,GAAG,MAAO,QAAO,iBAAiB,GAAG,KAAK;AAAA,UAChD;AAXS;AAYT,cAAI,SAAS,eAAe,WAAW;AACrC,qBAAS,iBAAiB,oBAAoB,YAAY;AAAA,UAC5D,OAAO;AACL,yBAAa;AAAA,UACf;AAAA,QACF,GAAG;AAEH,eAAO,SAAS,EAAE,UAAU,WAAW,gCAAS,MAAM,KAAI;AAAE,iBAAO,OAAO,UAAU,MAAM,GAAG;AAAA,QAAG,GAAzD,cAA4D,eAAe,YAAY,aAAa;AAAA,MAC7I,GAAG;AAAA;AAAA;;;ACtkDH;AAAA;AAGA,4CAAO;AACP,sCAAO;AAGP,6BAAO;AAGP,UAAI;AAAE,YAAI,OAAO,MAAM,OAAO,GAAG,QAAS,QAAO,KAAK;AAAA,MAAW,SAAS,GAAG;AAAA,MAAC;AAG9E,OAAC,gCAAS,SAAQ;AAblB;AAcE,cAAM,OAAK,YAAO,aAAP,mBAAiB,OAAM,OAAO;AACzC,YAAI,MAAM,OAAO,GAAG,UAAU,YAAY;AACxC,iBAAO,WAAW,OAAO,YAAY,CAAC;AACtC,iBAAO,SAAS,KAAK;AACrB,mBAAS,cAAc,IAAI,YAAY,aAAa,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC;AACvE;AAAA,QACF;AACA,8BAAsB,MAAM;AAAA,MAC9B,GATC,WASE;AAAA;AAAA;",
  "names": ["getCy", "e", "buildCy", "_a", "_b", "cy", "groups", "model", "_c", "_d", "_e", "layoutSel", "wMin", "dMax", "fGroup"]
}

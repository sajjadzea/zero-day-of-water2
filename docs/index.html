<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>wesh360</title>
    <link rel="stylesheet" href="assets/tailwind.css" />
    <link rel="stylesheet" href="fonts/fonts.css" />
    <link rel="stylesheet" href="page/landing/landing.css" />
    <script src="assets/persian-digits.js" defer></script>
</head>
<body class="min-h-screen bg-gray-100 flex items-center justify-center p-6">
  <img src="page/landing/logo2.jfif" alt="لوگوی wesh360" class="logo-fixed" />
  <main class="w-full text-center space-y-12">
    <h1 class="welcome-text">به wesh360 خوش آمدید</h1>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 max-w-3xl mx-auto">
        <a href="water/" data-sector="water" class="landing-option bg-white rounded-xl p-8 flex flex-col items-center text-lg font-bold text-slate-700">
          <span class="text-5xl mb-4">💧</span>
          آب
        </a>
        <a href="electricity/" data-sector="electricity" class="landing-option bg-white rounded-xl p-8 flex flex-col items-center text-lg font-bold text-slate-700">
          <span class="text-5xl mb-4">⚡</span>
          برق
        </a>
        <a href="gas/" data-sector="gas" class="landing-option bg-white rounded-xl p-8 flex flex-col items-center text-lg font-bold text-slate-700">
          <span class="text-5xl mb-4">🛢</span>
          گاز و فرآورده‌های نفتی
        </a>
      </div>
      <a id="quick-entry" href="#" class="hidden landing-option bg-blue-600 text-white rounded-xl py-4 px-8 inline-block font-bold"></a>
  </main>
  <div id="curtain" class="curtain hidden"><div class="curtain-half left"></div><div class="curtain-half right"></div></div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      function animateAndNavigate(e) {
        e.preventDefault();
        var el = e.currentTarget;
        var sector = el.getAttribute('data-sector');
        if (sector) {
          localStorage.setItem('sector', sector);
        }
        var curtain = document.getElementById('curtain');
        curtain.classList.remove('hidden');
        void curtain.offsetWidth; // force reflow to ensure transition
        curtain.classList.add('open');
        var halves = curtain.querySelectorAll('.curtain-half');
        var remaining = halves.length;
        var navigated = false;
        var timeout = setTimeout(function () {
          if (!navigated) {
            navigated = true;
            window.location.href = el.href;
          }
        }, 1000);
        halves.forEach(function (half) {
          half.addEventListener('transitionend', function () {
            if (navigated) return;
            remaining--;
            if (remaining === 0) {
              navigated = true;
              clearTimeout(timeout);
              window.location.href = el.href;
            }
          }, { once: true });
        });
      }

      document.querySelectorAll('[data-sector]').forEach(function (el) {
        el.addEventListener('click', animateAndNavigate);
      });

      var sector = localStorage.getItem('sector');
      if (sector) {
        var names = { water: 'آب', electricity: 'برق', gas: 'گاز و فرآورده‌های نفتی' };
        var quick = document.getElementById('quick-entry');
        quick.href = sector + '/';
        quick.textContent = 'ورود سریع به ' + (names[sector] || sector);
        quick.setAttribute('data-sector', sector);
        quick.classList.remove('hidden');
        quick.addEventListener('click', animateAndNavigate);
      }
    });
  </script>
</body>
</html>

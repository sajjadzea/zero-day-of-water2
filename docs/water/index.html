<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <base href="..">
    <meta charset="UTF-8">
    <meta http-equiv="Content-Language" content="fa-IR">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:image" content="https://wesh360.ir/page/landing/logo2.jfif">
    <meta property="og:image:secure_url" content="https://wesh360.ir/page/landing/logo2.jfif">
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:alt" content="wesh360 â€“ ØªØµÙˆÛŒØ± Ø´Ø§Ø®Øµ ØµÙØ­Ù‡">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://wesh360.ir/page/landing/logo2.jfif">
    <title>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙˆØ¶Ø¹ÛŒØª Ø¢Ø¨ Ù…Ø´Ù‡Ø¯ (Ù…Ø¬Ù‡Ø² Ø¨Ù‡ Gemini)</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='30' fill='%231f7aff'/%3E%3Cpath d='M20 36c8 4 16-4 24 0' stroke='white' stroke-width='4' fill='none'/%3E%3C/svg%3E" />
      <link rel="stylesheet" href="assets/tailwind.css">
      <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
      <link rel="stylesheet" href="assets/styles.css">
      <style>
          body { background-color: #f0f4f8; }
        .main-title { font-weight: 800; color: #1e3a8a; }
        /* --- Cards --- */
        .card-row {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
        }
        .card {
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 8px 20px rgba(0,0,0,.05);
            padding: 1.5rem;
            flex: 1;
            min-width: 280px;
        }

        .footprint-card {
            background-color: #FFFBEA;
            border: 1px solid #F5EAC2;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .simulator-card {
            background-color: #E6FAF0;
            border: 1px solid #C8EEDA;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        @media (max-width: 768px) {
            .card-row {
                flex-direction: column;
            }
        }
        .water-drop-container { position: relative; width: 100px; height: 100px; margin: 0 auto; }
        .water-drop-background { position: absolute; bottom: 0; left: 0; right: 0; background-color: #3b82f6; border-radius: 0 0 50px 50px; transition: height 1s ease-out; }
        .water-drop-icon { position: absolute; top: 0; left: 0; width: 100%; height: 100%; -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M192 512C86 512 0 426 0 320C0 228.8 130.2 57.7 166.6 11.7C172.6 4.2 181.5 0 192 0s19.4 4.2 25.4 11.7C253.8 57.7 384 228.8 384 320c0 106-86 192-192 192z"/></svg>'); mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M192 512C86 512 0 426 0 320C0 228.8 130.2 57.7 166.6 11.7C172.6 4.2 181.5 0 192 0s19.4 4.2 25.4 11.7C253.8 57.7 384 228.8 384 320c0 106-86 192-192 192z"/></svg>'); -webkit-mask-repeat: no-repeat; mask-repeat: no-repeat; -webkit-mask-position: center; mask-position: center; background-color: #e0e0e0; }
        .days-left-card { background: linear-gradient(135deg, #ef4444, #b91c1c); color: white; }
        .rain-bar { background-color: #93c5fd; border-radius: .5rem; position: relative; }
        .rain-bar-fill { background-color: #1d4ed8; border-radius: .5rem; transition: height 1s ease-out; }
        .btn-gemini { background: linear-gradient(135deg, #4f46e5, #7c3aed); transition: all .3s ease; }
        .btn-gemini:hover { box-shadow: 0 0 20px rgba(79,70,229,.5); }
        input[type=range]{ -webkit-appearance:none; appearance:none; width:100%; height:8px; background:#d1d5db; border-radius:5px; outline:none; opacity:.7; transition:opacity .2s; }
        input[type=range]:hover{ opacity:1; }
        input[type=range]::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:24px; height:24px; background:#3b82f6; cursor:pointer; border-radius:50%; border:3px solid white; box-shadow:0 0 5px rgba(0,0,0,.2); }
        input[type=range]::-moz-range-thumb{ width:24px; height:24px; background:#3b82f6; cursor:pointer; border-radius:50%; border:3px solid white; box-shadow:0 0 5px rgba(0,0,0,.2); }
 codex/replace-logo-with-header2.jpg
        #out-footprint, #simulate-result, #solution-result {

        .site-logo {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 120px;
            height: auto;
            z-index: 1000;
        }

        #water-result, #simulate-result, #solution-result {
 main
            margin-top: .75rem;
            line-height: 1.9;
            font-size: .9rem;
        }
    </style>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/twemoji.min.js"
            integrity="sha512-3v3L9b5m9q2s0i6gQ0yq+8vJm3a6oI1mG2r3l0X3zv3Y6uFJq1Wc1q9kGmXlM3Yj6fxp2U7N7yqZtCz9D6Qy4A=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // Ù‡Ù…Ù‡ Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ SVG ØªÙˆÛŒÛŒØªØ± ØªØ¨Ø¯ÛŒÙ„ Ú©Ù† (Ø§Ø² Ø¬Ù…Ù„Ù‡ ğŸ‡®ğŸ‡·)
        if (window.twemoji) {
          twemoji.parse(document.body, { folder: 'svg', ext: '.svg' });
        }
      });
    </script>
</head>
<body class="p-4 sm:p-6 md:p-8">
    <a class="skip-link" href="#main">Ù¾Ø±Ø´ Ø¨Ù‡ Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ</a>
    <header class="w-full flex justify-center mt-4">
      <picture>
        <source srcset="header2.avif" type="image/avif">
        <source srcset="header2.webp" type="image/webp">
        <img src="header2.jpg" alt="Ù‡Ø¯Ø± Ø³Ø§ÛŒØª" class="max-w-full h-auto rounded-lg shadow-md" width="1584" height="396" loading="lazy">
      </picture>
    </header>
    <main id="main" class="max-w-7xl mx-auto">
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-extrabold main-title">ÙˆØ¶Ø¹ÛŒØª Ø¨Ø­Ø±Ø§Ù†ÛŒ Ø¢Ø¨ Ø¯Ø± Ù…Ø´Ù‡Ø¯</h1>
            <p class="text-slate-600 text-lg mt-4">Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: Ø´Ù†Ø¨Ù‡ 18Ù…Ø±Ø¯Ø§Ø¯ Û±Û´Û°Û´</p>
        </header>
        <section class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
            <div class="card days-left-card md:col-span-2 flex flex-col justify-center items-center text-center p-8" data-fa-digits>
                <i class="fas fa-hourglass-half fa-3x mb-4 opacity-75"></i>
                <h2 class="text-2xl font-bold mb-2">Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ ØªØ§ Ø±ÙˆØ² ØµÙØ± Ø¢Ø¨ÛŒ</h2>
                <p class="text-8xl font-extrabold" id="days-left">32</p>
                <p class="text-2xl font-bold">Ø±ÙˆØ²</p>
                <p class="mt-4 text-lg opacity-90">Ø§ÛŒÙ† ÛŒÚ© Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø­Ø¬Ù… Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ ÙØ¹Ù„ÛŒ Ø³Ø¯Ù‡Ø§ Ùˆ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù…ØµØ±Ù Ø±ÙˆØ²Ø§Ù†Ù‡ Ø§Ø³Øª.</p>
            </div>
            <div class="card flex flex-col justify-center items-center" data-fa-digits>
                <i class="fas fa-cloud-showers-heavy fa-3x mb-4 text-blue-500"></i>
                <h2 class="text-xl font-bold text-slate-800 mb-6 text-center">Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¨Ø§Ø±Ø´ Ø§Ù…Ø³Ø§Ù„ Ø¨Ø§ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø¨Ù„Ù†Ø¯Ù…Ø¯Øª</h2>
                <div class="w-full flex justify-around items-end h-48">
                    <div class="w-1/3 h-full flex flex-col justify-end items-center"><p class="font-bold text-blue-800 text-lg mb-1">123 <span class="text-sm">Ù…ÛŒÙ„ÛŒâ€ŒÙ…ØªØ±</span></p><div class="rain-bar w-16"><div class="rain-bar-fill" style="height: 59%;"></div></div><p class="mt-2 font-semibold text-slate-600">Ø³Ø§Ù„ Ø¢Ø¨ÛŒ Ø¬Ø§Ø±ÛŒ</p></div>
                    <div class="w-1/3 h-full flex flex-col justify-end items-center"><p class="font-bold text-slate-500 text-lg mb-1">208 <span class="text-sm">Ù…ÛŒÙ„ÛŒâ€ŒÙ…ØªØ±</span></p><div class="rain-bar w-16 bg-slate-300"><div class="rain-bar-fill bg-slate-500" style="height: 100%;"></div></div><p class="mt-2 font-semibold text-slate-600">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø¨Ù„Ù†Ø¯Ù…Ø¯Øª</p></div>
                </div>
            </div>
        </section>
        <section class="mb-12">
            <h2 class="text-3xl font-bold text-slate-800 text-center mb-8">Ù¾Ø§ÛŒØ´ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø³Ø¯Ù‡Ø§</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="card text-center" data-fa-digits><h3 class="text-2xl font-bold text-slate-700 mb-4">Ø³Ø¯ Ø¯ÙˆØ³ØªÛŒ</h3><div class="water-drop-container mb-4"><div class="water-drop-icon"></div><div class="water-drop-background" style="height: 5%;"></div></div><p class="text-5xl font-extrabold text-blue-600">5%</p><p class="text-slate-500 mt-2">Ø­Ø¬Ù…: Ø­Ø¯ÙˆØ¯ Û¶Ûµ Ù…ÛŒÙ„ÛŒÙˆÙ† Ù…ØªØ± Ù…Ú©Ø¹Ø¨</p><div class="mt-4 p-3 bg-amber-100 text-amber-800 rounded-lg text-sm font-semibold border border-amber-200"><i class="fas fa-exclamation-triangle mr-2"></i>Ù†ÛŒÙ…ÛŒ Ø§Ø² Ø§ÛŒÙ† Ø­Ø¬Ù… Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ ØªØ±Ú©Ù…Ù†Ø³ØªØ§Ù† Ø§Ø³Øª.</div></div>
                <div class="card text-center" data-fa-digits><h3 class="text-2xl font-bold text-slate-700 mb-4">Ø³Ø¯ Ø·Ø±Ù‚</h3><div class="water-drop-container mb-4"><div class="water-drop-icon"></div><div class="water-drop-background" style="height: 7%;"></div></div><p class="text-5xl font-extrabold text-blue-600">7%</p><p class="text-slate-500 mt-2">Ø­Ø¬Ù…: Ø­Ø¯ÙˆØ¯ Û² Ù…ÛŒÙ„ÛŒÙˆÙ† Ù…ØªØ± Ù…Ú©Ø¹Ø¨</p></div>
                <div class="card text-center" data-fa-digits><h3 class="text-2xl font-bold text-slate-700 mb-4">Ø³Ø¯ Ú©Ø§Ø±Ø¯Ù‡</h3><div class="water-drop-container mb-4"><div class="water-drop-icon"></div><div class="water-drop-background" style="height: 0%;"></div></div><p class="text-5xl font-extrabold text-blue-600">â€”</p><p class="text-slate-500 mt-2">Ø­Ø¬Ù…: Ø­Ø¯ÙˆØ¯ Ûµ Ù…ÛŒÙ„ÛŒÙˆÙ† Ù…ØªØ± Ù…Ú©Ø¹Ø¨</p></div>
                <div class="card text-center" data-fa-digits><h3 class="text-2xl font-bold text-slate-700 mb-4">Ø³Ø¯ Ø§Ø±Ø¯Ø§Ú©</h3><div class="water-drop-container mb-4"><div class="water-drop-icon"></div><div class="water-drop-background" style="height: 0%;"></div></div><p class="text-5xl font-extrabold text-blue-600">â€”</p><p class="text-slate-500 mt-2">Ø­Ø¬Ù…: Ø­Ø¯ÙˆØ¯ Û´ Ù…ÛŒÙ„ÛŒÙˆÙ† Ù…ØªØ± Ù…Ú©Ø¹Ø¨</p></div>
            </div>
        </section>
        <section class="mb-12">
            <div class="card footprint-card">
                <h2 class="text-3xl font-bold text-slate-800 text-center mb-2">âœ¨ Ø±Ø¯Ù¾Ø§ÛŒ Ù¾Ù†Ù‡Ø§Ù† Ø¢Ø¨: ØºØ°Ø§ÛŒ Ø´Ù…Ø§ Ú†Ù‚Ø¯Ø± Ø¢Ø¨ Ù…ÛŒâ€ŒÙ†ÙˆØ´Ø¯ØŸ âœ¨</h2>
                <p class="text-center text-slate-600 mb-8">Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ ÛŒÚ© ÙˆØ¹Ø¯Ù‡ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯...</p>
                <div class="max-w-xl mx-auto">
                    <div class="mb-4">
                        <label for="food-input" class="font-semibold text-slate-700 block mb-2">Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ (Ø¨Ø§ Ú©Ø§Ù…Ø§ Ø¬Ø¯Ø§ Ú©Ù†ÛŒØ¯):</label>
                        <input type="text" id="food-input" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition" placeholder="Ù…Ø«Ø§Ù„: Ù†Ø§Ù†ØŒ Ú¯ÙˆØ´Øª Ú¯Ø§ÙˆØŒ Ú¯ÙˆØ¬Ù‡ ÙØ±Ù†Ú¯ÛŒ">
                    </div>
                    <div class="text-center">
                        <button id="calc-water-btn" type="button" class="btn-gemini bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg"><i class="fas fa-seedling ml-2" aria-hidden="true"></i><span>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø±Ø¯Ù¾Ø§ÛŒ Ø¢Ø¨</span></button>
                        <div id="ai-thinking" class="mt-4 hidden">
                            <div class="flex items-center justify-center gap-2 text-gray-700">
                                <span class="text-xl">âœ¨</span>
                                <span class="text-sm">Ø¯Ø± Ø­Ø§Ù„ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¨Ø§ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒâ€¦</span>
                                <span class="flex items-center gap-1">
                                    <span class="w-1.5 h-1.5 rounded-full bg-gray-500 animate-bounce"></span>
                                    <span class="w-1.5 h-1.5 rounded-full bg-gray-400 animate-bounce [animation-delay:120ms]"></span>
                                    <span class="w-1.5 h-1.5 rounded-full bg-gray-300 animate-bounce [animation-delay:240ms]"></span>
                                </span>
                            </div>
                            <div class="mt-3 h-8 w-20 rounded-full border-2 border-dashed border-purple-400 animate-spin mx-auto"></div>
                        </div>
                    </div>
                    <div id="water-result" data-fa-digits class="mt-4 p-4 bg-white/70 rounded-xl shadow-inner" aria-live="polite" tabindex="-1"></div>
                    <div id="water-share" class="mt-2"></div>
                </div>
            </div>
        </section>
        <section class="mb-12">
            <div class="card simulator-card">
                <h2 class="text-3xl font-bold text-slate-800 text-center mb-2">âœ¨ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² Ø¢ÛŒÙ†Ø¯Ù‡ Ø¢Ø¨ Ù…Ø´Ù‡Ø¯ âœ¨</h2>
                <p class="text-center text-slate-600 mb-8">Ø¨Ø¨ÛŒÙ†ÛŒØ¯ Ù…Ø´Ø§Ø±Ú©Øª Ø´Ù…Ø§ Ùˆ Ø±Ø­Ù…Øª Ø§Ù„Ù‡ÛŒ Ú†Ú¯ÙˆÙ†Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¢ÛŒÙ†Ø¯Ù‡ Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡Ø¯!</p>
                <div class="max-w-2xl mx-auto">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
                        <div><label for="cut-slider" class="font-semibold text-slate-700 block mb-2">Ú©Ø§Ù‡Ø´ Ù…ØµØ±Ù Ù‡Ù…Ú¯Ø§Ù†ÛŒ:</label><input type="range" id="cut-slider" min="0" max="30" value="10" class="w-full" aria-describedby="cut-value"><div class="text-center font-bold text-xl text-blue-600 mt-2"><span id="cut-value" data-fa-digits>10</span>%</div></div>
                        <div><label for="rain-slider" class="font-semibold text-slate-700 block mb-2">Ø¨Ø§Ø±Ø´ Ø¨Ø§Ø±Ø§Ù† Ø¯Ø± Ù…Ø§Ù‡ Ø¢ÛŒÙ†Ø¯Ù‡:</label><input type="range" id="rain-slider" min="0" max="50" value="5" class="w-full" aria-describedby="rain-value"><div class="text-center font-bold text-xl text-blue-600 mt-2"><span id="rain-value" data-fa-digits>5</span> Ù…ÛŒÙ„ÛŒâ€ŒÙ…ØªØ±</div></div>
                    </div>
                    <div class="text-center"><button id="simulate-btn" type="button" class="text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg bg-indigo-600 hover:bg-indigo-700"><i class="fas fa-chart-line ml-2" aria-hidden="true"></i>Ø¢ÛŒÙ†Ø¯Ù‡ Ø±Ø§ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ù†</button></div>
                    <div id="simulate-thinking" class="mt-4 hidden">
                      <div class="flex items-center gap-2 text-gray-700">
                        <span class="text-xl">âœ¨</span>
                        <span class="text-sm">Ø¯Ø± Ø­Ø§Ù„ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¨Ø§ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒâ€¦</span>
                        <span class="flex items-center gap-1">
                          <span class="w-1.5 h-1.5 rounded-full bg-gray-500 animate-bounce"></span>
                          <span class="w-1.5 h-1.5 rounded-full bg-gray-400 animate-bounce [animation-delay:120ms]"></span>
                          <span class="w-1.5 h-1.5 rounded-full bg-gray-300 animate-bounce [animation-delay:240ms]"></span>
                        </span>
                      </div>
                      <div class="mt-3 h-8 w-20 rounded-full border-2 border-dashed border-purple-400 animate-spin mx-auto"></div>
                    </div>
                    <div id="simulate-result" data-fa-digits class="mt-4" aria-live="polite" tabindex="-1"></div>
                    <div id="simulate-share" class="mt-2"></div>
                </div>
            </div>
        </section>
        <section class="mb-12">
            <div class="card bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 border-2 border-blue-200">
                <h2 class="text-3xl font-bold text-slate-800 text-center mb-2">âœ¨ Ø±Ø§Ù‡Ú©Ø§Ø±Ù‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ âœ¨</h2>
                <p class="text-center text-slate-600 mb-8">Ø¨Ø§ Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ú†Ù†Ø¯ Ø³ÙˆØ§Ù„ Ø³Ø§Ø¯Ù‡...</p>
                <div class="max-w-xl mx-auto">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6">
                        <div><label for="family-input" class="font-semibold text-slate-700 block mb-2">ØªØ¹Ø¯Ø§Ø¯ Ø§Ø¹Ø¶Ø§ÛŒ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡:</label><input type="number" id="family-input" value="4" inputmode="numeric" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"></div>
                        <div><label for="shower-input" class="font-semibold text-slate-700 block mb-2">Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ø­Ù…Ø§Ù… (Ø¯Ù‚ÛŒÙ‚Ù‡):</label><input type="number" id="shower-input" value="10" inputmode="numeric" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"></div>
                    </div>
                    <div class="text-center"><button id="solution-btn" type="button" class="btn-gemini text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg"><i class="fas fa-magic ml-2" aria-hidden="true"></i>Ø¨Ø±Ø§ÛŒÙ… Ø±Ø§Ù‡Ú©Ø§Ø± Ø¨Ø³Ø§Ø²</button></div>
                    <div id="solution-thinking" class="mt-4 hidden">
                      <div class="flex items-center gap-2 text-gray-700">
                        <span class="text-xl">âœ¨</span>
                        <span class="text-sm">Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ùˆ Ø³Ø§Ø®Øª Ø±Ø§Ù‡Ú©Ø§Ø±Ù‡Ø§â€¦</span>
                        <span class="flex items-center gap-1">
                          <span class="w-1.5 h-1.5 rounded-full bg-gray-500 animate-bounce"></span>
                          <span class="w-1.5 h-1.5 rounded-full bg-gray-400 animate-bounce [animation-delay:120ms]"></span>
                          <span class="w-1.5 h-1.5 rounded-full bg-gray-300 animate-bounce [animation-delay:240ms]"></span>
                        </span>
                      </div>
                      <div class="mt-3 h-8 w-20 rounded-full border-2 border-dashed border-blue-400 animate-spin mx-auto"></div>
                    </div>
                    <div id="solution-result" data-fa-digits class="mt-4 p-4 bg-white/70 rounded-xl shadow-inner" aria-live="polite" tabindex="-1"></div>
                    <div id="solution-share" class="mt-2"></div>
                </div>
            </div>
        </section>
        <section class="mb-12">
            <div class="card-row">
                <div class="card stats-card" data-fa-digits>
                    <h2 class="text-2xl font-bold text-slate-800 text-center mb-6">Ø¢Ø¨ Ù…Ø§ Ú©Ø¬Ø§ Ù…ØµØ±Ù Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ</h2>
                    <div class="space-y-5">
                        <div class="flex items-center">
                            <div class="w-16 text-center"><i class="fas fa-leaf fa-2x text-green-500"></i></div>
                            <div class="flex-1 mx-4">
                                <div class="flex justify-between mb-1"><span class="text-base font-semibold text-slate-700">Ú©Ø´Ø§ÙˆØ±Ø²ÛŒ</span><span class="text-sm font-bold text-green-600">57%</span></div>
                                <div class="w-full bg-gray-200 rounded-full h-4"><div class="bg-green-500 h-4 rounded-full" style="width: 57%"></div></div>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="w-16 text-center"><i class="fas fa-home fa-2x text-cyan-500"></i></div>
                            <div class="flex-1 mx-4">
                                <div class="flex justify-between mb-1"><span class="text-base font-semibold text-slate-700">Ø´Ø±Ø¨ Ùˆ Ø¨Ù‡Ø¯Ø§Ø´Øª</span><span class="text-sm font-bold text-cyan-600">31%</span></div>
                                <div class="w-full bg-gray-200 rounded-full h-4"><div class="bg-cyan-500 h-4 rounded-full" style="width: 31%"></div></div>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="w-16 text-center"><i class="fas fa-building fa-2x text-purple-500"></i></div>
                            <div class="flex-1 mx-4">
                                <div class="flex justify-between mb-1"><span class="text-base font-semibold text-slate-700">Ø®Ø¯Ù…Ø§Øª</span><span class="text-sm font-bold text-purple-600">7%</span></div>
                                <div class="w-full bg-gray-200 rounded-full h-4"><div class="bg-purple-500 h-4 rounded-full" style="width: 7%"></div></div>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="w-16 text-center"><i class="fas fa-industry fa-2x text-slate-500"></i></div>
                            <div class="flex-1 mx-4">
                                <div class="flex justify-between mb-1"><span class="text-base font-semibold text-slate-700">ØµÙ†Ø¹Øª</span><span class="text-sm font-bold text-slate-600">3%</span></div>
                                <div class="w-full bg-gray-200 rounded-full h-4"><div class="bg-slate-500 h-4 rounded-full" style="width: 3%"></div></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card tips-card">
                    <h2 class="text-2xl font-bold text-blue-800 text-center mb-6">Ú†Ú¯ÙˆÙ†Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… Ú©Ù…Ú© Ú©Ù†ÛŒÙ…ØŸ</h2>
                    <ul class="space-y-4 text-slate-700">
                        <li class="flex items-start"><i class="fas fa-faucet-drip fa-lg text-blue-500 mt-1 ml-4"></i><span><strong>Ø´ÛŒØ±Ù‡Ø§ÛŒ Ø¢Ø¨ Ú†Ú©Ù‡ Ú©Ù† Ø±Ø§ ØªØ¹Ù…ÛŒØ± Ú©Ù†ÛŒÙ….</strong> ÛŒÚ© Ú†Ú©Ù‡ Ú©ÙˆÚ†Ú© Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø¯Ù‡â€ŒÙ‡Ø§ Ù„ÛŒØªØ± Ø¢Ø¨ Ø±Ø§ Ù‡Ø¯Ø± Ø¯Ù‡Ø¯.</span></li>
                        <li class="flex items-start"><i class="fas fa-shower fa-lg text-blue-500 mt-1 ml-4"></i><span><strong>Ø²Ù…Ø§Ù† Ø­Ù…Ø§Ù… Ø±Ø§ Ú©ÙˆØªØ§Ù‡ Ú©Ù†ÛŒÙ….</strong> Ù‡Ø± Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¯ÙˆØ´ Ú¯Ø±ÙØªÙ† Ú©Ù…ØªØ±ØŒ Ø¨Ù‡ Ù…Ø¹Ù†ÛŒ ØµØ±ÙÙ‡â€ŒØ¬ÙˆÛŒÛŒ Ø¯Ø± Ù…ØµØ±Ù Ø¢Ø¨ Ø§Ø³Øª.</span></li>
                        <li class="flex items-start"><i class="fas fa-car fa-lg text-blue-500 mt-1 ml-4"></i><span><strong>Ø¨Ø±Ø§ÛŒ Ø´Ø³ØªÙ† Ù…Ø§Ø´ÛŒÙ† Ø§Ø² Ø³Ø·Ù„ Ø¢Ø¨ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ….</strong> Ø´Ø³ØªØ´Ùˆ Ø¨Ø§ Ø´Ù„Ù†Ú¯ Ø¢Ø¨ Ø²ÛŒØ§Ø¯ÛŒ Ø±Ø§ Ù‡Ø¯Ø± Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.</span></li>
                        <li class="flex items-start"><i class="fas fa-tooth fa-lg text-blue-500 mt-1 ml-4"></i><span><strong>Ù‡Ù†Ú¯Ø§Ù… Ù…Ø³ÙˆØ§Ú© Ø²Ø¯Ù† Ø´ÛŒØ± Ø¢Ø¨ Ø±Ø§ Ø¨Ø¨Ù†Ø¯ÛŒÙ….</strong> Ø§ÛŒÙ† Ú©Ø§Ø± Ø³Ø§Ø¯Ù‡ Ø¯Ø± Ù‡Ø± Ø¨Ø§Ø± Ù…Ø³ÙˆØ§Ú© Ø²Ø¯Ù† Ú†Ù†Ø¯ÛŒÙ† Ù„ÛŒØªØ± Ø¢Ø¨ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</span></li>
                    </ul>
                </div>
            </div>
        </section>
        <footer class="text-center mt-12 text-slate-500 text-sm">
            <p>Ú©Ù„ÛŒÙ‡ Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ø¯ÛŒ Ùˆ Ù…Ø¹Ù†ÙˆÛŒ Ø§ÛŒÙ† Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Â«Ø®Ø§Ù†Ù‡ Ù‡Ù…â€ŒØ§ÙØ²Ø§ÛŒÛŒ Ø§Ù†Ø±Ú˜ÛŒ Ùˆ Ø¢Ø¨ Ø§Ø³ØªØ§Ù† Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒÂ» Ø§Ø³Øª. <span class="emoji-flag" role="img" aria-label="Ù¾Ø±Ú†Ù… Ø§ÛŒØ±Ø§Ù†">ğŸ‡®ğŸ‡·</span></p>
            <p>Ø·Ø±Ø§Ø­ÛŒ Ùˆ ØªÙˆÙ„ÛŒØ¯: Ø®Ø§Ù†Ù‡ Ù‡Ù…â€ŒØ§ÙØ²Ø§ÛŒÛŒ Ø§Ù†Ø±Ú˜ÛŒ Ùˆ Ø¢Ø¨ Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒ</p>
            <p>Ù…Ù†Ø¨Ø¹ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§: Ú¯Ø²Ø§Ø±Ø´ Ø±Ø³Ù…ÛŒ Ø´Ø±Ú©Øª Ø¢Ø¨ Ù…Ù†Ø·Ù‚Ù‡â€ŒØ§ÛŒ Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒ (Ø³Ø§Ù„ Û±Û´Û°Û´)</p>
        </footer>
    </main>
    <div id="error-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4"><div class="bg-white p-6 rounded-lg shadow-lg max-w-sm mx-auto text-center"><div class="text-red-500 mb-4"><i class="fas fa-exclamation-circle fa-3x" aria-hidden="true"></i></div><h3 class="text-lg font-bold text-red-600 mb-2">Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±</h3><p id="error-message" class="text-slate-700">Ù…ØªØ§Ø³ÙØ§Ù†Ù‡ Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾ÛŒØ´ Ø¢Ù…Ø¯. Ù„Ø·ÙØ§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.</p><button id="close-modal-btn" type="button" class="mt-6 bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition">Ø¨Ø³ØªÙ†</button></div></div>
    <script>
(function(){
  function initSimulatorUI(){
    const cs = document.getElementById('cut-slider');
    const rs = document.getElementById('rain-slider');
    const cv = document.getElementById('cut-value');
    const rv = document.getElementById('rain-value');
    if(!cs || !rs || !cv || !rv) return; // DOM not ready or ids wrong

    const sync = () => {
      if (cv && cs) cv.textContent = String(cs.value);
      if (rv && rs) rv.textContent = String(rs.value);
    };

    ['input','change'].forEach(evt => {
      cs.addEventListener(evt, sync, { passive: true });
      rs.addEventListener(evt, sync, { passive: true });
    });

    // Ù…Ù‚Ø¯Ø§Ø± Ø§ÙˆÙ„ÛŒÙ‡
    sync();
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initSimulatorUI, { once:true });
  } else {
    initSimulatorUI();
  }
})();
    </script>
    <script src="../assets/ai.js"></script>
    <script src="../assets/app.js"></script>
    <script>

  function setLoading(el, on=true) {
    if (!el) return;
    if (on) {
      if (!el.dataset.prev) el.dataset.prev = el.innerHTML;
      el.textContent = 'âœ¨ Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´â€¦';
      el.classList.add('opacity-90','animate-pulse');
      el.disabled = true;
    } else {
      if (el.dataset.prev) {
        el.innerHTML = el.dataset.prev;
        el.classList.remove('opacity-90','animate-pulse');
        el.disabled = false;
        delete el.dataset.prev;
      }
    }
  }

  // 1) Ø±Ø¯Ù¾Ø§ÛŒ Ù¾Ù†Ù‡Ø§Ù† Ø¢Ø¨Ù ØºØ°Ø§
  (function wireFootprint(){
    const btn = document.getElementById('btn-footprint');
    const inp = document.getElementById('food-input');
    const out = document.getElementById('out-footprint');
    const thinking = document.getElementById('ai-thinking');
    if (!btn || !inp || !out || !thinking) return;

    function renderSkeleton(){
      out.innerHTML = '<div class="space-y-2 animate-pulse"><div class="h-4 bg-gray-200 rounded"></div><div class="h-4 bg-gray-200 rounded w-5/6"></div><div class="h-4 bg-gray-200 rounded w-4/6"></div></div>';
    }

    function clearSkeleton(){
      out.innerHTML = '';
    }

    function showThinkingUI(){
      thinking.classList.remove('hidden');
      setLoading(btn, true);
      inp.setAttribute('aria-busy','true');
    }

    function hideThinkingUI(){
      thinking.classList.add('hidden');
      setLoading(btn, false);
      inp.removeAttribute('aria-busy');
    }

    btn.addEventListener('click', async () => {
      const foods = (inp.value || '').trim();
      if (!foods) { out.textContent = 'Ù„Ø·ÙØ§Ù‹ Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.'; out.focus(); return; }

      clearSkeleton();
      renderSkeleton();
      showThinkingUI();

      try {
        const basePrompt = `
You are a virtual water footprint expert.
Input: list of food items in Persian.
Task: Calculate the total water footprint in liters and provide a short comparison in Persian (e.g., equivalent showers).
Your output MUST be a JSON object with this structure:
{
  "total_liters": <number>,
  "comparison_text_persian": "<string>",
  "details": [
    {"item": "<string>", "liters": <number>}
  ]
}
All numbers must be numeric (no units attached in JSON).
`;

        const text = await askAI(`${basePrompt}\nFood list: ${foods}`, { model: 'gemini-2.0-flash' });
        console.log("Raw API response:", text);
        const clean = text.replace(/```json|```/g, '').trim();

        let data;
        try {
          data = JSON.parse(clean);
        } catch (e) {
          clearSkeleton();
          out.textContent = 'âš ï¸ Ù¾Ø§Ø³Ø® Ù†Ø§Ù…Ø¹ØªØ¨Ø±';
          console.warn('Invalid JSON');
          return;
        }
        if (
          typeof data.total_liters !== 'number' ||
          !Array.isArray(data.details) ||
          !data.details.every(d => typeof d.item === 'string' && typeof d.liters === 'number')
        ) {
          clearSkeleton();
          out.textContent = 'âš ï¸ Ù¾Ø§Ø³Ø® Ù†Ø§Ù…Ø¹ØªØ¨Ø±';
          return;
        }

        // Ø³Ø§Ø®Øª Ø®Ø±ÙˆØ¬ÛŒ
        clearSkeleton();
        const wrapper = document.createElement('div');
        wrapper.className = 'space-y-1';

        const total = document.createElement('p');
        total.className = 'text-4xl font-extrabold text-blue-600';
        total.textContent = nf.format(data.total_liters) + ' Ù„ÛŒØªØ±';

        const comparison = document.createElement('p');
        comparison.className = 'text-slate-600 mt-2';
        comparison.textContent = data.comparison_text_persian || '';

        const list = document.createElement('ul');
        list.className = 'mt-4 space-y-1';
        data.details.forEach(it => {
          const li = document.createElement('li');
          li.className = 'flex justify-between';
          const item = document.createElement('span');
          item.textContent = it.item;
          const liters = document.createElement('span');
          liters.textContent = nf.format(it.liters) + ' Ù„ÛŒØªØ±';
          li.append(item, liters);
          list.appendChild(li);
        });

        wrapper.append(total, comparison, list);
        out.appendChild(wrapper);
        out.focus();

      } catch(e){
        clearSkeleton();
        out.textContent = 'âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ù…Ø­Ø§Ø³Ø¨Ù‡.';
        out.focus();
        console.warn(e.message);
      } finally {
        hideThinkingUI();
      }
    });
  })();

  // 2) Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² Ø¢ÛŒÙ†Ø¯Ù‡ Ø¢Ø¨
  (function wireSimulator(){
    const btn = document.getElementById('btn-simulate');
    const rain = document.getElementById('rain-slider');
    const cut  = document.getElementById('cut-slider');
    const out  = document.getElementById('out-sim');
    if (!btn || !rain || !cut || !out) return;

    btn.addEventListener('click', async () => {
      try {
        setLoading(btn, true); out.textContent = 'â³';
        const rainVal = rain.value || rain.getAttribute('value') || '0';
        const cutVal  = cut.value  || cut.getAttribute('value')  || '0';
        const prompt =
`Ø¯Ø³ØªÙˆØ±: Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² Ù…Ù†Ø§Ø¨Ø¹ Ø¢Ø¨ Ù…Ø´Ù‡Ø¯.
ÙˆØ±ÙˆØ¯ÛŒ:
- ØªØºÛŒÛŒØ± Ø¨Ø§Ø±Ø´ Ù…Ø§Ù‡ Ø¢ÛŒÙ†Ø¯Ù‡: ${rainVal} Ù…ÛŒÙ„ÛŒâ€ŒÙ…ØªØ±
- Ú©Ø§Ù‡Ø´ Ù…ØµØ±Ù Ù‡Ù…Ú¯Ø§Ù†ÛŒ: ${cutVal} Ø¯Ø±ØµØ¯
Ø®Ø±ÙˆØ¬ÛŒ JSON Ù…Ø¹ØªØ¨Ø± Ø¨Ø§ Ø³Ø§Ø®ØªØ§Ø±:
{
  "bullets_fa":["Ù†Ú©ØªÙ‡"],
  "impact_index":Ø¹Ø¯Ø¯,
  "note_fa":"Ù…ØªÙ†"
}`;
        const text = await askAI(prompt, { model: 'gemini-2.0-flash' });
        let data; try { data = JSON.parse(text); } catch(_) { out.textContent = 'âš ï¸ Ù¾Ø§Ø³Ø® Ù†Ø§Ù…Ø¹ØªØ¨Ø±.'; return; }
        const ul = document.createElement('ul');
        ul.className = 'list-disc pr-4';
        (data.bullets_fa || []).forEach(b => {
          const li = document.createElement('li');
          li.className = 'mb-1';
          li.textContent = b;
          ul.appendChild(li);
        });
        const impact = document.createElement('p');
        impact.className = 'font-bold mt-2';
        impact.textContent = 'Ø´Ø§Ø®Øµ ØªØ£Ø«ÛŒØ±: ' + nf.format(data.impact_index);
        const note = document.createElement('p');
        note.className = 'mt-1';
        note.textContent = data.note_fa || '';
        out.replaceChildren(ul, impact, note);
      } catch(e){ out.textContent = 'âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ.'; console.warn(e.message); }
      finally { setLoading(btn, false); }
    });
  })();

  // 3) Ø±Ø§Ù‡Ú©Ø§Ø±Ù‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒâ€ŒØ´Ø¯Ù‡
  (function wireTips(){
    const btn = document.getElementById('btn-tips');
    const fam = document.getElementById('family-input') || document.querySelector('[name="familySize"]');
    const shw = document.getElementById('shower-input') || document.querySelector('[name="showerMins"]');
    const out = document.getElementById('out-tips');
    if (!btn || !fam || !shw || !out) return;

    btn.addEventListener('click', async () => {
      try {
        setLoading(btn, true); out.textContent = 'â³';
        const members = fam.value || '4';
        const shower  = shw.value || '10';
        const prompt =
`Ø¯Ø³ØªÙˆØ±: Ù…Ø´Ø§ÙˆØ± ØµØ±ÙÙ‡â€ŒØ¬ÙˆÛŒÛŒ Ø¢Ø¨ Ù‡Ø³ØªÛŒ.
ÙˆØ±ÙˆØ¯ÛŒ: Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ ${members} Ù†ÙØ±Ù‡ØŒ Ø²Ù…Ø§Ù† Ø­Ù…Ø§Ù… ${shower} Ø¯Ù‚ÛŒÙ‚Ù‡.
Ûµ ØªÙˆØµÛŒÙ‡ Ú©ÙˆØªØ§Ù‡ Ø§Ø±Ø§Ø¦Ù‡ Ø¨Ø¯Ù‡.
Ø®Ø±ÙˆØ¬ÛŒ JSON Ù…Ø¹ØªØ¨Ø± Ø¨Ø§ Ø³Ø§Ø®ØªØ§Ø±:
{
  "bullets_fa":[{"tip":"Ù…ØªÙ†","liters_per_day":Ø¹Ø¯Ø¯}]
}`;
        const text = await askAI(prompt, { model: 'gemini-2.0-flash' });
        let data; try { data = JSON.parse(text); } catch(_) { out.textContent = 'âš ï¸ Ù¾Ø§Ø³Ø® Ù†Ø§Ù…Ø¹ØªØ¨Ø±.'; return; }
        const ul = document.createElement('ul');
        ul.className = 'list-disc pr-4';
        (data.bullets_fa || []).forEach(t => {
          const li = document.createElement('li');
          const tip = document.createElement('span');
          tip.textContent = t.tip + ': ';
          const strong = document.createElement('strong');
          strong.textContent = nf.format(t.liters_per_day) + ' Ù„ÛŒØªØ±/Ø±ÙˆØ²';
          li.appendChild(tip);
          li.appendChild(strong);
          ul.appendChild(li);
        });
        out.replaceChildren(ul);
      } catch(e){ out.textContent = 'âš ï¸ Ø®Ø·Ø§ Ø¯Ø± ØªÙˆÙ„ÛŒØ¯ Ø±Ø§Ù‡Ú©Ø§Ø±.'; console.warn(e.message); }
      finally { setLoading(btn, false); }
    });
  })();

    </script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/twemoji.min.js"
        integrity="sha512-3v3L9b5m9q2s0i6gQ0yq+8vJm3a6oI1mG2r3l0X3zv3Y6uFJq1Wc1q9kGmXlM3Yj6fxp2U7N7yqZtCz9D6Qy4A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script defer src="/assets/emoji-flag.js"></script>
  <script defer src="/assets/numfmt.js"></script>
</body>
</html>
